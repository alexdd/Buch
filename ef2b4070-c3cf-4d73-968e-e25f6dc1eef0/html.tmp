<div data-attribute-id="7ca48bd5-7f2e-44cd-aacd-c15f7618b43e" class="topic show_menu tags" data-element="topic" data-deletable="false" data-tektur-editor-id="ea8b87ae-73bd-4191-9714-cafa25693e1c"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div data-attribute-id="ba9dfb96-d3dd-49c8-9008-8476c0e59728" class="title pmarker tags" data-element="title" data-tektur-editor-id="d2cadacc-c71d-4177-a498-217393b27aef" contenteditable="true">Bi-Temporale Dokumente</div><div class="abstract optional show_menu tags" data-element="abstract" data-excluding="shortdesc" style="display:none" data-tektur-editor-id="0a3c33a1-e600-4038-a200-3d5492ad77a3"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="a6aefeac-16a1-4de8-85cd-188c00cd8b7c" contenteditable="true"></div></div><div data-attribute-id="631dac5b-f444-4489-896e-cfc73963b9c5" class="body show_menu tags" data-element="body" data-deletable="false" data-tektur-editor-id="179cc3f3-c28f-46be-8f33-168bbb261a7d"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="section tektur-wrapper tags" data-element="section" data-tektur-editor-id="561ab2a5-ce40-4fe8-a4c7-42334fc7401e"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="fd257336-1ea5-47eb-8795-ac4f22576a8e" class="p pmarker tags" data-element="p" data-tektur-editor-id="f4467dc4-728c-439f-aac5-a87cb63767ae" contenteditable="true">Wenn wir zwischen der Zeit in der das Dokument, bspw. ein Vetrag 
in der DB angelegt wird, und der Zeit in der ein Vetrag zwischen zwei 
Vetragspartnern abgeschlossen wird unterscheiden, dann betrachten
wir zwei Zeitachsen.<span class="bracket-tags-marker" id="aa6ea095-d7ed-4f51-b430-a03268489843">[[<span class="bracket-tags">xe1:Konzepte;xe2:Bi-Temporale Dokumente</span>]]</span></div><ul data-attribute-id="d4916e18-adeb-49ee-8153-3b978adbc1afd6e6" class="ul tags" data-element="ul" data-tektur-editor-id="6a65efe3-beb6-4dcd-94eb-e49945b41070"><li data-attribute-id="a68bfa03-4a70-4f8e-b66b-250de1496fc6d6e7" class="li tags" data-element="li" data-tektur-editor-id="07446364-af94-4438-822c-15a35eb144d0"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="46d3aa4f-711a-488f-bf81-077849243208d6e8" class="p pmarker tags" data-element="p" data-tektur-editor-id="603e8e14-bad2-4045-8e85-bfa9311aa5f3" contenteditable="true">die gültige Zeit (Valid Time)</div></li><li data-attribute-id="d8139f88-a56e-4e2a-9d68-5ccdfe70de4ad6e10" class="li tags" data-element="li" data-tektur-editor-id="70678a3a-d744-490a-88db-836f7eb80a92"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="4163702b-b6e9-40ec-b389-2a8af0afae33d6e11" class="p pmarker tags" data-element="p" data-tektur-editor-id="a42de4fc-1dea-4927-b3bf-418bf6e283d9" contenteditable="true">die Systemzeit (System Time)</div></li></ul><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="fab57861-93d5-47d3-8046-7b0d2c180b5cd6e13" class="p pmarker tags" data-element="p" data-tektur-editor-id="616b857f-954f-47a7-8f4e-3ea64249a3ed" contenteditable="true">Für die Vetragspartner ist nur die gültige Zeit relevant. Das Zeitfenster
zwischen gültiger Zeit und Systemzeit ist jedoch in manchen Fällen
ausschlaggebend.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="50e4e500-a66d-4744-9730-1e4da489e1f8d6e15" class="p pmarker tags" data-element="p" data-tektur-editor-id="9358b891-842b-4a5f-b78a-db543b450570" contenteditable="true"><span data-attribute-id="e607c6b2-4d9a-4652-b8d8-26fc098c3bd7d6e16" class="i tags" data-element="i" data-tektur-editor-id="df568bdf-e83a-418a-9c41-dded2789cb59">Bsp: Kürzlich wurde
meine Geldbörse mit meinem Perso geklaut. Beim Austellen eines vorläufigen
Ausweises wurde ich schriftlich darauf hingewiesen, dass nun mein Perso
bei Interpol zur Fahndung ausgeschrieben ist.</span></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="93133dc8-bb02-4da9-b779-64955be86d07d6e17" class="p pmarker tags" data-element="p" data-tektur-editor-id="4fed198f-2f60-4670-a4ed-7835d1934b4b" contenteditable="true"><span data-attribute-id="96689113-3ef6-49b3-9c2c-dab8e0489a27d6e19" class="i tags" data-element="i" data-tektur-editor-id="1a2d975f-22e7-4e16-9399-6c171322fa12">Kurze Zeit später fand ein netter Herr die Geldbörse (ohne Geld aber 
mit allen Papieren) in seinem Garten. Bei einer anschliessenden Busfahrt mit einem
Fernbus, wurde ich bei einer Zollkontrolle festgehalten, da das System der Polizei noch nicht aktualisiert war.</span></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="1fee1c3d-dd8b-4649-85ce-5b3d23ecec18d6e19" class="p pmarker tags" data-element="p" data-tektur-editor-id="d230fa5f-6163-4096-87ba-3ede95d833c9" contenteditable="true">Ich nehme an, dass nach meiner Unschuldsbekundung der Vorgang auch
auf Seiten des Polizeicomputers aktualisiert wurde. Nun könnte man zwei Fragen
stellen:</div><ol data-attribute-id="6adc97a7-ba28-4619-ba64-bbb29b702aded6e21" class="ol tags" data-element="ol" data-tektur-editor-id="3a1b75df-e792-43fb-95c7-f9bb0ce5bab0"><li data-attribute-id="602e5f1b-90a5-40c2-a2cf-a89803cf1153d6e22" class="li tags" data-element="li" data-tektur-editor-id="c8c783e3-0aa4-4dea-b259-05197bb81e0d"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="5664c21f-b0b1-4c4f-a8f1-251415142a7cd6e23" class="p pmarker tags" data-element="p" data-tektur-editor-id="f304d4b1-2435-4e9c-af59-4acb2946c523" contenteditable="true">Ist das Festhalten seitens der Zollbeamten rechtens?</div></li><li data-attribute-id="8d9e0d92-4a1a-4a08-a08c-1f1d7f212bd6d6e25" class="li tags" data-element="li" data-tektur-editor-id="a9e1f190-4e41-40d2-8c9d-c51ce6027815"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="94fb012d-2fbb-4d68-b285-c05ccb98f507d6e26" class="p pmarker tags" data-element="p" data-tektur-editor-id="efbbc4ae-526c-43ca-8443-d948e147dff2" contenteditable="true">Habe ich mich durch ein verspätetes Anzeigen des Funds schuldig gemacht?</div></li></ol><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="241b1f50-1f18-4bb7-9986-a74d1e786711" contenteditable="true"></div><div data-element="note" class="show_menu tags" data-tektur-editor-id="e768e35b-19a7-4c29-982f-2d386f17d089"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="note"><div class="signal-word">NOTE</div><div class="hcontent"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="f93b1ee9-1f0e-4d60-a375-7e32300f4d41d6e29" class="p pmarker tags" data-element="p" data-tektur-editor-id="8969f02b-0e9b-43ba-9af9-d1f69b666f58" contenteditable="true">Beachte, dass man diese Fragen auch noch nach 10 Jahren stellen
könnte und das - bei meinem Pech in diesen Angelegenheiten - so ein Vorfall auch noch öfters passieren könnte...</div></div></div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="19976305-dbf8-447b-bf4e-b0e849b7e741d6e31" class="p pmarker tags" data-element="p" data-tektur-editor-id="b38d8a5f-ad40-4853-8bf2-904862bdef85" contenteditable="true">Um diese Fragen zu beantworten, müsste unsere Datenbank in der Lage sein,
eine <span class="bracket-tags-marker" id="d15c3d08-d069-4b2c-84b3-3d0740e89369">[[<span class="bracket-tags">link</span>]]</span>bitemporale Query<span class="bracket-tags-marker" id="6141e9ef-6ccf-4bdf-b3c5-c7a5ad6d458a">[[<span class="bracket-tags">fn:https://en.wikipedia.org/wiki/Temporal_database*Wikipedia Eintrag zum Thema Temporal Databases mit einer Begriffserklärung</span>]]</span> auszuführen. Zunächst registerieren wir den Vorgang
des Persoverlustes in unserer Marklogic Datenbank:</div><div data-element="note" class="show_menu tags" data-tektur-editor-id="49cf9a04-a3ae-4fbe-831e-1a774284a14e"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="note"><div class="signal-word">NOTE</div><div class="hcontent"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="bc4e68d9-d093-46bc-bf26-de40abdc0486d6e34" class="p pmarker tags" data-element="p" data-tektur-editor-id="24b6d5c2-0838-44b5-a43f-71e2145a9b03" contenteditable="true">Da wir hier auf einer XML Datenbank arbeiten, sprechen wir von einem Dokument,
wenn wir einen Datensatz meinen. </div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="e5e49287-034d-456c-bc49-d3e82236edb7d6e38" class="p pmarker tags" data-element="p" data-tektur-editor-id="134f1c7e-ddcc-481b-ade3-10b3e8b20de1" contenteditable="true">Der Datensatz bzw. das Dokument wird nicht aktualisiert, sondern stattdessen das Dokument mit den aktualisierten Daten in einer neuen Version angelegt. </div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="e5af2997-aab7-463b-824b-f4de4f4d15f2d6e40" class="p pmarker tags" data-element="p" data-tektur-editor-id="f99c6b9d-f144-4337-8366-07f4d932720f" contenteditable="true">Auf diese Weise bleibt die Änderungshistorie erhalten.</div></div></div></div><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="11d30872-f0c8-4259-a6c4-19aadf58e376" contenteditable="true"></div><div class="pre"><div data-attribute-id="f3c1b5b8-90bc-489e-8d36-fe9a92f987e0d7e42" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="236d5457-0b89-485e-b75d-c65aad53efa8" contenteditable="true">xquery version "1.0-ml";
import module namespace temporal = 
       "http://marklogic.com/xdmp/temporal" at "/MarkLogic/temporal.xqy";   
let $root :=    
  &#x3C;vorgang&#x3E;     
    &#x3C;perso-id&#x3E;XYZ&#x3C;/perso-id&#x3E;    
    &#x3C;name&#x3E;Alex Düsel&#x3C;/name&#x3E;   
    &#x3C;status&#x3E;gestohlen&#x3C;/status&#x3E;
  &#x3C;/vorgang&#x3E;
let $options :=   
  &#x3C;options xmlns="xdmp:document-insert"&#x3E;     
    &#x3C;metadata&#x3E;        
      &#x3C;map:map xmlns:map="http://marklogic.com/xdmp/map"&#x3E;          
        &#x3C;map:entry key="validStart"&#x3E;            
	  &#x3C;map:value&#x3E;2019-02-01T08:23:11&#x3C;/map:value&#x3E;          
	&#x3C;/map:entry&#x3E;          
	&#x3C;map:entry key="validEnd"&#x3E;            
	  &#x3C;map:value&#x3E;9999-12-31T11:59:59Z&#x3C;/map:value&#x3E;          
	&#x3C;/map:entry&#x3E;         
      &#x3C;/map:map&#x3E;    
    &#x3C;/metadata&#x3E;  

return  temporal:document-insert("/perso-verluste", 
                                 "duesel_alex_270774.xml", 
                                 $root, $options)</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="34c9ed87-b6df-4fde-bda2-1b868aac4838d6e39" class="p pmarker tags" data-element="p" data-tektur-editor-id="6a4e48ed-62a6-4ec2-89a3-592898ea537e" contenteditable="true">Unser Enddatum liegt in ferner Zukunft sicherzustellen, dass der Vorgang auf unbestimmte Zeit
im System bleibt.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="500405f5-6396-4071-8349-1d9f6d39049dd6e41" class="p pmarker tags" data-element="p" data-tektur-editor-id="ab9e3322-e88e-4b79-becb-6a69b49c014f" contenteditable="true">Drei Tage später hatte ich meinen Ausweis wieder und der Vorgang wurde vier Tage später,
mit dem Status "gefunden" im Polizeicomputer aktualisiert:</div><div class="pre"><div data-attribute-id="747d6fe0-729d-4afb-af3e-5c698f1226e3d7e49" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="51a1689b-349b-4e35-aba3-8081b91ea4ce" contenteditable="true">xquery version "1.0-ml";
import module namespace temporal = 
       "http://marklogic.com/xdmp/temporal" at "/MarkLogic/temporal.xqy";   
let $root :=    
  &#x3C;vorgang&#x3E;     
    &#x3C;perso-id&#x3E;XYZ&#x3C;/perso-id&#x3E;    
    &#x3C;name&#x3E;Alex Düsel&#x3C;/name&#x3E;   
    &#x3C;status&#x3E;<span data-attribute-id="a02c8c57-b464-4265-8a18-5c0a3c298d51d6e45" class="b tags" data-element="b" data-tektur-editor-id="39f4c5cf-d578-40e9-a177-4e8c0889479b">gefunden</span>&#x3C;/status&#x3E;
  &#x3C;/vorgang&#x3E;
let $options :=   
  &#x3C;options xmlns="xdmp:document-insert"&#x3E;     
    &#x3C;metadata&#x3E;        
      &#x3C;map:map xmlns:map="http://marklogic.com/xdmp/map"&#x3E;          
        &#x3C;map:entry key="validStart"&#x3E;            
	  &#x3C;map:value&#x3E;2019-02-06T08:00:00&#x3C;map:value&#x3E;          
	&#x3C;/map:entry&#x3E;          
	&#x3C;map:entry key="validEnd"&#x3E;            
	  &#x3C;map:value&#x3E;9999-12-31T11:59:59Z&#x3C;/map:value&#x3E;          
	&#x3C;/map:entry&#x3E;         
      &#x3C;/map:map&#x3E;    
    &#x3C;/metadata&#x3E;  

return  temporal:document-insert("/perso-verluste", 
                                 "duesel_alex_270774.xml", 
                                 $root, $options)</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="7dbc517d-b5b4-4c1b-b691-7d20f6c61c12d6e48" class="p pmarker tags" data-element="p" data-tektur-editor-id="9598389b-2990-4969-afe9-10be946006b3" contenteditable="true">Nach der Aktualisierung enthält unsere Datenbank logisch gesehen drei Dokumente zu diesem Vorgang, 
die über eine Query gesucht werden können:</div><ol data-attribute-id="0cbdea46-7a48-4ab4-b77f-a84d534dd173d6e50" class="ol tags" data-element="ol" data-tektur-editor-id="a9386a8b-34ab-4b04-bddd-9164a99786d7"><li data-attribute-id="28111bf7-7f3b-4f08-a7d7-709dffa709efd6e51" class="li tags" data-element="li" data-tektur-editor-id="dd353dcf-6a31-4a61-915c-4efae6dc9368"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="d112decc-3611-40d4-b9ca-0a55258e223ed6e52" class="p pmarker tags" data-element="p" data-tektur-editor-id="0db69427-8689-4d73-8c7e-19dd2a27db32" contenteditable="true">Das Originaldokument, es ist vom 1.2.2019 bis zum 5.2.2019 im System aktiv</div></li><li data-attribute-id="da0adb7d-82a2-4f2b-8a31-4180a0f5c89ed6e54" class="li tags" data-element="li" data-tektur-editor-id="30e40f8a-039b-4da6-9684-f01d93914de3"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="3a23cb95-2f16-4254-8245-c0bf90780a1bd6e55" class="p pmarker tags" data-element="p" data-tektur-editor-id="25afa14b-9fc4-45ad-a56b-a96e97f433d2" contenteditable="true">Die Aktualisierung, sie ist ab dem 6.2.2019 aktiv</div></li><li data-attribute-id="7e0f4570-b3ae-4ee7-8fb5-51d9163652efd6e57" class="li tags" data-element="li" data-tektur-editor-id="6b29900f-a684-4cf5-adb5-2adf53715310"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="9d2d4a7b-bdf2-42e8-a024-cb053a126324d6e58" class="p pmarker tags" data-element="p" data-tektur-editor-id="04160e30-86d3-4661-90c6-59491858363b" contenteditable="true">Ein "Split"-Dokument<span class="bracket-tags-marker" id="a23acff5-49cc-484a-9de8-da202aa3f788">[[<span class="bracket-tags">xe1:Split-Dokument</span>]]</span>, das aus der verspäteten Aktualisierung resultiert. Es ist ab dem 6.2.2019 im System aktiv, 
und zeigt den Zeitraum über einen Tag, vom 4.2.2019 bis 5.2.2019 - in dem ich ohne Perso registriert war, ihn aber tatsächlich
schon wieder hatte.</div></li></ol><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="6dc19f9e-db12-4a7c-83cd-42bb430d2c07d6e60" class="p pmarker tags" data-element="p" data-tektur-editor-id="692cede8-3229-400e-8587-ca781c81fc42" contenteditable="true">Im Gegensatz zu einer herkömmlichen Datenhaltung, bei der ein Datensatz aktualisiert wird - ggf. noch eine neue
Version angelegt wird - wird beim Dokument-basierten Ansatz mit bi-temporaler Datenhaltung jede Transaktion separat
abgespeichert. </div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="e1401c45-9a9f-41ec-a7a5-59721215ab2ed6e62" class="p pmarker tags" data-element="p" data-tektur-editor-id="01b047c5-9175-4dae-a584-8f64393790b1" contenteditable="true">Das ist vergleichbar mit einer Simulation des tatsächlichen Papierverkehrs bei buchhalterischen Tätigkeiten.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="b2db7425-9d5b-4429-9ca6-51a67a0a34d0d6e62" class="p pmarker tags" data-element="p" data-tektur-editor-id="85c84951-ed78-421c-9103-08b16eb72c0e" contenteditable="true">Die Abfrage so einer Datenbank ist dadurch nicht einfacher. Drei Queries, die jeweils eines dieser drei
Dokumente zurückgeben, könnten bspw. so aussehen:</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="acdf48e7-7718-42be-89b9-e04b3860a7a0d6e72" class="p pmarker tags" data-element="p" data-tektur-editor-id="1dc6391e-00a2-4f4c-868f-304c85622801" contenteditable="true"><span class="bracket-tags-marker" id="d813ee8e-9e40-4674-8478-600554e08024">[[<span class="bracket-tags">subtitle:Rückgabe des Originals</span>]]</span></div><div class="pre"><div data-attribute-id="2ea208d0-1266-4bc8-bd90-d3ab0078df81d7e74" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="445b4c33-4a80-4409-9583-112f376ffb59" contenteditable="true">xquery version "1.0-ml";
cts:search(fn:doc(), cts:period-range-query(
  "system",     
  "ISO_CONTAINS",     
  cts:period(xs:dateTime("2019-02-02T00:00:00"),                
             xs:dateTime("2019-02-03T23:59:59")) )</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="6d72130d-963a-4908-ac29-70e5fd445d16d6e76" class="p pmarker tags" data-element="p" data-tektur-editor-id="862afdae-b3bf-4af7-b781-137d66543586" contenteditable="true">Hier wird geprüft, ob ein Dokument im System aktiv war, dass den Zeitraum vom 2.3. bis zum 3.3. umfasste (<span class="bracket-tags-marker" id="c54adbce-753c-4b0a-804a-1a2a143b5a4f">[[<span class="bracket-tags">code:ISO_CONTAINS</span>]]</span>). Diese Query ist erfolgreich und gibt das Original-Dokument des Vorgangs zurück: In diesem Zeitraum war ich also mit gestohlenem Perso registriert.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="326f277b-22dc-4247-ac43-a1245718a13ed6e79" class="p pmarker tags" data-element="p" data-tektur-editor-id="f6fd0ca8-9e63-48e6-b604-449dbd1de323" contenteditable="true"><span class="bracket-tags-marker" id="754cc61e-011d-4c39-8439-f957d970407c">[[<span class="bracket-tags">subtitle:Rückgabe des Split-Dokuments</span>]]</span></div><div class="pre"><div data-attribute-id="060efc2a-78f4-4287-8286-33ec9205b74ed7e81" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="e5706b6d-bca0-4c83-aefe-df30ac76242a" contenteditable="true">xquery version "1.0-ml";
cts:search(fn:doc(), cts:period-range-query(
   "valid",
   "ALN_FINISHES",
   cts:period(xs:dateTime("2019-02-06T08:00:00"),
              xs:dateTime("2019-02-06T08:00:00")) ))</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="3922ce91-3c33-48c6-8400-666039dec485d6e83" class="p pmarker tags" data-element="p" data-tektur-editor-id="a056efbc-e11a-4f8f-8384-cd86e90c7da0" contenteditable="true">Bei dieser Query wird geprüft, ob es ein Dokument gibt, dass zu einem bestimmten Datum auf inaktiv gesetzt wurde (<span class="bracket-tags-marker" id="d97c34ed-a94a-4ab9-a5df-258baad1ab37">[[<span class="bracket-tags">code:ALN_FINISHES</span>]]</span>) - Das Split-Dokument wird automatisch auf inaktiv gesetzt, wenn die neue Version angelegt wird. Unser Suchdatum wäre also folgendes <span class="bracket-tags-marker" id="e0780c09-5fa7-4317-b032-bf873210629a">[[<span class="bracket-tags">code:2019-02-06T08:00:00</span>]]</span>.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="6d071bab-832d-44ca-862f-cdacf2b3c395d6e85" class="p pmarker tags" data-element="p" data-tektur-editor-id="c15efcba-563b-46da-88df-b6b4721fe4eb" contenteditable="true"><span class="bracket-tags-marker" id="3411181e-3ee5-4f70-b063-6d6c0cd856c3">[[<span class="bracket-tags">subtitle:Rückgabe von Split und neuer Version</span>]]</span></div><div class="pre"><div data-attribute-id="c3fd6151-a18a-494c-96a6-bb84b271d572d7e87" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="70e8e2d2-272b-4c19-a76b-f489fd6a2325" contenteditable="true">xquery version "1.0-ml";
cts:search(fn:doc(), cts:period-range-query(
   "system",
   "ALN_AFTER",
   cts:period(xs:dateTime("2019-02-05T11:00:00"),
              xs:dateTime("2019-02-05T11:20:00")) ))</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="a28b9e0d-50c7-4d25-93f6-092f892cfaf0d6e89" class="p pmarker tags" data-element="p" data-tektur-editor-id="9e5232e4-cdb5-44e7-ab49-80bf862e41c1" contenteditable="true">Hier wird geprüft ob es Dokumente gibt, die nach einer bestimmten Zeitspanne im System aktiv waren. Man beachte hier, dass eine Periode angegeben ist, obwohl nur ein Datum notwendig wäre. Der Vergleichsoperator hierzu heisst <span class="bracket-tags-marker" id="709931fd-0dc9-4aff-865d-8c2522cb6550">[[<span class="bracket-tags">code:ALN_AFTER</span>]]</span>.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="9a383d4c-8c64-4a96-a7e9-b44018451dc2d6e91" class="p pmarker tags" data-element="p" data-tektur-editor-id="b88a032a-473f-4345-8717-5041caba5c55" contenteditable="true"><span class="bracket-tags-marker" id="c48abf45-e71f-4f06-8a6b-228f29363d25">[[<span class="bracket-tags">subtitle:Rückgabe von aktueller Version</span>]]</span></div><div class="pre"><div data-attribute-id="7dc2a25e-2f45-4b5b-922c-878da4e3c49bd7e93" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="bc4313e4-b814-4d5c-8063-806993ff24e0" contenteditable="true">xquery version "1.0-ml";
cts:search(fn:doc(), cts:period-compare-query(
   "system",
   "ISO_CONTAINS",
   "valid" ))</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="fd41504a-bbd5-4a2c-b30b-e900a2fc5bbed6e95" class="p pmarker tags" data-element="p" data-tektur-editor-id="60846986-6eea-44cb-a34a-2fa2816dc64d" contenteditable="true">Die aktuelle Version kann in Erfahrung gebracht werden, indem geprüft wird, welche gültigen Dokumente innerhalb der Systemzeitspanne liegen. Das kann nur die aktuelle Version sein. Frühere gültige Versionen und Split-Dokumente wären vor der Systemzeit-Spanne.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="4f2dcc2f-b93d-4e30-b5e0-b19426c49d74d6e97" class="p pmarker tags" data-element="p" data-tektur-editor-id="23055806-4a5e-4d83-b62c-d6092a4e2113" contenteditable="true">Die letzte Version eines Dokuments kann aber auch einfach über ein <span class="bracket-tags-marker" id="6594947d-158e-4766-abfa-76ede2c74b6a">[[<span class="bracket-tags">code:latest</span>]]</span> flag in Erfahrung gebracht werden:</div><div class="pre"><div data-attribute-id="d4b4490c-8ebf-4f14-a3f4-78c3d7429c15d7e99" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="5c8c96d9-863b-4bbd-b13c-0f5f0c6f090f" contenteditable="true">xquery version "1.0-ml";
cts:search(fn:doc(), cts:and-query((
    cts:collection-query(("koolorder.xml")),
    cts:collection-query(("latest")))))</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="8a06ef70-7819-46ee-bfb8-8b3d7199f66ad6e102" class="p pmarker tags" data-element="p" data-tektur-editor-id="77c45d48-eec2-4f74-9c1f-873135e8d9ef" contenteditable="true"><span class="bracket-tags-marker" id="b1a8ab9f-0509-4c22-b077-85d9fa3ece68">[[<span class="bracket-tags">subtitle:Weiterführende Links</span>]]</span></div><ul data-attribute-id="836062da-178c-4961-87db-24240bc3acfdd6e108" class="ul tags" data-element="ul" data-tektur-editor-id="8ffbbfd3-6803-4bc9-af0f-5d5eb5fcd8c5"><li data-attribute-id="537cc36e-03ce-460a-8a9b-29c99e828949d6e109" class="li tags" data-element="li" data-tektur-editor-id="69323a21-6caa-4d5d-98eb-f2fbf832a233"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="3eebe4b0-500c-4caf-a6ef-ec0fb3e6f692d6e110" class="p pmarker tags" data-element="p" data-tektur-editor-id="7e1ad178-fb97-4923-8580-061d545b2851" contenteditable="true"><span class="bracket-tags-marker" id="3143d41a-a28c-43b8-85bd-125fd68bd23c">[[<span class="bracket-tags">link</span>]]</span>Temporal Developer's Guide auf den MarkLogic Doku-Seiten<span class="bracket-tags-marker" id="1bcfb23f-849c-4aed-9448-09a87ed3d597">[[<span class="bracket-tags">fn:https://docs.marklogic.com/guide/temporal*Quickstart Dokumentation, Understanding, Managing and Searching Temporal Documents</span>]]</span></div></li><li data-attribute-id="2ec828f6-6f3d-4a57-992e-0b0373713353d6e112" class="li tags" data-element="li" data-tektur-editor-id="6f29f676-7de9-486a-9f0d-2c0e3d65c596"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="5277160a-a715-4227-b2ae-96d9e230a775d6e113" class="p pmarker tags" data-element="p" data-tektur-editor-id="b6ac2830-997f-4ba1-b207-c492091c48b5" contenteditable="true"><span class="bracket-tags-marker" id="12640d06-18bd-425a-bf3f-a90e98a592da">[[<span class="bracket-tags">link</span>]]</span>A Deep Dive into Bitemporal<span class="bracket-tags-marker" id="b02cbeb8-6cdf-485a-a699-d71f590b27da">[[<span class="bracket-tags">fn:https://www.marklogic.com/blog/bitemporal/*Weiterführender Link zum Thema Bitemporale Dokumente in MarkLogic</span>]]</span></div></li><li data-attribute-id="4d5aa592-e378-4935-a3e8-535b9d4e54cad6e112" class="li tags" data-element="li" data-tektur-editor-id="53f8f70f-ae5f-4d92-816f-33ea40b11f28"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="45286919-c6bc-41e6-841b-dcd6b85d4b05d6e113" class="p pmarker tags" data-element="p" data-tektur-editor-id="aa8b9919-d803-4dd7-9293-1b4dcc30bca1" contenteditable="true"><span class="bracket-tags-marker" id="536ad763-5273-4267-bbef-13a23b5264f0">[[<span class="bracket-tags">link</span>]]</span>Temporale Datenhaltung in der Praxis mit Java<span class="bracket-tags-marker" id="02699120-0e64-47e9-a7a6-94dd6a0c6cb6">[[<span class="bracket-tags">fn:https://www.heise.de/developer/artikel/Temporale-Datenhaltung-in-der-Praxis-mit-Java-2100268.html?seite=all*Temporale Datenhaltung in der Praxis mit Java</span>]]</span></div></li></ul><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="e76987e3-1b11-4301-a723-0234ea9023b8" contenteditable="true"></div></div></div></div>