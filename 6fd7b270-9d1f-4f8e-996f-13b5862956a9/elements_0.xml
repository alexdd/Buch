<?xml version="1.0" encoding="UTF-8"?><elements><element id="a693fc99-5e16-4788-95a0-958870aa845a">Validierung mit Schematron </element><element id="4e6cde2f-795e-42a2-97a3-67b0c72db22a">Um die Korrektheit einer XML Instanz zu prüfen, gib es verschiedene Schemata, wie XSD, RNG oder DTD, welche der Parser beim Aufbau des DOM Baums heranzieht. Eine Validierung mit Apache Xerces könnte beispielsweise als Java Code folgendermaßen angestossen werden:</element><element id="e0f8f3a8-ac48-4040-aa61-6d98bf685133d6e8">Schema Dateien können aber auch in XML Editoren eingebunden werden, um schon während der Eingabe der XML Instanz die Korrektheit zu überprüfen. </element><element id="3920a1e6-ddfe-499f-997b-33b7b330ae55d6e10">Das geht einerseits über die Angabe des Doctypes in der XML Instanz, anderseits bieten auch alle Editoren die Möglichkeit ein bestimmtes Schema explizit auszuwählen, um gegen dieses auf Anforderung zu validieren.</element><element id="0c8bf04d-6ef7-4b2b-9e36-3c115fdf5657d6e10">Gilt es komplexere Businessregeln zu überprüfen, die über Syntax-, Konsistenz- und einfache Korrektheitschecks hinausgehen, empfiehlt sich eine Validierung mit Schematron Regeln.</element><element id="c802dd14-5953-4c24-8637-f7552d107e57d6e13">Schematron ist XSLT</element><element id="c7d6f54a-c183-4238-8fcd-65258833ebd9d6e15">Bei einer Schematron Validierung wird eine XML Instanz mit Hilfe eines automatisch generierten XSLT Stylesheets überprüft. Dieses kontextabhängige Stylesheet wird aus einer in der Schematron Syntax vom Autor verfassten Regelbasis, die wiederum in XML vorliegt, über ein zweites XSLT Stylesheet generiert - Dieses zweite XSLT Stylesheet ist sozusagen das eigentliche Schematron Programm. </element><element id="ca8d184a-924b-4ea6-bdab-3340c1bde072d6e19">Das folgende Diagramm veranschaulicht die Vorgehensweise anhand eines Filter-Szenarios, bei dem ein XML Dokument mit einigen ungültigen Passagen in eine gefilterte Darstellung überführt wird.</element><element id="5f9d96e7-770b-4920-acbf-26cc07065cead7e32">Schematron Validierung mit Filter</element><element id="4e1ec9a6-9a1a-470b-9e86-2708788be97bd6e19">Zu finden ist das Schematron Repo auf Github. Dieses Repo ist etwas unübersichtlich. Der relevante Teil des Sourcecodes befindet sich unter: </element><element id="0cc5ca05-4506-44eb-981b-f74a156e6da0d6e20">CLI Verwendung</element><element id="3f68c067-cd95-4b41-b51b-c594057af29fd6e22">Um die Schematron XSLT Skripte in eine eigene XSLT Anwendung per Kommandozeile einzubinden, könnte man folgendermassen vorgehen: </element><element id="59142162-ceef-41df-a800-9a82f41eaff6d6e30">Im eigenen GIT Projekt das Schematron Projekt als Submodule referenzieren.</element><element id="8a62a1b3-7fee-435a-bf97-c1948afb372ed6e33">Eine Regelbasis anlegen, beispielsweise .</element><element id="eab4b247-bdc0-4465-bc93-a032e7705a07d6e39">Zwei Batch-Skripte anlegen, beispielsweise  und .</element><element id="998bb486-7c42-4af2-8e5b-0e85e56dc38ad6e50">Mittels des Skripts  wird aus der Schematron Regelbasis das Schematron XSLT Stylesheet generiert. Der Inhalt dieser Batchdatei könnte zum Beispiel so aussehen:</element><element id="7be99f5c-fe71-459c-8ddf-9f08385e9169d6e54">Der Prozess zum Erzeugen des projektspezifischen Validerungs-XSLT-Skripts ist dreistufig und wird über die folgenden XSLT Schritte abgearbeitet.</element><element id="eb1a9bae-260a-4106-b5c9-b6851fdd2ba1d6e58"/><element id="a82297e3-5906-4320-99eb-713788e3b883d6e61"/><element id="cab1d34a-07d6-4707-8cfd-1a22273d0703d6e64"/><element id="315b3655-c795-42e1-908a-769f2ca0b68cd6e66">Herauszufinden, was in diesen Skripten passiert, sei dem geneigten Leser selbst überlassen. Uns interessiert an dieser Stelle nur das Resultat, nämlich das XSLT Stylesheet .</element><element id="a226a2f6-4408-401b-b164-9ee358f8bd09d6e76">Dieses Skript wird in der Batchdatei  aufgerufen:</element><element id="bd569a63-55f0-4524-bb53-0d3eeb1bdb59d6e83">Die Ausgabe dieses Prüfprozesses ist eine XML Datei mit den Fehlern in der Eingabe-XML-Instanz, die weiterverarbeitet werden kann, beispielsweise als Filterkriterium für einen nachfolgenden Prozessschritt. Ihr Inhalt dieser Datei sieht z.B. wie folgt aus:</element><element id="62973ac6-dca8-47cf-b4aa-8e5b6c4242a6d6e88">Neben den  Elementen, die angeben, was bei der überprüften XML-Instanz fehlgeschlagen ist, gibt es auch die Möglichkeit sich positive Ergebnisse anzeigen zu lassen - über das Element .</element><element id="a939cc7b-99b0-401a-8bc5-5b0c0f41882cd6e100">Konkret sagt uns das obige XML Schnipsel, dass unsere  mit dem Wert  im geprüften XML Dokument nicht eindeutig ist. Die Schematron Regelbasis, die wir zur Überprüfung angegebenen haben, sieht so aus:</element><element id="86e8f330-f639-42dd-98da-7eebba76fb51d6e108">Neben der \"successful\" und \"failed\" Regeln ist auch die Deklaration von Funktionen und Variablen im Body der Regelbasis erlaubt. Dies ermöglicht komplexe Bedingungen, bespw. durch das Nachschlagen in einer Lookup-Tabelle abzuprüfen. </element></elements>