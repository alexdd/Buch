<?xml version="1.0" encoding="UTF-8"?><fo:root xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xe="http://www.xes.future" font-family="Arial, ArialUnicodeMS" font-size="10pt" line-height="140%" font-weight="normal" hyphenate="false" hyphenation-push-character-count="3" hyphenation-remain-character-count="3" language=""><fo:layout-master-set><fo:simple-page-master master-name="odd-page" page-width="148mm" page-height="210mm"><fo:region-body margin-left="20mm" margin-right="20mm" margin-top="20mm" margin-bottom="20mm"/><fo:region-before region-name="xsl-region-before-odd-page" extent="20mm"/><fo:region-after region-name="xsl-region-after-odd-page" extent="15mm"/></fo:simple-page-master><fo:simple-page-master master-name="even-page" page-width="148mm" page-height="210mm"><fo:region-body margin-left="20mm" margin-right="20mm" margin-top="20mm" margin-bottom="20mm"/><fo:region-before region-name="xsl-region-before-even-page" extent="20mm"/><fo:region-after region-name="xsl-region-after-even-page" extent="15mm"/></fo:simple-page-master><fo:simple-page-master master-name="odd-page-blank" page-width="148mm" page-height="210mm"><fo:region-body margin-left="20mm" margin-right="20mm" margin-top="20mm" margin-bottom="20mm"/><fo:region-before/><fo:region-after region-name="xsl-region-after-odd-page" extent="15mm"/></fo:simple-page-master><fo:simple-page-master master-name="even-page-blank" page-width="148mm" page-height="210mm"><fo:region-body margin-left="20mm" margin-right="20mm" margin-top="20mm" margin-bottom="20mm"/><fo:region-before/><fo:region-after region-name="xsl-region-after-even-page" extent="15mm"/></fo:simple-page-master><fo:simple-page-master master-name="odd-page-twocol" page-width="148mm" page-height="210mm"><fo:region-body margin-left="20mm" margin-right="20mm" margin-top="20mm" margin-bottom="20mm" column-count="2"/><fo:region-before region-name="xsl-region-before-odd-page" extent="20mm"/><fo:region-after region-name="xsl-region-after-odd-page" extent="15mm"/></fo:simple-page-master><fo:simple-page-master master-name="even-page-twocol" page-width="148mm" page-height="210mm"><fo:region-body margin-left="20mm" margin-right="20mm" margin-top="20mm" margin-bottom="20mm" column-count="2"/><fo:region-before region-name="xsl-region-before-even-page" extent="20mm"/><fo:region-after region-name="xsl-region-after-even-page" extent="15mm"/></fo:simple-page-master><fo:simple-page-master master-name="odd-page-multicol-backcover" page-width="148mm" page-height="210mm"><fo:region-body margin-left="18mm" margin-right="18mm" margin-top="107mm" margin-bottom="107mm" column-count="3" column-gap="2.5mm"/><fo:region-before region-name="xsl-region-before-odd-page" extent="20mm"/><fo:region-after region-name="xsl-region-after-odd-page" extent="15mm"/></fo:simple-page-master><fo:simple-page-master master-name="even-page-multicol-backcover" page-width="148mm" page-height="210mm"><fo:region-body margin-left="18mm" margin-right="18mm" margin-top="107mm" margin-bottom="107mm" column-count="3" column-gap="2.5mm"/><fo:region-before region-name="xsl-region-before-even-page" extent="20mm"/><fo:region-after region-name="xsl-region-after-even-page" extent="15mm"/></fo:simple-page-master><fo:page-sequence-master master-name="page-sequence"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference odd-or-even="odd" master-reference="odd-page-blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="even-page-blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference odd-or-even="odd" master-reference="odd-page" blank-or-not-blank="not-blank"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="even-page" blank-or-not-blank="not-blank"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="twocol-page-sequence"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference odd-or-even="odd" master-reference="odd-page-blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="even-page-blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference odd-or-even="odd" master-reference="odd-page-twocol" blank-or-not-blank="not-blank"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="even-page-twocol" blank-or-not-blank="not-blank"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="multicol-page-sequence-backcover"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference odd-or-even="odd" master-reference="odd-page-blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="even-page-blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference odd-or-even="odd" master-reference="odd-page-multicol-backcover" blank-or-not-blank="not-blank"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="even-page-multicol-backcover" blank-or-not-blank="not-blank"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master></fo:layout-master-set><fo:bookmark-tree><fo:bookmark internal-destination="d4e74"><fo:bookmark-title>Intro</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e157"><fo:bookmark-title>Anwendungsgebiete</fo:bookmark-title><fo:bookmark internal-destination="d4e298"><fo:bookmark-title>XSLT - die Programmiersprache im XML Bereich</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e565"><fo:bookmark-title>Aktuelle und vergangene Anwendungen</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e1840"><fo:bookmark-title>Professionelle XML Verarbeitung</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="d4e2272"><fo:bookmark-title>Wichtige Konzepte</fo:bookmark-title><fo:bookmark internal-destination="d4e2319"><fo:bookmark-title>Push vs. Pull Stylesheets</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e2506"><fo:bookmark-title>Eindeutigkeit der Regelbasis</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e3236"><fo:bookmark-title>Namespaces</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="d4e3640"><fo:bookmark-title>Ausgewählte Themen</fo:bookmark-title><fo:bookmark internal-destination="d4e3662"><fo:bookmark-title>Transformationen mit XSLT</fo:bookmark-title><fo:bookmark internal-destination="d4e3723"><fo:bookmark-title>Vortransformationen</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e4224"><fo:bookmark-title>Vererbung</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e4460"><fo:bookmark-title>XSLT Streaming</fo:bookmark-title><fo:bookmark internal-destination="d4e4607"><fo:bookmark-title>XSLT Akkumulator</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e4865"><fo:bookmark-title>XSLT Iterator</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="d4e5374"><fo:bookmark-title>Identifikation mit generate-id()</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e5743"><fo:bookmark-title>Reguläre Ausdrücke</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e5933"><fo:bookmark-title>Webservice Calls mit doc() und unparsed-text()</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="d4e6294"><fo:bookmark-title>Abfragen mit XQuery</fo:bookmark-title><fo:bookmark internal-destination="d4e6745"><fo:bookmark-title>XQuery als Programmiersprache</fo:bookmark-title><fo:bookmark internal-destination="d4e7090"><fo:bookmark-title>Funktionen und Module</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e7348"><fo:bookmark-title>if..then..else Ausdrücke</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="d4e7667"><fo:bookmark-title>XML Datenbanken</fo:bookmark-title><fo:bookmark internal-destination="d4e7875"><fo:bookmark-title>Connector zu Marklogic in Oxygen</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e8055"><fo:bookmark-title>SQL Views in MarkLogic</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e9376"><fo:bookmark-title>Bi-Temporale Dokumente</fo:bookmark-title><fo:bookmark internal-destination="d4e10091"><fo:bookmark-title>Anlegen des Testszenarios auf der ML Konsole</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e10822"><fo:bookmark-title>Ausführen einiger Beispiel-Queries</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="d4e11144"><fo:bookmark-title>MarkLogic Tools</fo:bookmark-title><fo:bookmark internal-destination="d4e11184"><fo:bookmark-title>mlproj - Project and Environment Manager</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e11200"><fo:bookmark-title>EXPath Konsole</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e11293"><fo:bookmark-title>mlcp - Content Pump</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="d4e11310"><fo:bookmark-title>Testing</fo:bookmark-title><fo:bookmark internal-destination="d4e11324"><fo:bookmark-title>Validierung mit Schematron</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e11823"><fo:bookmark-title>Erste Schritte mit Xspec</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="d4e12138"><fo:bookmark-title>Zusätzliches Know-How</fo:bookmark-title><fo:bookmark internal-destination="d4e12160"><fo:bookmark-title>GIT Einmaleins</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e12205"><fo:bookmark-title>XML Editoren</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="glossary"><fo:bookmark-title>Glossar</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d4e12828"><fo:bookmark-title>Tektur CCMS</fo:bookmark-title></fo:bookmark></fo:bookmark-tree>
   Entwicklerhandbuch
   <fo:page-sequence master-reference="page-sequence" force-page-count="auto"><fo:flow flow-name="xsl-region-body"><fo:block-container position="fixed" left="0mm" top="0mm" width="10mm" height="210mm" background-color="#D9D9D9"><fo:block/></fo:block-container><fo:block-container position="fixed" bottom="208mm" right="15mm" display-align="after" text-align="right" space-after="30pt"><fo:block><fo:external-graphic content-width="80mm" src="././client/data/6478ddd6-a447-4a5d-a467-1d3820bf7049/cover.png"/></fo:block></fo:block-container><fo:block-container position="fixed" top="120mm" right="15mm" text-align="right"><fo:block font-size="30pt" font-weight="bold" space-after="24pt" line-height="120%" hyphenate="false" color="#666">Entwicklerhandbuch</fo:block><fo:block font-size="24pt" line-height="120%" space-after="24pt" hyphenate="false">XML Hands On</fo:block><fo:block font-size="17pt" line-height="100%" space-after="6pt" hyphenate="false">XSLT - XQuery - MarkLogic</fo:block></fo:block-container></fo:flow></fo:page-sequence>
   <fo:page-sequence master-reference="page-sequence" force-page-count="auto"><fo:flow flow-name="xsl-region-body"><fo:block id="d4e74" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="16pt" provisional-distance-between-starts="12mm" space-after="8pt" font-weight="bold" hyphenate="false" line-height="140%">
            Intro
         </fo:block>
         <fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/c15a8d5c-03bc-4ee9-a04a-a123e0ce5d88/dita-logo.jpg" content-height="" content-width="auto"/></fo:block></fo:block>
      
         <fo:block space-after="6pt">Dieses Buch wurde mit Tektur CCMS erstellt. Tektur ist ein einfach zu bedienender kollaborativer Editor um DITA<fo:footnote><fo:inline id="fnsource-d4e94" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e94">1)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e94" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e94">1)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/Darwin_Information_Typing_Architecture</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> Inhalte erstellen, als PDF ausgeben und pflegen zu können. Die Eingabe erfolgt dabei per WYSIWYG<fo:footnote><fo:inline id="fnsource-d4e103" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e103">2)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e103" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e103">2)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/WYSIWYG</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> mit geführter Benutzerinteraktion. Die Inhalte werden als einzelne Topics verwaltet, die in verschiedenen Maps referenziert werden können; Stichwort: Topic Based Authoring<fo:footnote><fo:inline id="fnsource-d4e112" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e112">3)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e112" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e112">3)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://en.wikipedia.org/wiki/Topic-based_authoring</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>.</fo:block>
      
         <fo:block space-after="6pt">Sonstige Features: Rechte- und Rollensystem, Versionskontrolle, konfigurerierbarer Workflow mit Review &amp; Approval Fuktionen. Auf dem Entwicklerblog<fo:footnote><fo:inline id="fnsource-d4e127" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e127">4)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e127" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e127">4)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://www.tekturcms.de</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> kann man sich über den Fortschritt informieren.</fo:block>
      
         <fo:block space-after="6pt" keep-together.within-page="10" font-style="italic" background-color="white" border-top="none" border-bottom="none" margin="0mm" padding-top="1mm" padding-bottom="1mm" padding-left="1mm"><fo:list-block start-indent="0mm" space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label start-indent="2mm"><fo:block color="#808080">►</fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">Dieses Buch ist <fo:inline font-weight="bold">WORK IN PROGRESS</fo:inline> und dient in erster Linie als Test für Tektur CCMS. Der Feinschliff kommt noch! Momentan schreibe ich alles was mir irgendwie interessant erscheint - je nach zeitlicher Möglichkeit mehr oder weniger umfangreich - auf und binde die Topics in eine Map ein, um ein PDF erzeugen zu können.</fo:block>
                  <fo:block space-after="6pt">Wie schliesslich Struktur und Inhalt genau aussehen sollen, werde ich mir zu einem späteren Zeitpunkt noch genau überlegen :-]</fo:block>
               </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/></fo:block>
      </fo:block><fo:block id="d4e157" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="16pt" provisional-distance-between-starts="12mm" space-after="8pt" font-weight="bold" hyphenate="false" line-height="140%">
            Anwendungsgebiete
         </fo:block><fo:block space-after="8pt"><fo:block font-weight="bold" line-height="130%" text-align="left" hyphenate="false" keep-with-next.within-page="40" space-after="6pt" font-size="11pt">Kapitelinhalt</fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="0mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e298">
               XSLT - die Programmiersprache im XML Bereich
            <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e298"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" keep-with-previous="always" space-before="4pt"><fo:list-block><fo:list-item start-indent="0mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e565">
               Aktuelle und vergangene Anwendungen 
            <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e565"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" keep-with-previous="always" space-before="4pt"><fo:list-block><fo:list-item start-indent="0mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e1840">
               Professionelle XML Verarbeitung
            <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e1840"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block>
         <fo:block space-after="6pt">
               <fo:inline font-weight="bold">XML,</fo:inline>
               <fo:inline font-weight="bold">XSLT</fo:inline>, <fo:inline font-weight="bold">XPATH</fo:inline>, <fo:inline font-weight="bold">XSL-FO</fo:inline> und <fo:inline font-weight="bold">XQuery</fo:inline> sind Techniken um baumstrukturierte Daten - im Vergleich zu relationalen Daten - aus verschiedenen Quellen ineinader zu überführen, abzuspeichern, zu versenden, darzustellen und auszuwerten können.</fo:block>
      
         <fo:block space-after="6pt">Vom Aussehen her sind XML Daten im Prinzip Textdaten. Sie können sehr einfach mit einem Texteditor erstellt werden. Im Gegensatz zu Multimedia-Daten sind keine komplexen Tools, wie z.B. ein Grafikeditor, erforderlich.</fo:block>
      
         <fo:block space-after="6pt" hyphenate="false">Auch relationale Daten können in Form von Tabellen, als Excel Tabelle, oder bspw. als kommaseparierte Textdatei, aus einem System ausgespult und weiterverarbeitet werden. XML erlaubt es jedoch die Daten semantisch auszuzeichnen. Das geschieht durch das Klammern semantisch zusammengehöriger Elemente mittels Klammer-Tags 
               <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">&lt;tag&gt;Inhalt&lt;/tag&gt;</fo:inline>
               </fo:inline>
            und Kategorisierung dieser Informationseinheiten mittels weiterer Properties (Attribute) an diesen Tags. </fo:block>
      
         <fo:block space-after="6pt">Durch das Verschachteln dieser geklammerten Komponenten entsteht ein Baum, der die Hierarchische Ordnung der Daten widerspiegelt.</fo:block>
      
         <fo:block space-after="6pt">Diese Baumstrukturen sind maschinell lesbar und die Daten können, bevor sie von einem Versender zu einem Empfänger gehen, mittels eines automatischen Prozesses validiert werden. Dabei können sowohl der Inhalt als auch die Syntax anhand von definierten Regeln (Schemas) genau überprüft werden.</fo:block>
      
         <fo:block space-after="6pt">Der XML Standard ist mittlerweile 20 Jahre alt. Zuvor gab es SGML, das zum Beispiel auch nicht abgeschlossene Tags erlaubte.</fo:block>
      
         <fo:block space-after="6pt">Der Übergang von SGML zu XML brachte eine konzeptionelle Vereinfachung, noch simpler ist JSON als Standard, der gerne im Webbereich eingesetzt wird. JSON ist jedoch nicht so gut maschinenlesbar und es fehlen noch viele Werkzeuge, wie ausgefeiltere Code Editoren oder Validierungstools.</fo:block>
      
         <fo:block space-after="6pt">Folgend eine kurze Erläuterung zu den eingangs erwähnten Schlüsselwörtern:</fo:block>
      
         <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">
                     <fo:inline font-weight="bold">XML</fo:inline> ist das Datenformat. Auf XML arbeiten die anderen Technologien. XML ist immer Input für diese Tools.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">
                     <fo:inline font-weight="bold">XSLT</fo:inline> ist eine Programmiersprache und damit kann man eine XML Instanz in eine andere transformieren, d.h. Inhalt und Struktur anpassen.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">
                     <fo:inline font-weight="bold">XPATH</fo:inline> erlaubt es, bestimmte Knoten in einem XML Dokument über bedingte Pfadausdrücke zu selektieren und dann mittels XSLT zu verändern.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">
                     <fo:inline font-weight="bold">XSL-FO</fo:inline> ist eine weitere XML basierte Auszeichnungssprache, die ein XSL-FO Prozessor einlesen kann, um daraus z.B. ein PDF zu generieren.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">
                     <fo:inline font-weight="bold">XQuery</fo:inline> ist eine Abfragesprache ählich zu SQL, jedoch werden damit nicht relationale Daten abgefragt sondern baumstrukturierte.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
      
         <fo:block space-after="6pt">
            
         </fo:block>
      <fo:block id="d4e298" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="14pt" provisional-distance-between-starts="10mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
               XSLT - die Programmiersprache im XML Bereich
            </fo:block>
            <fo:block space-after="6pt">
                  <fo:inline font-weight="bold">XSLT</fo:inline> ist im Bereich XML ganz gross, ausserhalb kennt man sie kaum. Im TIOBE Index<fo:footnote><fo:inline id="fnsource-d4e313" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e313">5)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e313" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e313">5)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/TIOBE-Index</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> von 2003 rangierte XSLT einmal auf Platz 60 an letzter Stelle der Liste<fo:footnote><fo:inline id="fnsource-d4e322" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e322">6)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e322" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e322">6)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://bit.ly/2ARgKCJ</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>.</fo:block>
         
            <fo:block space-after="6pt">Im Bereich <fo:inline font-weight="bold">XML</fo:inline> würde aber ohne <fo:inline font-weight="bold">XSLT</fo:inline> nicht viel gehen. Es gibt einige exotische Anwendungsgebiete in denen XML effizient 
mit <fo:inline font-weight="bold">LISP</fo:inline> Dialekten verarbeitet wird, bspw. die Verarbeitung von - nach <fo:inline font-weight="bold">XML</fo:inline> konvertierten - EDI X12<fo:footnote><fo:inline id="fnsource-d4e349" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e349">7)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e349" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e349">7)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://en.wikipedia.org/wiki/ASC_X12</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> Nachrichten.</fo:block>
         
            <fo:block space-after="6pt">Auch im Bereich Publishing in der Luftfahrt hat sich <fo:inline font-weight="bold">SGML</fo:inline> als Vorreiter von <fo:inline font-weight="bold">XML</fo:inline> im S1000D Standard<fo:footnote><fo:inline id="fnsource-d4e370" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e370">8)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e370" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e370">8)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://en.wikipedia.org/wiki/S1000D</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> wacker gehalten. Hier wird teilweise noch mit proprietären Programmiersprachen, wie <fo:inline font-weight="bold">Metamorphosis</fo:inline>, gearbeitet.</fo:block>
         
            <fo:block space-after="6pt">Alternativen zu <fo:inline font-weight="bold">XSLT</fo:inline> finden sich im entsprechendem Wikipedia-Artikel<fo:footnote><fo:inline id="fnsource-d4e391" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e391">9)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e391" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e391">9)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/XSL_Transformation</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>.</fo:block>
         
            <fo:block space-after="6pt">Wir konzentrieren uns im Rahmen dieser Lektüre auf<fo:inline font-weight="bold"> XSLT</fo:inline> und <fo:inline font-weight="bold">XSL Stylesheets</fo:inline> - damit wird i.A. die Verbindung von <fo:inline font-weight="bold">XSLT</fo:inline>, <fo:inline font-weight="bold">XSL-FO</fo:inline> und <fo:inline font-weight="bold">XPath</fo:inline> gemeint, um damit <fo:inline font-weight="bold">XML</fo:inline> Daten in andere Formate zu überführen, bspw. <fo:inline font-weight="bold">PDF</fo:inline>.</fo:block>
         
            <fo:block space-after="6pt">Die Autohandbücher führender Hersteller werde, mittels <fo:inline font-weight="bold">XSL</fo:inline> gesetzt, deren Eingabedaten aufbereitet und zur Weiterverarbeitung transformiert. Ein paar interessante Stichpunkte:</fo:block>
         
            <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">
                        <fo:inline font-weight="bold">XSLT </fo:inline>hat gerade noch den Status "Programmiersprache", weil man damit eine Turing Maschine<fo:footnote><fo:inline id="fnsource-d4e451" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e451">10)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e451" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e451">10)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://www.unidex.com/turing/utm.htm</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> programmieren kann.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Mit <fo:inline font-weight="bold">HTML</fo:inline> oder einer Templater Sprache (z.B. <fo:inline font-weight="bold">JSP</fo:inline>) würde das nicht funktionieren.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">
                        <fo:inline font-weight="bold">XSLT</fo:inline> ist keine imperative Sprache, d.h es werden keine Anweisungen der Reihe nach abgearbeitet, sondern eine deklarative Sprache, d.h für jedes Ereignis - besser gesagt - für jeden durchlaufenen DOM Knoten wird eine gefundene und vom Programmierer deklarierte Regel angewendet.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Ausserdem gibt es funktionale Anteile, um bspw. die deklarierten Regeln rekursiv anwenden zu können und größere Programme zu struktur.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">
                        <fo:inline font-weight="bold">XSLT</fo:inline> wird oft mit <fo:inline font-weight="bold">XSL</fo:inline> gleichgesetzt. Aber XSL<fo:footnote><fo:inline id="fnsource-d4e499" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e499">11)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e499" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e499">11)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/XSL_Transformation</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> ist mehr:</fo:block>
                     <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="6mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="12mm"><fo:block>
                           <fo:block space-after="6pt">Zum einen kommt noch <fo:inline font-weight="bold">XPath</fo:inline> hinzu: <fo:inline font-weight="bold">XPath</fo:inline> erlaubt komplizierte Berechnungen und Selektionen auf den <fo:inline font-weight="bold">DOM</fo:inline> Knoten eines XML Dokuments.</fo:block>
                        </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="6mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="12mm"><fo:block>
                           <fo:block space-after="6pt">Zum anderen ist auch <fo:inline font-weight="bold">XSL-FO</fo:inline> Bestandteil der XSL Spezifikation<fo:footnote><fo:inline id="fnsource-d4e533" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e533">12)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e533" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e533">12)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.w3.org/TR/xsl/</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>. <fo:inline font-weight="bold">XSL-FO</fo:inline> Tags sind Anweisungen für einen <fo:inline font-weight="bold">XSL-FO</fo:inline> Prozessor, der aus einem <fo:inline font-weight="bold">XSL-FO</fo:inline> Dokument ein <fo:inline font-weight="bold">PDF</fo:inline> Dokument generiert. Es sind auch andere Ausgabe-Formate, wie bspw. <fo:inline font-weight="bold">RTF</fo:inline> möglich.</fo:block>
                        </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
         </fo:block><fo:block id="d4e565" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="14pt" provisional-distance-between-starts="10mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
               Aktuelle und vergangene Anwendungen 
            </fo:block>
            <fo:block space-after="6pt">Wie auch bei anderen Programmiersprachen, hat es einige Zeit gedauert bis sich für XSLT der optimale Anwendungsbereich herauskristallisiert hat. Auch bei XSLT war ursprünglich das Internet und insbesondere Webseitenprogrammierung die treibende Kraft, weil meinte, mittels XSLT besonders gut Inhalt und Semantik trennen zu können. </fo:block>
         
            <fo:block space-after="6pt">Relativ schnell hat sich aber <fo:inline font-weight="bold">CSS</fo:inline> in Verbindung mit <fo:inline font-weight="bold">JavaScript</fo:inline> als Standardlösung für diese Zecke bewährt. <fo:inline font-weight="bold">XSLT</fo:inline> ist inzwischen Platzhirsch im Bereich <fo:inline font-weight="bold">Technische Dokumentation</fo:inline> und hier auch wohl unschlagbar.</fo:block>
         
            <fo:block space-after="6pt">Einen XSLT Prozessor hat jeder Browser eingebaut. Es gab mal eine Zeit, in der es sehr populär war, Webseiten vom Server als XML auszuliefern<fo:inline id="d4e607" color="white" font-size="0pt" visibility="hidden">.</fo:inline>. XML erlaubt die semantische Auszeichung des Inhalts, und die strikte Trennung des Inhalts von Layout und Design. Wesentlich besser als dies mit HTML und CSS jemals möglich wäre. U.a. wegen des exzessiven Einsatzes von JavaScript (auch inline), hat sich diese Idee nie vollständig durchgesetzt. Schliesslich wurde <fo:inline font-weight="bold">XHTML</fo:inline> spezifiziert und jetzt gibt es <fo:inline font-weight="bold">HTML5</fo:inline>.</fo:block>
         
            <fo:block space-after="6pt">Betrachten wir das folgende XML Beispiel:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;?xml</fo:inline> version="1.0" encoding="UTF-8"?<fo:inline color="#527F3F">&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;document&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;title&gt;</fo:inline>Das ultimative Zwei-Kapitel Dokument<fo:inline color="#527F3F">&lt;/title&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;chapter&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;title&gt;</fo:inline>Kapitel 1<fo:inline color="#527F3F">&lt;/title&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;intro&gt;</fo:inline>In Kapitel 1 wird kurz gesagt was Sache ist.<fo:inline color="#527F3F">&lt;/intro&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;content&gt;</fo:inline>Um es kurz zu machen, wie der Hase läuft steht<fo:inline color="#7F3300">in </fo:inline>Kapitel 2.<fo:inline color="#527F3F">&lt;/content&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/chapter&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;chapter&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;title&gt;</fo:inline>Kapitel 2<fo:inline color="#527F3F">&lt;/title&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;intro&gt;</fo:inline>Hier wird erklärt, wie der Hase läuft.<fo:inline color="#527F3F">&lt;/intro&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;content&gt;</fo:inline>Im Prinzip ist es ganz einfach.<fo:inline color="#527F3F">&lt;/content&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/chapter&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/document&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt">Ohne XSLT Stylesheet Zuweisung wird der Browser eine Datei mit diesem Inhalt als eingerücktes XML anzeigen - oder die Tags einfach ignorieren und den Textinhalt in einer Zeile darstellen. Fügt man eine Processing Instruction<fo:footnote><fo:inline id="fnsource-d4e711" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e711">13)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e711" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e711">13)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/Verarbeitungsanweisung</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
               <fo:inline id="d4e720" color="white" font-size="0pt" visibility="hidden">.</fo:inline> am Anfang ein, wird ein XSLT Stylesheet vom Browser herangezogen und vor der Darstellung im Browser wird die so deklarierte XML Transformation ausgeführt:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;?xml</fo:inline> version="1.0" encoding="UTF-8"?<fo:inline color="#527F3F">&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;?xml-stylesheet</fo:inline> type="text/xsl" href="formatiermich.xsl" ?<fo:inline color="#527F3F">&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;document&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;title&gt;</fo:inline>Das ultimative Zwei-Kapitel Dokument<fo:inline color="#527F3F">&lt;/title&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;chapter&gt;</fo:inline>
[...]</fo:block>
         
            <fo:block space-after="6pt">Das XML kann nun im Browser geöffnet werden und alles wird schön formatiert angezeigt...</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;?xml</fo:inline> version="1.0" encoding="iso-8859-1"?<fo:inline color="#527F3F">&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;xsl:stylesheet</fo:inline> version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"<fo:inline color="#527F3F">&gt;</fo:inline>

  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="/"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;html&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/html&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>

  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="document"<fo:inline color="#527F3F">&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;body&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/body&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>

  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="document/title"<fo:inline color="#527F3F">&gt;</fo:inline>     
    <fo:inline color="#527F3F">&lt;h1&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/h1&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>

  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="chapter"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;div</fo:inline> class="chapter"<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/div&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>

  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="chapter/title"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;h2&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/h2&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>

  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="chapter/intro"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;div</fo:inline> class="intro"<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;i&gt;</fo:inline><fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline><fo:inline color="#527F3F">&lt;/i&gt;</fo:inline>      
    <fo:inline color="#527F3F">&lt;/div&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>

  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="chapter/content"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;p&gt;</fo:inline><fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline><fo:inline color="#527F3F">&lt;/p&gt;</fo:inline>    
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:stylesheet&gt;</fo:inline>
</fo:block>
         
            <fo:block space-after="6pt">Die <fo:inline font-weight="bold">Processing Instruction</fo:inline> hat keinen Einfluss auf den XML Inhalt und wird in einer anderen Eingabeverarbeitung nicht herangezogen.</fo:block>
         
            <fo:block space-after="6pt">Auch eine serverseitige Konvertierung<fo:inline id="d4e949" color="white" font-size="0pt" visibility="hidden">.</fo:inline> ist gebräuchlich. Ein Beispiel aus vergangenen Tagen - WAP-Seiten<fo:footnote><fo:inline id="fnsource-d4e958" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e958">14)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e958" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e958">14)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/Wireless_Application_Protocol</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> für unterschiedliche Handy-Modelle.</fo:block>
         
            <fo:block space-after="6pt">Früher hatten die Handys sehr unterschiedliche Displaygrößen. Handybrowser konnten nicht ausreichend JavaScript und die Skalierung der WAP-Seite für das jeweilige Handy passierte nicht im Handy, sondern vor der Auslieferung auf der Serverseite. Dazu wurde eine XML Quelle mittels verschiedener XSLT Stylesheets in unterschiedliche WML WAP Repräsentationen transformiert.</fo:block>
         
            <fo:block space-after="6pt">So würde das Zwei-Kapitel Beispiel von oben im WML Format aussehen (recht einfach gehalten):</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;?xml</fo:inline> version="1.0" encoding="UTF-8"?<fo:inline color="#527F3F">&gt;</fo:inline>
&lt;!DOCTYPE wml PUBLIC "-//WAPFORUM//DTD WML 1.1//EN" "http://www.wap.org/DTD/wml_1.1.xml"&gt;
<fo:inline color="#527F3F">&lt;wml&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;head&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;meta</fo:inline> name="title" content="Das ultimative Zwei-Kapitel Dokument"<fo:inline color="#527F3F">/&gt;</fo:inline>   
  <fo:inline color="#527F3F">&lt;/head&gt;</fo:inline> 
  <fo:inline color="#527F3F">&lt;card</fo:inline> id="chapter1" title="Kapitel 1"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;p&gt;</fo:inline><fo:inline color="#527F3F">&lt;i&gt;</fo:inline>In Kapitel 1 wird kurz gesagt was Sache ist.<fo:inline color="#527F3F">&lt;/i&gt;</fo:inline><fo:inline color="#527F3F">&lt;/p&gt;</fo:inline>        
    <fo:inline color="#527F3F">&lt;p&gt;</fo:inline>Um es kurz zu machen, wie der Hase läuft steht<fo:inline color="#7F3300">in </fo:inline>Kapitel 2.<fo:inline color="#527F3F">&lt;/p&gt;</fo:inline>  
  <fo:inline color="#527F3F">&lt;/card&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;card</fo:inline> id="chapter2" title="Kapitel 2"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;p&gt;</fo:inline><fo:inline color="#527F3F">&lt;i&gt;</fo:inline>Hier wird erklärt, wie der Hase läuft.<fo:inline color="#527F3F">&lt;/i&gt;</fo:inline><fo:inline color="#527F3F">&lt;/p&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;p&gt;</fo:inline>Im Prinzip ist es ganz einfach.<fo:inline color="#527F3F">&lt;/p&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/card&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/wml&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt">Eine XSLT Transformation, die die XML Daten von oben in diese <fo:inline font-weight="bold">WML</fo:inline> Darstellung überführt, könnte z.B. so implementiert werden:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;?xml</fo:inline> version="1.0" encoding="UTF-8"?<fo:inline color="#527F3F">&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;xsl:stylesheet</fo:inline> xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"<fo:inline color="#527F3F">&gt;</fo:inline>

  <fo:inline color="#527F3F">&lt;xsl:output
</fo:inline>    doctype-public="-//WAPFORUM//DTD WML 1.2//EN" 
    doctype-system="http://www.wapforum.org/DTD/wml12.dtd"
    indent="yes"<fo:inline color="#527F3F">/&gt;</fo:inline>
    
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="document"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;wml&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/wml&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
    
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="document/title"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;head&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;meta</fo:inline> name="title"<fo:inline color="#527F3F">&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;xsl:attribute</fo:inline> name="content"<fo:inline color="#527F3F">&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="."<fo:inline color="#527F3F">/&gt;</fo:inline>               
        <fo:inline color="#527F3F">&lt;/xsl:attribute&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/meta&gt;</fo:inline>      
    <fo:inline color="#527F3F">&lt;/head&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
    
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="chapter"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;card</fo:inline> id="{concat('chapter',count(preceding-sibling::chapter)+1)}"<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:attribute</fo:inline> name="title"<fo:inline color="#527F3F">&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="title"<fo:inline color="#527F3F">/&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/xsl:attribute&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="*[not(self::title)]"<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/card&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="node()|@*"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:copy&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="node()|@*"<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/xsl:copy&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="processing-instruction()"<fo:inline color="#527F3F">/&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="intro"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;p&gt;</fo:inline><fo:inline color="#527F3F">&lt;i&gt;</fo:inline><fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline><fo:inline color="#527F3F">&lt;/i&gt;</fo:inline><fo:inline color="#527F3F">&lt;/p&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="content"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;p&gt;</fo:inline><fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline><fo:inline color="#527F3F">&lt;/p&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:stylesheet&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt">Aus einer XML Quelle können auch leicht weitere Format erzeugt werden, bspw. . EPUB<fo:footnote><fo:inline id="fnsource-d4e1279" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e1279">15)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e1279" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e1279">15)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/EPUB</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> ist das Standardformat für eBooks. Neben Tags zur Formatierung für den Content, gibt es bspw. auch Anweisungen zum Erzeugen des Inhaltsverzeichnisses oder anderer Navigationsstrukturen.</fo:block>
         
            <fo:block space-after="6pt">Weitere gängige Formate sind neben dem oben veralteten WML Format, elektronische Ausgabe-Formate wie: CHM<fo:footnote><fo:inline id="fnsource-d4e1294" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e1294">16)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e1294" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e1294">16)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/CHM_(Dateiformat</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>, EclipseHelp<fo:footnote><fo:inline id="fnsource-d4e1303" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e1303">17)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e1303" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e1303">17)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.ibm.com/developerworks/library/os-echelp/index.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>, JavaHelp<fo:footnote><fo:inline id="fnsource-d4e1312" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e1312">18)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e1312" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e1312">18)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://en.wikipedia.org/wiki/JavaHelp</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>, ..., Print-Ausgabe Formate, wie PDF oder Adobe Framemaker<fo:footnote><fo:inline id="fnsource-d4e1321" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e1321">19)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e1321" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e1321">19)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/FrameMaker</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>,oder XML Standard Austauschformate, wie <fo:inline font-weight="bold">DITA</fo:inline>, <fo:inline font-weight="bold">S1000D</fo:inline>, PI-MOD<fo:footnote><fo:inline id="fnsource-d4e1337" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e1337">20)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e1337" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e1337">20)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.i4icm.de/forschungstransfer/pi-mod/</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>, JATS<fo:footnote><fo:inline id="fnsource-d4e1346" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e1346">21)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e1346" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e1346">21)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/Journal_Article_Tag_Suite</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
               <fo:inline id="d4e1355" color="white" font-size="0pt" visibility="hidden">.</fo:inline> oder TEI<fo:footnote><fo:inline id="fnsource-d4e1364" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e1364">22)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e1364" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e1364">22)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/Text_Encoding_Initiative</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
               <fo:inline id="d4e1373" color="white" font-size="0pt" visibility="hidden">.</fo:inline>.</fo:block>
         
            <fo:block space-after="6pt">Kryptische XML Log-, Daten- oder Konfigurationsfiles<fo:inline id="d4e1395" color="white" font-size="0pt" visibility="hidden">.</fo:inline> können leicht mit XSLT menschenlesbar formatiert werden. Ein Arbeitskollege im neuen Job kam kürzlich auf mich zu, ob ich um eine Möglichkeit wüsste, wie man sein kryptisches Datenfile für einen Übersetzungsdienst formatieren könnte:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;?xml</fo:inline> version="1.0" encoding="UTF-8"?<fo:inline color="#527F3F">&gt;</fo:inline>?<fo:inline color="#527F3F">&lt;?xml-stylesheet</fo:inline> type="text/xsl" href="de.xsl"?<fo:inline color="#527F3F">&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;jcr:root</fo:inline> xmlns:sling="http://sling.apache.org/jcr/sling/1.0"
  xmlns:jcr="http://www.jcp.org/jcr/1.0" 
  xmlns:mix="http://www.jcp.org/jcr/mix/1.0"
  xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
  jcr:language="de"
  jcr:mixinTypes="[mix:language]"
  jcr:primaryType="sling:Folder"<fo:inline color="#527F3F">&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;b_manual</fo:inline> 
  jcr:primaryType="sling:MessageEntry"
  sling:message="Bedienungsanleitung"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;b_warning
</fo:inline>    jcr:primaryType="sling:MessageEntry"
    sling:message="Warnung"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;b_danger
</fo:inline>    jcr:primaryType="sling:MessageEntry"
    sling:message="Vorsicht"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;b_note
</fo:inline>    jcr:primaryType="sling:MessageEntry"
    sling:message="Notiz"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;b_notice
</fo:inline>    jcr:primaryType="sling:MessageEntry"
    sling:message="Hinweis"<fo:inline color="#527F3F">/&gt;</fo:inline>
  [...]</fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">Mit einem eingehängten XSLT Stylesheet<fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">de.xsl</fo:inline>
               </fo:inline> wird so ein Datenfile als Tabelle formatiert:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;?xml</fo:inline> version="1.0" encoding="iso-8859-1"?<fo:inline color="#527F3F">&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;xsl:stylesheet</fo:inline> version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:jcr="http://www.jcp.org/jcr/1.0"
  xmlns:sling="http://sling.apache.org/jcr/sling/1.0"<fo:inline color="#527F3F">&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="jcr:root"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;html&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;table</fo:inline> border="1" cellpadding="5" cellspacing="5"<fo:inline color="#527F3F">&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/table&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/html&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="*"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;tr&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;td&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(count(preceding::*[@sling:message]) + 1,'.')"<fo:inline color="#527F3F">/&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/td&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;td&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="name()"<fo:inline color="#527F3F">/&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/td&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;td</fo:inline> contenteditable="true"<fo:inline color="#527F3F">&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="@sling:message"<fo:inline color="#527F3F">/&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/td&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/tr&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:stylesheet&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">Hängt man an dieses Beispiel noch ein bisschen JavaScript Logik und macht die Felder für die Übersetzungen mittels des <fo:inline font-weight="bold">HTML5 </fo:inline>
               <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">contenteditable</fo:inline>
               </fo:inline> Attributs<fo:inline id="d4e1591" color="white" font-size="0pt" visibility="hidden">.</fo:inline> editierbar, dann bräuchte man nur noch eine Rücktransformation HTML nach XML und hätte schon einen kleinen XML Editor gebaut. So funktioniert auch der Editor in .</fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">Nachdem eine <fo:inline font-weight="bold">SVG</fo:inline>
               <fo:inline id="d4e1616" color="white" font-size="0pt" visibility="hidden">.</fo:inline> Grafik<fo:inline id="d4e1625" color="white" font-size="0pt" visibility="hidden">.</fo:inline> im <fo:inline font-weight="bold">XML</fo:inline> Format vorliegt kann diese auch direkt aus XML Daten mittels XSLT erzeugt werden. Über das HTML5<fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">&lt;svg&gt;</fo:inline>
               </fo:inline> Element kann so eine erzeugte Grafik inline in das ebenfalls durch das XSLT generierte HTML Dokument eingebunden werden.</fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">Betrachten wir unser Beispiel von oben, erweitert um drei neue <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">&lt;block&gt;</fo:inline>
               </fo:inline> Elemente:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;?xml</fo:inline> version="1.0" encoding="UTF-8"?<fo:inline color="#527F3F">&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;?xml-stylesheet</fo:inline> type="text/xsl" href="chart.xsl" ?<fo:inline color="#527F3F">&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;document&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;title&gt;</fo:inline>Das ultimative Zwei-Kapitel Dokument<fo:inline color="#527F3F">&lt;/title&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;chapter&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;title&gt;</fo:inline>Kapitel 1<fo:inline color="#527F3F">&lt;/title&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;intro&gt;</fo:inline>In Kapitel 1 wird kurz gesagt was Sache ist.<fo:inline color="#527F3F">&lt;/intro&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;content&gt;</fo:inline>Um es kurz zu machen, wie der Hase läuft steht<fo:inline color="#7F3300">in </fo:inline>Kapitel 2.<fo:inline color="#527F3F">&lt;/content&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/chapter&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;chapter&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;title&gt;</fo:inline>Kapitel 2<fo:inline color="#527F3F">&lt;/title&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;intro&gt;</fo:inline>Hier wird erklärt, wie der Hase läuft.<fo:inline color="#527F3F">&lt;/intro&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;content&gt;</fo:inline>Im Prinzip ist es ganz einfach. Betrachten wir doch drei gelbe Blöcke:
    <fo:inline color="#527F3F">&lt;/content&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;block/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;block/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;block/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/chapter&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/document&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">Wenn wir das XSLT Stylesheet noch um eine Regel für das neue <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">&lt;block&gt;</fo:inline>
               </fo:inline> Element ergänzen, so wie hier:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="block"<fo:inline color="#527F3F">&gt;</fo:inline>
   <fo:inline color="#527F3F">&lt;svg</fo:inline> style="background-color:yellow" width="30" height="30" 
     xmlns:xlink="http://www.w3.org/1999/xlink" 
     xmlns="http://www.w3.org/2000/svg"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;br/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;br/&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt">Dann erhalten wir drei schön formatierte gelbe SVG Blöcke ...</fo:block>
         
            <fo:block space-after="6pt">
                  <fo:inline font-weight="bold">Weiterführende Links:</fo:inline>
               </fo:block>
         
            <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Client-side image generation with SVG and XSLT<fo:footnote><fo:inline id="fnsource-d4e1811" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e1811">23)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e1811" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e1811">23)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://surguy.net/articles/client-side-svg.xml</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                  </fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Knotentyp Visualisierung im Apache Jack Rabbit Projekt<fo:footnote><fo:inline id="fnsource-d4e1826" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e1826">24)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e1826" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e1826">24)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://jackrabbit.apache.org/jcr/node-type-visualization.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                  </fo:block>
                  </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
         </fo:block><fo:block id="d4e1840" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="14pt" provisional-distance-between-starts="10mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
               Professionelle XML Verarbeitung
            </fo:block>
            <fo:block space-after="6pt" hyphenate="false">Vom Single-Source Publishing bis zur Generierung von Java Code aus Klassendiagrammen. <fo:inline font-weight="bold">XSLT</fo:inline> ist in vielen großen Softwareprojekten vertreten. Heute liefert eine Suche nach <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">&lt;xsl:stylesheet</fo:inline>
               </fo:inline> bspw. 14.868.501 Treffer.<fo:footnote><fo:inline id="fnsource-d4e1861" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e1861">25)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e1861" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e1861">25)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://github.com/search?q=xsl%3Astylesheet&amp;type=Code</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
            </fo:block>
         
            <fo:block space-after="6pt">Aus einer Quelle werden viele Ausgabe Formate generiert. Gängige Formate in der Technischen Dokumentation sind elektronische Ausgabe-Formate wie: <fo:inline font-weight="bold">CHM</fo:inline>, <fo:inline font-weight="bold">EclipseHelp</fo:inline>, <fo:inline font-weight="bold">JavaHelp</fo:inline>, <fo:inline font-weight="bold">ePub</fo:inline>, ..., Print-Ausgabe Formate, wie <fo:inline font-weight="bold">PDF</fo:inline> oder <fo:inline font-weight="bold">Adobe Framemaker</fo:inline>, oder <fo:inline font-weight="bold">XML</fo:inline> Standard Austauschformate, wie <fo:inline font-weight="bold">DITA</fo:inline>, <fo:inline font-weight="bold">S1000D</fo:inline>, <fo:inline font-weight="bold">PI-MOD</fo:inline>
               <fo:inline id="d4e1913" color="white" font-size="0pt" visibility="hidden">.</fo:inline> oder <fo:inline font-weight="bold">TEI</fo:inline>
               <fo:inline id="d4e1926" color="white" font-size="0pt" visibility="hidden">.</fo:inline>.
Vorteile:</fo:block>
         
            <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Bei einer Änderung in der XML Quelle werden auch automatisch alle anschließenden Formate aktualisiert.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Strikte Trennung von Content/Semantik und Layout/Design.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Auf der <fo:inline font-weight="bold">XML</fo:inline> Quelle sind <fo:inline font-weight="bold">XML</fo:inline> Features möglich, wie:
	
		<fo:inline font-weight="bold">Modularisierung</fo:inline>: Erlaubt die fein-granulare <fo:inline font-weight="bold">Wiederverwendung</fo:inline>
                     <fo:inline id="d4e1969" color="white" font-size="0pt" visibility="hidden">.</fo:inline> von Content-Bausteinen, sowie das Verlinken, Filtern, Suchen und Exportieren derselben.
		<fo:inline font-weight="bold">Generalisierung</fo:inline>
                     <fo:inline id="d4e1982" color="white" font-size="0pt" visibility="hidden">.</fo:inline> ist ein <fo:inline font-weight="bold">DITA</fo:inline> Konzept, welches die Wiederverendung von angepassten Topics in anderen <fo:inline font-weight="bold">DITA</fo:inline> Systemen ermöglicht.
		<fo:inline font-weight="bold">Gültigkeiten</fo:inline>
                     <fo:inline id="d4e2000" color="white" font-size="0pt" visibility="hidden">.</fo:inline> erlauben die bedingte Anwendung von Content-Bestandteilen auf Satz und Wort-Ebene.
		<fo:inline font-weight="bold">Versionierung</fo:inline>
                     <fo:inline id="d4e2013" color="white" font-size="0pt" visibility="hidden">.</fo:inline> und <fo:inline font-weight="bold">Diffing</fo:inline>
                     <fo:inline id="d4e2025" color="white" font-size="0pt" visibility="hidden">.</fo:inline> - Vergleich von Änderungen zwischen Versionen. <fo:inline font-weight="bold">Intelligente Querverweise</fo:inline>
                     <fo:inline id="d4e2037" color="white" font-size="0pt" visibility="hidden">.</fo:inline>: Ein Link zwischen einzelnen <fo:inline font-weight="bold">XML</fo:inline> Topics  bleibt versionstreu.
		<fo:inline font-weight="bold">Automatischer Satz</fo:inline>, inkl. Zusamenhalte- und Trennregeln für Seiten, Absätze und Blöcke (Listen, Tabellen, etc).
	
	</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Veraltete Formate können ausgetauscht werden, ohne dass der Content geändert werden muss oder verlorengeht.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Die <fo:inline font-weight="bold">XML</fo:inline> Quelle kann ohne Aufbereitung in anderen Systemen wiederverwendet werden.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Es gibt weit verbreitete <fo:inline font-weight="bold">Standards</fo:inline> zur Struktur der <fo:inline font-weight="bold">XML</fo:inline> Quelle.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Nur das<fo:inline font-weight="bold"> XML</fo:inline> wird in der Datenhaltung persistiert.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Es gibt spezialisierte <fo:inline color="red">ERROR! Linktarget does not exist 29fee564-4a23-49c4-8bf4-7cb5ef16951a</fo:inline>, die besonders gut auf Baumstrukturen arbeiten. (Dokumente sind per se baum-strukturiert und sind eigentlich für eine relationale Datenbank ungeignet)</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
         
            <fo:block space-after="6pt">Die Redaktionssysteme der Technischen Dokumentation der führenden Hersteller in Deutschland haben <fo:inline font-weight="bold">XML</fo:inline> unter der Haube und setzen auf die <fo:inline font-weight="bold">Single-Source Strategie</fo:inline>.</fo:block>
         
            <fo:block space-after="6pt">Nachdem man bei <fo:inline font-weight="bold">XSLT</fo:inline> im Format der Ausgabe frei ist, kann auch direkt Plain-Text mit  <fo:inline font-weight="bold">XSLT</fo:inline> Regeln generiert werden. Daher liegt es nahe sich jegliche Form von Quelltext aus einer <fo:inline font-weight="bold">XML</fo:inline> Repräsentation erzeugen zu lassen.<fo:inline id="d4e2135" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
            </fo:block>
         
            <fo:block space-after="6pt">Beispielsweise speichern gängige <fo:inline font-weight="bold">CASE Tools</fo:inline> (Computer Aided Software Engineering) <fo:inline font-weight="bold">UML</fo:inline> Diagramme im <fo:inline font-weight="bold">XML</fo:inline> Format ab, so z.B. ArgoUML<fo:footnote><fo:inline id="fnsource-d4e2159" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e2159">26)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e2159" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e2159">26)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://argouml.tigris.org</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>.</fo:block>
         
            <fo:block space-after="6pt">Diese Klassendiagramme lassen sich mittels <fo:inline font-weight="bold">XSLT</fo:inline> direkt in Java-Code transformieren, wie z.B. in einem kleinen Open Source Projekt (aus vergangenen Tagen) : Butterfly Code Generator<fo:footnote><fo:inline id="fnsource-d4e2177" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e2177">27)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e2177" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e2177">27)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://butterflycode.sourceforge.net</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
            </fo:block>
         
            <fo:block space-after="6pt">Es gibt auch einen schönen Artikel dazu im Java World Journal<fo:footnote><fo:inline id="fnsource-d4e2192" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e2192">28)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e2192" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e2192">28)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.javaworld.com/article/2073998/java-web-development/generate-javabean-classes-dynamically-with-xslt.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>.</fo:block>
         
            <fo:block space-after="6pt">Für jede erdenkliche Art der Migration<fo:inline id="d4e2214" color="white" font-size="0pt" visibility="hidden">.</fo:inline> eines <fo:inline font-weight="bold">XML</fo:inline> Datenbestands oder eines Datenbank-Dumps / -Exports im <fo:inline font-weight="bold">XML</fo:inline> Format, zwischen Produktversionen oder zwischen Dienstleister- und Dienstnutzer-Systemen, bietet sich <fo:inline font-weight="bold">XSLT</fo:inline> zur Transformation an.</fo:block>
         
            <fo:block space-after="6pt">Dabei ist zu beachten, dass <fo:inline font-weight="bold">XSLT</fo:inline> besonders schnell und gut auf verschachtelten Strukturen arbeitet. Entartet ein Baum zur Liste und/oder sind nur geringe Strukturanpassungen notwendig, wird man sich mit einem schnellen <fo:inline font-weight="bold">SAX Parser</fo:inline> leichter tun. </fo:block>
         
            <fo:block space-after="6pt"> Mittels der <fo:inline font-weight="bold">XSLT 3.0</fo:inline> Streaming Option können auch sehr große <fo:inline font-weight="bold">XML</fo:inline> Quellen (Big Data) verarbeitet werden. <fo:inline font-weight="bold">Saxon</fo:inline> bietet bspw. diese Streaming Option<fo:footnote><fo:inline id="fnsource-d4e2259" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e2259">29)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e2259" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e2259">29)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://www.saxonica.com/html/documentation/sourcedocs/streaming/</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>.</fo:block>
         </fo:block></fo:block><fo:block id="d4e2272" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="16pt" provisional-distance-between-starts="12mm" space-after="8pt" font-weight="bold" hyphenate="false" line-height="140%">
            Wichtige Konzepte
         </fo:block><fo:block space-after="8pt"><fo:block font-weight="bold" line-height="130%" text-align="left" hyphenate="false" keep-with-next.within-page="40" space-after="6pt" font-size="11pt">Kapitelinhalt</fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="0mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e2319">
               Push vs. Pull Stylesheets 
            <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e2319"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" keep-with-previous="always" space-before="4pt"><fo:list-block><fo:list-item start-indent="0mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e2506">
               Eindeutigkeit der Regelbasis
            <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e2506"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" keep-with-previous="always" space-before="4pt"><fo:list-block><fo:list-item start-indent="0mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e3236">
               Namespaces
            <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e3236"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block>
         <fo:block space-after="6pt">
               <fo:inline font-weight="bold">XSLT </fo:inline>und <fo:inline font-weight="bold">XQuery</fo:inline> erlauben es Probleme auf viele verschiedene Arten zu lösen. Sicherlich wird jeder Programmierer im Laufe der Zeit seinen eigenen Stil entwickeln. Das kommt nicht zuletzt daher, dass man als XSLT Entwickler in vielen Firmen eine Expertenrolle einnimmt.</fo:block>
      
         <fo:block space-after="6pt">Umso wichtiger ist es, sich an allgemeine Konzepte, Muster und Best Practices zu halten, um einen schwer wartbaren Wildwuchs zu vermeiden.</fo:block>
      
         <fo:block space-after="6pt">Auf den folgenden Seiten wird versucht einige dieser Konzepte zusammenzutragen und mit eigenen Erfahrungen und Ideen zu kombinieren.</fo:block>
      
         <fo:block space-after="6pt">Es wird weder der Anspruch auf Vollständigkeit noch auf Korrektheit dieser Informationen erhoben. Das Kapitel soll vielmehr als Denkanstoß - mit hoffentlich einigen verwertbaren Ideen - dienen.</fo:block>
      
         <fo:block space-after="6pt">
            
         </fo:block>
      <fo:block id="d4e2319" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="14pt" provisional-distance-between-starts="10mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
               Push vs. Pull Stylesheets 
            </fo:block>
            <fo:block space-after="6pt">XSLT ist eine ereignisgesteuerte,<fo:inline id="d4e2331" color="white" font-size="0pt" visibility="hidden">.</fo:inline> regelbasierte Umgebung zur Konvertierung von XML Daten. Gerade der Vorteil des regelbasierten Ansatzes ist vielen Entwicklern nicht bewusst, und es entsteht Quellcode der aussieht, wie mit XPath angereicherter <fo:inline font-weight="bold">PHP</fo:inline> Code.</fo:block>
         
            <fo:block space-after="6pt">Wieso nimmt man dann überhaupt XSLT, wenn man keine Template-Match Regeln verwendet, oder nur spärlich verwendet?</fo:block>
         
            <fo:block space-after="6pt">Um diesen Umstand aufzuklären ist ein bisschen Theorie notwendig:</fo:block>
         
            <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Beim "Pull" werden Elemente in der Quellinstanz selektiert und an einer passenden Stelle in der Zielinstanz eingefügt. Diese Vorgehensweise ist vergleichbar mit derer von Template-Engines, wie <fo:inline font-weight="bold">JSP</fo:inline> oder <fo:inline font-weight="bold">ASP</fo:inline>. Das kann in mehreren Stufen erfolgen, bis schrittweise die Quellinstanz in die finale Zielinstanz überführt wurde.</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/5b73f348-0058-45e0-82f7-c3de72ec5d41/pull.svg" content-height="" content-width="auto"/></fo:block></fo:block>
                  <fo:block id="d4e2363" font-weight="bold" margin-bottom="12pt" keep-with-previous.within-page="always"><fo:inline wrap-option="no-wrap">Bild 1:</fo:inline> Pull Stylesheet</fo:block>
               
         
            <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Beim "Push" werden die Quelldaten schrittweise in die Zieldaten konvertiert. Diese Vorgehensweise kann explorativ erfolgen und beim Transformieren in einen Zwischenschritt entstehen Erkenntnisse, die bei der Weiterverarbeitung nützlich sind. <fo:inline font-weight="bold">Merke:</fo:inline>
                     <fo:inline font-weight="bold">XSLT </fo:inline>steht für <fo:inline font-weight="bold">eXtensible Stylesheet Transformation</fo:inline>.</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/5b73f348-0058-45e0-82f7-c3de72ec5d41/pusch.svg" content-height="" content-width="auto"/></fo:block></fo:block>
                  <fo:block id="d4e2387" font-weight="bold" margin-bottom="12pt" keep-with-previous.within-page="always"><fo:inline wrap-option="no-wrap">Bild 2:</fo:inline> Push Stylesheet</fo:block>
               
         
            <fo:block space-after="6pt">Das bisher Gesagte verdeutlicht zwar den "Pull" Ansatz, was genau aber ge"pusht" wird, ist vermutlich noch unklar. Betrachten wir XML in der Baumdarstellung.</fo:block>
         
            <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Der XSLT Prozessor unternimmt einen Tiefensuchlauf<fo:inline id="d4e2425" color="white" font-size="0pt" visibility="hidden">.</fo:inline> und überprüft bei jedem Knoten den er betritt, ob in seiner Regelbasis eine Regel existiert, die auf diesen Knoten "matched". Dabei gibt es drei grundsätzliche Möglichkeiten, wie die Knoten des Quellbaums in den Zielbaum kopiert - oder eben nicht kopiert - werden können.</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/5b73f348-0058-45e0-82f7-c3de72ec5d41/push.svg" content-height="" content-width="auto"/></fo:block></fo:block>
                  <fo:block id="d4e2419" font-weight="bold" margin-bottom="12pt" keep-with-previous.within-page="always"><fo:inline wrap-option="no-wrap">Bild 3:</fo:inline> Transformation des Quellbaums in den Zielbaum</fo:block>
               <fo:block-container keep-with-previous="10" space-after="16pt"><fo:table width="100%" start-indent="0mm"><fo:table-body><fo:table-row keep-together.within-page="20" keep-with-next.within-page="15"><fo:table-cell padding-left="2mm" width="15mm"><fo:block font-weight="bold">
                           <fo:block space-after="6pt">Remove</fo:block>
                        </fo:block></fo:table-cell><fo:table-cell width="3mm"><fo:block>...</fo:block></fo:table-cell><fo:table-cell padding-right="2mm" padding-left="1mm" max-width="30%"><fo:block>
                           <fo:block space-after="6pt">Beim Betreten einer leeren Match-Regel wird ein Teilbaum nicht kopiert</fo:block>
                        </fo:block></fo:table-cell><fo:table-cell padding-left="2mm" width="15mm"><fo:block font-weight="bold">
                           <fo:block space-after="6pt">Bypass</fo:block>
                        </fo:block></fo:table-cell><fo:table-cell width="3mm"><fo:block>...</fo:block></fo:table-cell><fo:table-cell padding-right="2mm" padding-left="1mm" max-width="30%"><fo:block>
                           <fo:block space-after="6pt">Beim Betreten einer Match-Regel ohne Kopieranweisung wird der Knoten übersprungen</fo:block>
                        </fo:block></fo:table-cell></fo:table-row><fo:table-row keep-together.within-page="20"><fo:table-cell padding-left="2mm" width="15mm"><fo:block font-weight="bold">
                           <fo:block space-after="6pt">Push</fo:block>
                        </fo:block></fo:table-cell><fo:table-cell width="3mm"><fo:block>...</fo:block></fo:table-cell><fo:table-cell padding-right="2mm" padding-left="1mm" max-width="30%"><fo:block>
                           <fo:block space-after="6pt">Durch gezielte Auswahl einer Knotenmenge auf der Descendant-Achse wird der XSLT Prozessor in eine bestimmte Richtung ge"pusht".</fo:block>
                        </fo:block></fo:table-cell><fo:table-cell padding-left="2mm" width="15mm"><fo:block/></fo:table-cell><fo:table-cell width="3mm"><fo:block/></fo:table-cell><fo:table-cell padding-right="2mm" padding-left="1mm" max-width="30%"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block-container>
         
            <fo:block space-after="6pt" hyphenate="false">Pull-Stylesheets werden gewöhlich mit <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xsl:for-each</fo:inline>
               </fo:inline> Loops programmiert. Dieser Ansatz ist meiner Ansicht nach gebräuchlich, wenn keine großen <fo:inline font-weight="bold">DTD</fo:inline> Änderungen zu erwarten sind, der XML Baum flach strukturiert ist und die Anforderungen an die  Knvertierung relativ einfach sind, bspw. beim Auswerten / Konvertieren von Konfigurationsdateien. In alles anderen Fällen sind Push-Stylesheets vorzuziehen, d.h. möglichst wenige <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xsl:for-each</fo:inline>
               </fo:inline> loops und möglichst viele Template-Match Regeln.</fo:block>
         </fo:block><fo:block id="d4e2506" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="14pt" provisional-distance-between-starts="10mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
               Eindeutigkeit der Regelbasis
            </fo:block>
            <fo:block space-after="6pt">Die Regelbasis<fo:inline id="d4e2518" color="white" font-size="0pt" visibility="hidden">.</fo:inline> von XSLT kann wahrscheinlich unendlich viele Regeln aufnehmen, wenn man unsere Limitierung bzgl. der Hardware nicht beachtet. Für die Vollständigkeit, Eindeutigkeit und Konsistenz der Regelbasis ist der Programmierer aber selbst verantwortlich.</fo:block>
         
            <fo:block space-after="6pt">Um die Eindeutigkeit der Regeln zu gewährleisten,  gibt es verschiedene Mechanismen.</fo:block>
         
            <fo:block space-after="6pt">Im Normalfall sollte auf einen bestimmten Knoten in einem bestimmten Szenario genau eine Regel matchen. Falls es einen Konflikt gibt, wird zumindest bei <fo:inline font-weight="bold">Saxon</fo:inline> diejenige Regel herangezogen, die im Stylesheet zuletzt deklariert wurde.</fo:block>
         
            <fo:block space-after="6pt">Diesen Umstand zu kennen, ist genau dann wichtig, wenn man einen bestehenden Stylesheet-Code übernehmen muss. Getreu dem Motto "Never change a running system" sollte man die Sache diesbzgl. sehr behutsam aufräumen.</fo:block>
         
            <fo:block space-after="6pt">Match-Regeln<fo:inline id="d4e2567" color="white" font-size="0pt" visibility="hidden">.</fo:inline> werden gemäß ihrer Spezifität sortiert und diejenige, die auf einem Knoten in einem bestimmten Szenario am besten zutrifft, wird zur Auswertung herangezogen. Grds. werden die Regeln anhand folgender Kriterien sortiert:<fo:inline id="d4e2576" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
            </fo:block>
         
            
                  <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="7mm">
                        <fo:block space-after="6pt">Importierte Template Regeln haben immer eine niedrigere Priorität als die Regeln des importierenden Stylesheets.</fo:block>
                     </fo:list-item-body></fo:list-item></fo:list-block>
                  <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="7mm">
                        <fo:block space-after="6pt">Templates mit einem höheren Priority Attribut haben Vorrang.</fo:block>
                     </fo:list-item-body></fo:list-item></fo:list-block>
                  <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="7mm">
                        <fo:block space-after="6pt" hyphenate="false">Templates ohne Priorität bekommen automatisch eine Default-Priorität. Die höchste Default-Priorität ist <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">0.5</fo:inline>
                        </fo:inline>.</fo:block>
                     </fo:list-item-body></fo:list-item></fo:list-block>
                  <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="7mm">
                        <fo:block space-after="6pt">Diese Default Priorität errechnet sich anhand der Bedingungen oder Wildcards, die an einen Match-Regel geknüpft sind: </fo:block>
                        <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm"><fo:block>
                              <fo:block space-after="6pt">Wenn mehrere Templates matchen, dann wird das am meisten spezifische zur Auswertung herangezogen.</fo:block>
                           </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm"><fo:block>
                              <fo:block space-after="6pt">Das am meisten spezifische Template wird anhand der Prioritäten berechnet.</fo:block>
                           </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm"><fo:block>
                              <fo:block space-after="6pt" hyphenate="false">Einfache Elementnamen (z.B. "para") haben Prio <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                 <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">0</fo:inline>
                              </fo:inline>.</fo:block>
                           </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm"><fo:block>
                              <fo:block space-after="6pt" hyphenate="false">Wildcards (z.B. <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                 <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">*, @*</fo:inline>
                              </fo:inline>) haben Priorität <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                 <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">-0.25</fo:inline>
                              </fo:inline>
                           </fo:block>
                           </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm"><fo:block>
                              <fo:block space-after="6pt" hyphenate="false">Knoten-Tests für andere Knoten (e.g. <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                 <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">comment(), node()</fo:inline>
                              </fo:inline>, etc. ) haben Priorität <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                 <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">-0.5</fo:inline>
                              </fo:inline>
                           </fo:block>
                           </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm"><fo:block>
                              <fo:block space-after="6pt" hyphenate="false">In allen anderen Fällen ist die Prio <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                 <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">0.5</fo:inline>
                              </fo:inline>.</fo:block>
                           </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
                        <fo:block space-after="6pt">Beispiele:</fo:block>
                        <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm"><fo:block>
                              <fo:block space-after="6pt" hyphenate="false">
                              <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                 <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">para -&gt; 0</fo:inline>
                              </fo:inline>
                           </fo:block>
                           </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm"><fo:block>
                              <fo:block space-after="6pt" hyphenate="false">
                              <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                 <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">h:* -&gt; -0.25</fo:inline>
                              </fo:inline>
                           </fo:block>
                           </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm"><fo:block>
                              <fo:block space-after="6pt" hyphenate="false">
                              <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                 <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">* -&gt; -0.25</fo:inline>
                              </fo:inline>
                           </fo:block>
                           </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm"><fo:block>
                              <fo:block space-after="6pt" hyphenate="false">
                              <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                 <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">node() -&gt; -0.25</fo:inline>
                              </fo:inline>
                           </fo:block>
                           </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm"><fo:block>
                              <fo:block space-after="6pt" hyphenate="false">
                              <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                 <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">contents/para -&gt; 0.5</fo:inline>
                              </fo:inline>
                           </fo:block>
                           </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm"><fo:block>
                              <fo:block space-after="6pt" hyphenate="false">
                              <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                 <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">contents/* -&gt; 0.5</fo:inline>
                              </fo:inline>
                           </fo:block>
                           </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
                     </fo:list-item-body></fo:list-item></fo:list-block>
                  <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="7mm">
                        <fo:block space-after="6pt">Mit einer Kommandozeilen-Option kann bei <fo:inline font-weight="bold">Saxon</fo:inline> festgelegt werden, dass die Transformation abbricht, sobald es einen Konflikt bei der Regelauswertung<fo:inline id="d4e2797" color="white" font-size="0pt" visibility="hidden">.</fo:inline> gibt.</fo:block>
                     </fo:list-item-body></fo:list-item></fo:list-block>
               <fo:block color="white">.</fo:block>
         
            <fo:block space-after="6pt">Wie in der obigen Sektion unter Punkt 1. angegeben, haben alle<fo:inline id="d4e2821" color="white" font-size="0pt" visibility="hidden">.</fo:inline> Regeln in einem importierten Stylesheet eine geringere Priorität als im importierenden Stylesheet. Diesen Umstand kann man sich zunutze machen, um eine Default-Regel<fo:inline id="d4e2830" color="white" font-size="0pt" visibility="hidden">.</fo:inline> einzubinden, bspw:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="*" mode="#all"<fo:inline color="#527F3F">/&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt">Da sie sich in einem importierten Stylesheet befindet, hat sie geringere Priorität als alle anderen Regeln und greift nur dann, wenn für einen betretenen Knoten keine andere Match-Regel definiert ist.</fo:block>
         
            <fo:block space-after="6pt">Das ist z.B. praktisch, um nicht "gehandelte" Element zu identifizieren - dazu wäre die obige Regel nicht leer, sondern würde bspw. einen gelb markierten Warntext direkt in das Ausgabeformat schreiben.</fo:block>
         
            <fo:block space-after="6pt">Eine leere Default-Regel ist dagegen gut, wenn bspw. in einer <fo:inline font-weight="bold">XML-2-XML Migration</fo:inline> automatisch Knoten im XML Baum abgetrennt werden sollen, da es für diese keine Match-Regel gibt.</fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">
                  Alle<fo:inline id="d4e2885" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
                Match-Regeln werden mit einer Priorität ausgestattet. Der Stylesheet-Entwickler hat die Möglichkeit diese Priorität zu überschreiben. Dazu wird das Attribut 
                  <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">@priority</fo:inline>
                  </fo:inline>
                an der Match-Regel verwendet. Ein Use-Case für die Prioritäten wäre bspw. folgendes Filter-Szenario</fo:block>
         
            <fo:block space-after="6pt">
               <fo:block space-after="6pt" margin-left="1mm" font-weight="bold" start-indent="0">Beispiel Seminarverwaltung</fo:block>
            </fo:block>
         
            <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Die Eingabeinstanz soll in einer Vorprozessierung gefiltert werden.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Dabei sollen Seminar-Elemente markiert werden, die nicht besonderen Bedingungen entsprechen:</fo:block>
                     <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="6mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="12mm"><fo:block>
                           <fo:block space-after="6pt">Das Seminar-Element hat ein Feld "Ende-Datum" das abgelaufen ist.</fo:block>
                        </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="6mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="12mm"><fo:block>
                           <fo:block space-after="6pt">Am Seminar-Element sind mehrere Dozenten angestellt, obwohl das Seminar-Element vom Typ "Single" ist.</fo:block>
                        </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="6mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="12mm"><fo:block>
                           <fo:block space-after="6pt">Einem Seminar-Element ist kein Dozent zugeordnet.</fo:block>
                        </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Sicherlich kann es Seminar-Elemente geben, die alle drei Bedingungen erfüllen. Um das Error-Log aber nicht zu überfüllen, sollen die Filter nach ihren Prioritäten ausgeführt werden.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
         
            <fo:block space-after="6pt">In XSLT Templates überführt, könnte diese Anforderung so umgsetzt werden:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="Seminar[Ende-Datum/xs:date(.) le current-date()]" 
              priority="30" mode="filter-seminare"<fo:inline color="#527F3F">&gt;</fo:inline> 
  <fo:inline color="#527F3F">&lt;xsl:element</fo:inline> name="Filtered-Seminar" namespace="{namespace-uri()}"<fo:inline color="#527F3F">&gt;</fo:inline> 
    <fo:inline color="#527F3F">&lt;xsl:attribute</fo:inline> name="reason"<fo:inline color="#527F3F">&gt;</fo:inline>termed-seminar<fo:inline color="#527F3F">&lt;/xsl:attribute&gt;</fo:inline> 
    <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="node()|@*" mode="filter-seminare"<fo:inline color="#527F3F">/&gt;</fo:inline> 
  <fo:inline color="#527F3F">&lt;/xsl:element&gt;</fo:inline> 
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline> 

<fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="Seminar[Type eq 'SINGLE' and count(dozenten/dozent) gt 1]"
              priority="20" mode="filter-seminare"<fo:inline color="#527F3F">&gt;</fo:inline> 
  <fo:inline color="#527F3F">&lt;xsl:element</fo:inline> name="filtered-Seminar" namespace="{namespace-uri()}"<fo:inline color="#527F3F">&gt;</fo:inline> 
    <fo:inline color="#527F3F">&lt;xsl:attribute</fo:inline> name="reason"<fo:inline color="#527F3F">&gt;</fo:inline>dozenten-count<fo:inline color="#527F3F">&lt;/xsl:attribute&gt;</fo:inline> 
    <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="node()|@*" mode="filter-seminare"<fo:inline color="#527F3F">/&gt;</fo:inline> 
  <fo:inline color="#527F3F">&lt;/xsl:element&gt;</fo:inline> 
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline> 

<fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="Seminar[not(dozenten/dozent)]" mode="filter-seminare"<fo:inline color="#527F3F">&gt;</fo:inline> 
  <fo:inline color="#527F3F">&lt;xsl:element</fo:inline> name="filtered-Seminar" namespace="{namespace-uri()}"<fo:inline color="#527F3F">&gt;</fo:inline> 
    <fo:inline color="#527F3F">&lt;xsl:attribute</fo:inline> name="reason"<fo:inline color="#527F3F">&gt;</fo:inline>dozenten-missing<fo:inline color="#527F3F">&lt;/xsl:attribute&gt;</fo:inline> 
    <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="node()|@*" mode="filter-seminare"<fo:inline color="#527F3F">/&gt;</fo:inline> 
  <fo:inline color="#527F3F">&lt;/xsl:element&gt;</fo:inline> 
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">Neben des Einsatzes des <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">@priority</fo:inline>
               </fo:inline> Attributs und des nachfolgend beschriebenen <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">@mode</fo:inline>
               </fo:inline> Attributs ist sicherlich auch noch interessant, dass die gefilterten Seminar-Elemente hier nicht gelöscht werden, sondern umbenannt werden. Auf diese Weise können sie in einem nachfolgenden Transformationsschritt (Stichwort: <fo:inline color="red">ERROR! Linktarget does not exist 4ba64232-f94b-41a8-8522-b959448347ac</fo:inline>) weiterbehandelt werden, stören aber in der regulären Verarbeitung nicht.</fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">An allen Templates<fo:inline id="d4e3107" color="white" font-size="0pt" visibility="hidden">.</fo:inline> hat man die Möglichkeit einen selbst deklarierten Modus anzugeben. Wenn dann der XSLT Prozessor in eine bestimmte Richtung gepusht, vgl. <fo:inline color="red">ERROR! Linktarget does not exist 8e5f35b9-8707-4d46-bf49-cfcfbdc2c7c9</fo:inline> , wird, werden nur diejenigen Regeln zur Auswertung herangezogen, die im selben Modus sind, wie der <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">apply-templates</fo:inline>
               </fo:inline> Call selbst.</fo:block>
         
            <fo:block space-after="6pt">Beispielsweise möchte man die Titel im Kapitel anders behandeln als die Kapitel im Inhaltsverzeichnis, denn im TOC sollen z.B. keine Fussnoten-Marker angezeigt werden. </fo:block>
         
            <fo:block space-after="6pt">In Templates formuliert würde so eine Anweisung folgendermassen aussehen:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="title" mode="toc"<fo:inline color="#527F3F">&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;div</fo:inline> class="toc-entry"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="*[not(self::footnote)]"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/div&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>

<fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="title"<fo:inline color="#527F3F">&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;h1&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/h1&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt">Die Generierung des TOC könnte dann so ablaufen:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:for-each</fo:inline> select="chapter"<fo:inline color="#527F3F">&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="title" mode="toc"<fo:inline color="#527F3F">&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:for-each&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt">Bzgl. der Eindeutigkeit der Regelbasis kann man so anhand des Mode-Attributes Ausführungsgruppen bilden. </fo:block>
         
            <fo:block space-after="6pt" keep-together.within-page="10" font-style="normal" background-color="white" border-top="3pt #F77320 solid" border-bottom="3pt #F77320 solid" margin="0mm" padding-top="1mm" padding-bottom="1mm" padding-left="1mm"><fo:external-graphic src="./transformation/uwe/images/warning/_warning_300dpi.png"/><fo:block space-after="12pt" margin-top="12pt" font-weight="bold" keep-with-next.within-page="always">Wie auch bei Angabe der Priorities kann man auf diese Weise Regeln setzen, die nie ausgeführt werden, weil sie vllt. im Zuge einer Refactoring-Massnahme abgeklemmt und dann vergessen werden.</fo:block><fo:list-block start-indent="0mm" space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label start-indent="2mm"><fo:block color="#808080">►</fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>Auch das <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">mode</fo:inline>
                  </fo:inline>-Attribut ist also mit Vorsicht zu geniessen und sparsam einzusetzen.</fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/></fo:block>
         </fo:block><fo:block id="d4e3236" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="14pt" provisional-distance-between-starts="10mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
               Namespaces
            </fo:block>
            <fo:block space-after="6pt">Wenn man XML Instanzen aus unterschiedlichen Quellen mit XSLT verarbeiten will, wird man sich wohl
oder übel mit dem Thema Namespaces<fo:inline id="d4e3248" color="white" font-size="0pt" visibility="hidden">.</fo:inline> auseinander setzen müssen, um Konflikte in den 
Elementselektoren zu vermeiden.</fo:block>
         
            <fo:block space-after="6pt">Gerade bei hintereinandergeschalteten Transformationen kann es auch passieren, 
dass unerwartet ein Namespace in die Ausgabe generiert wird,
den der folgende Prozesschritt nicht versteht, weil er dort nicht deklariert wurde.</fo:block>
         
            <fo:block space-after="6pt">Es gibt meherere Möglichkeiten einen Namespace im Stylesheet zu deklarieren. Gehen wir davon aus,
dass in einem Transformationsschritt genau eine Quelle und max. eine Konfigurationsdatei verarbeitet 
wird, dann kann das Stylsheet-Element bspw. so aussehen:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:stylesheet</fo:inline> version="2.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  xmlns:tektur="https://namespace-eigener-xslt-funktionen"
  xmlns="http://namespace-in-der-xml-eingabe.com/"
  xpath-default-namespace="https://namespace-der-konfigdatei.com/"
  exclude-result-prefixes="#all"<fo:inline color="#527F3F">&gt;</fo:inline></fo:block>
         
            <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt" hyphenate="false">Der <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xsl</fo:inline>
                     </fo:inline>Namespace ist klar</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt" hyphenate="false">Der <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xs</fo:inline>
                     </fo:inline>Namespace ist notwendig, wenn man typisiert arbeiten will. Er erlaubt das Einbinden von Datentypen
nach der XML Schema Spezifikation<fo:footnote><fo:inline id="fnsource-d4e3308" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e3308">30)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e3308" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e3308">30)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/XML_Schema</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> und somit die 
bessere Validierung des Stylesheets zur Compile-Zeit.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Die Deklaration eines eigenen geprefixten Namespaces erlaubt das Einbinden von eigenen XSLT Funktionen, 
wie z.B. auch das Einbinden der FunctX Bibliothek<fo:footnote><fo:inline id="fnsource-d4e3323" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e3323">31)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e3323" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e3323">31)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://www.xsltfunctions.com/</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                  </fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Der Nicht-geprefixte Namespace ist der <fo:inline font-weight="bold">Default-Namespace</fo:inline> und kann einen Namespace aus der Eingabe behandeln</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Das Attribut <fo:inline font-weight="bold">xpath-default-namespace</fo:inline> gibt einen weiteren Namespace an, der in XPath Funktionen verwendet werden kann.
In diesem Feld würde ich den Namespace einer Konfigurations- oder separaten Datendatei angeben.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
         
            <fo:block space-after="6pt">Mehr als einen Namespace in der Eingabe sollte man aus meiner Sicht bei der XML Verarbeitung mit XSLT vermeiden wenn es geht.
Ggf. empfiehlt es sich, die Eingabe vor der Verarbeitung zu normalisieren und Elemente ggf. umzubenennen. Ansonsten kann man auch eigene Namespace-Prefixes deklarieren, wie z.B.:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">xmlns:ext="https://www.tekturcms.de/external-tools"</fo:block>
         
            <fo:block space-after="6pt">und diese in XPath Selektionen und Match-Regeln verwenden.</fo:block>
         
            <fo:block space-after="6pt" keep-together.within-page="10" font-style="normal" background-color="white" border-top="3pt #DC0F14 solid" border-bottom="3pt #DC0F14 solid" margin="0mm" padding-top="1mm" padding-bottom="1mm" padding-left="1mm"><fo:external-graphic src="./transformation/uwe/images/warning/_danger_300dpi.png"/><fo:block space-after="12pt" margin-top="12pt" font-weight="bold" keep-with-next.within-page="always">Befinden sich in den Eingabedaten Namespaces, die man in den XSLT Stylesheets nicht handelt - der Namespace kann auch nur
an einem ganz bestimmten Element hängen - so kann es bei der Transformation - ohne Fehlermeldung - zu unerwarteten Ergebnissen kommen.</fo:block><fo:list-block start-indent="0mm" space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label start-indent="2mm"><fo:block color="#808080">►</fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>Deshalb sollte man die Daten im Vorfeld bzgl. Namespaces sehr genau analysieren.</fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/></fo:block>
         
            <fo:block space-after="6pt">Namespaces in der Eingabe werden also meistens über die Kopfdeklaration in der Stylesheetdatei gehandelt, welcher Namespace
schliesslich in die Ausgabe geschrieben wird, hängt vom aktuell verarbeiteten Kontextknoten ab:</fo:block>
         
            <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Elemente, die man erzeugt, erhalten automatisch den Default-Namespace, wenn man nicht explizit einen Namespace angibt.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Elemente, die man kopiert, transportieren den Namespace, den sie in der Eingabe hatten, wenn man dies nicht explizit verhindert.</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
         
            <fo:block space-after="6pt">Um diese beiden Default Einstellungen zu steuern (bzw. zu überschreiben) gibt es mehrere Möglichkeiten:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:element</fo:inline> name="{local-name()}" namespace="{namespace-uri()}"<fo:inline color="#527F3F">&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt">Hier wird ein Element mit dem un-geprefixten Namespace des Kontextknotens deklariert.
Wenn der Kontextknoten keinen anderen Namespace hat, so wird hierdurch sichergestellt,
dass der Default-Namespace auch tatsächlich in die Ausgabe kommt.</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:element</fo:inline> name="meinelement" namespace="mein-namespace"<fo:inline color="#527F3F">&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt">Hier wird ein Element mit eigener Namespace Angabe in die Ausgabe geschrieben. Einfacher geschrieben:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;mein-element</fo:inline> xmlns="mein-namespace"<fo:inline color="#527F3F">&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt">Es gibt auch ein Attribut am xsl:copy Element,
das den Vorgang des Namespace-Kopierens steuern kann:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="p"<fo:inline color="#527F3F">&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;xsl:copy</fo:inline> copy-namespaces="no"<fo:inline color="#527F3F">&gt;</fo:inline>
     <fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline>
   <fo:inline color="#527F3F">&lt;/xsl:copy&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">Hier wird der Namespace am <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">p</fo:inline>
               </fo:inline> Element nicht in die Ausgabe geschrieben. Ggf. funktioniert diese
Funktion aber mit unerwarteten Ergebnissen, deshalb sollte man sich ohne genauen Test nicht darauf verlassen.</fo:block>
         
            <fo:block space-after="6pt">Ebenso kann eine Default-Kopierregel verwendet werden, die es verbietet einen Namespace
weiterzuvererben:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="@* | node()"<fo:inline color="#527F3F">&gt;</fo:inline>
   <fo:inline color="#527F3F">&lt;xsl:copy</fo:inline> inherit-namespaces="no"<fo:inline color="#527F3F">&gt;</fo:inline>
     <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="@* | node()"<fo:inline color="#527F3F">/&gt;</fo:inline>
   <fo:inline color="#527F3F">&lt;/xsl:copy&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt">Während XSLT dazu dienen sollte, XML Daten in andere (XML-) Formate zu transformieren, dient XQuery 
z.B. dazu auf einer <fo:inline font-weight="bold">NoSQL</fo:inline> Datenbank Daten aus unterschiedlichen Quellen
zu selektieren, zu harmonisieren und an verarbeitende Prozesse weiterzugeben.</fo:block>
         
            <fo:block space-after="6pt">Deshalb ist es für mich nicht so erstaunlich, dass das Namespace Konzept in XQuery irgendwie besser
funktioniert.</fo:block>
         
            <fo:block space-after="6pt">Damit man überhaupt Daten auf einem mit Namespaces versehenen XML Dokument selektieren
kann, müssen alle Namspaces am Anfang des XQuery Ausdrucks angegeben werden, das sieht so aus:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">xquery version "1.0-ml";

import <fo:inline color="#7F3300">module </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>tektur = "http://www.teturcms.de/xquery/common" 
                                  at "common.xqy";
import <fo:inline color="#7F3300">module </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>mem = "http://xqdev.com/in-mem-update" 
                                  at '/MarkLogic/appservices/utils/in-mem-update.xqy';
<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>local = "https://lambdawerk.com/code/alex-sandbox/1.0";
<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>weiredns = "https://weired-ns-in-input-data.com/weired/ns";
<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>xs = "http://www.w3.org/2001/XMLSchema"; </fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">Hier werden zuerst Funktionen aus anderen Modulen eingebunden, nämlich die in einer Datei <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">common.xqy</fo:inline>
               </fo:inline> der eigenen Entwicklung, sowie die Bibliothek <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">mem</fo:inline>
               </fo:inline> aus der<fo:inline font-weight="bold"> MarkLogic</fo:inline>
Umgebung. Danach wird ein Namespace<fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">local</fo:inline>
               </fo:inline> deklariert, den man verwenden wird, wenn im weiteren Verlauf
eigene XQuery Funktionen verwendet werden sollen, sowie der Namespace <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">weiredns</fo:inline>
               </fo:inline>, der in den Eingabedaten
vorhanden ist. Der Namespace<fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xs</fo:inline>
               </fo:inline> ist analog zum XSLT Beispiel gesetzt.</fo:block>
         </fo:block></fo:block><fo:block id="d4e3640" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="16pt" provisional-distance-between-starts="12mm" space-after="8pt" font-weight="bold" hyphenate="false" line-height="140%">
            Ausgewählte Themen
         </fo:block><fo:block space-after="8pt"><fo:block font-weight="bold" line-height="130%" text-align="left" hyphenate="false" keep-with-next.within-page="40" space-after="6pt" font-size="11pt">Kapitelinhalt</fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="0mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e3662">
               Transformationen mit XSLT
            <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e3662"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="8mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e3723">
                  Vortransformationen 
               <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e3723"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="8mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e4224">
                  Vererbung
               <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e4224"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="8mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e4460">
                  XSLT Streaming
               <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e4460"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="8mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e5374">
                  Identifikation mit <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">generate-id()</fo:inline>
                  </fo:inline>
               
               <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e5374"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="8mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e5743">
                  Reguläre Ausdrücke
               <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e5743"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="8mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e5933">
                  Webservice Calls mit <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">doc()</fo:inline>
                  </fo:inline> und <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">unparsed-text()</fo:inline>
                  </fo:inline>
               
               <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e5933"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="0mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e6294">
               Abfragen mit XQuery 
            <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e6294"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="8mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e6745">
                  XQuery als Programmiersprache
               <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e6745"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="0mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e7667">
               XML Datenbanken
            <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e7667"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="8mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e7875">
                  Connector zu Marklogic in Oxygen
               <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e7875"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="8mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e8055">
                  SQL Views in MarkLogic
               <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e8055"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="8mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e9376">
                  Bi-Temporale Dokumente
               <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e9376"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="8mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e11144">
                  MarkLogic Tools
               <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e11144"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" space-before="4pt"><fo:list-block><fo:list-item start-indent="0mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e11310">
               Testing
            <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e11310"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" keep-with-previous="always" space-before="4pt"><fo:list-block><fo:list-item start-indent="8mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e11324">
                  Validierung mit Schematron
               <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e11324"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" keep-with-previous="always" space-before="4pt"><fo:list-block><fo:list-item start-indent="8mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e11823">
                  Erste Schritte mit Xspec
               <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e11823"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block>
         <fo:block space-after="6pt">Auf den folgenden Seiten habe ich Themen ausgewählt, die für mich gerade besonders interessant erscheinen. Nach einer drei-jährigen Pause im Bereich XML, gibt es nun doch wieder viele neue Sachen ...</fo:block>
      
         <fo:block space-after="6pt">
            
         </fo:block>
      <fo:block id="d4e3662" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="14pt" provisional-distance-between-starts="10mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
               Transformationen mit XSLT
            </fo:block>
            <fo:block space-after="6pt">XSLT ist die Standardlösung für XML Transformationen. Es gibt noch einige exotische Lösungen, wie:</fo:block>
         
            <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">
                        Metamorphosis
                        <fo:footnote><fo:inline id="fnsource-d4e3688" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e3688">32)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e3688" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e3688">32)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/XSL_Transformation#MetaMorphosis</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> ist eine proprietäre Sprache der Firma Ovidius GmbH in Berlin. Sie findet hauptsächlich Anwendung im Bereich Publishing in der Luftfahrt / Verteidigung.
                     </fo:block>
                  </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Und auch Spielereien, wie eine Nachbildung der XSLT Syntax in Erlang: xmerl_xs<fo:footnote><fo:inline id="fnsource-d4e3704" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e3704">33)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e3704" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e3704">33)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://erlang.org/doc/man/xmerl_xs.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                  </fo:block>
                  </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
         
            <fo:block space-after="6pt">In diese Kapitel werden einige ausgewählte Themen zur XML Proezessierung mit XSLT dargestellt. Dabei geht es weder um Vollständigkeit, noch um die beste/eleganteste Lösung, sondern eher um die Vorstellung eines Anwendungsszenarios mit einem potentiellen Lösungsansatz - so wie ich die Sache halt angehen würde ...</fo:block>
         <fo:block id="d4e3723" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="13pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                  Vortransformationen 
               </fo:block>
               <fo:block space-after="6pt">Bei einer komplexen Transformation ist es ratsam und sogar manchmal unabdingbar die Konvertierung in einzelne Stufen aufzuteilen. Das hat folgende Vorteile:</fo:block>
            
               <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Der Prozess ist transparenter, da die einzelnen Stufen leichter überschaubar sind.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Die Zwischenergebnisse können für Debug-Zwecke ausgewertet werde oder dienen als Eingabe für andere Prozesse.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Nicht-relevante oder invalide Teilbäume können aus der Eingabeinstanz gefiltert werden, um so die weitere Verarbeitung zu beschleunigen.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Hilfskonstrukte können erzeugt werden. Diese erleichtern die weitere Verarbeitung.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
            
               <fo:block space-after="6pt">Es gibt zwei Möglichkeiten, wie eine Vortransformation<fo:inline id="d4e3771" color="white" font-size="0pt" visibility="hidden">.</fo:inline> eingebunden werden kann:</fo:block>
            
               <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">In einem separaten File bzw. einer XML Instanz, die vom XSLT Prozessor vor der eigentlichen Transformation aufgerufen wird und einen Zwischenstand produziert. Dieser kann dann als Eingabe für den Haupttransformationsschritt dienen.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Innerhalb des eigentlichen XSLT Stylesheets. Hier wird das Ergebnis der Vortransformation in einer Variablen erzeugt.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
            
               <fo:block space-after="6pt">Den zweiten Punkt möchte ich anhand eines Beispiel XSLT Skripts vorführen. Betrachten wir folgende Input Daten:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;education-system&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;administrative-regions&gt;</fo:inline>
    [...]
    <fo:inline color="#527F3F">&lt;dministrative-region</fo:inline> id="31" name="Bavaria"<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;shools&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;school</fo:inline> id="45"<fo:inline color="#527F3F">&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;teachers&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;teacher</fo:inline> id="576"<fo:inline color="#527F3F">/&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;teacher</fo:inline> id="345"<fo:inline color="#527F3F">/&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;teacher</fo:inline> id="12"<fo:inline color="#527F3F">/&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;/teachers&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;/school&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;school</fo:inline> id="36"<fo:inline color="#527F3F">&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;teachers&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;teacher</fo:inline> id="576"<fo:inline color="#527F3F">/&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;teacher</fo:inline> id="8"<fo:inline color="#527F3F">/&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;/teachers&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;/school&gt;</fo:inline>
        [...]
      <fo:inline color="#527F3F">&lt;/shools&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/dministrative-region&gt;</fo:inline>
    [...]
  <fo:inline color="#527F3F">&lt;/administrative-regions&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/education-system&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">Die erste Datei beinhaltet eine Zuordnung von Lehrern zu Schulen in verschiedenen Regierungsbezirken. Um die Daten zu den beiden referenzierten Objekten einzusehen, müssen zwei weitere Dateien konsultiert werden. Die Datei, welche die Lehrer auflistet:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;teachers&gt;</fo:inline>
  [...]
  <fo:inline color="#527F3F">&lt;teacher</fo:inline> id="576"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;first-name&gt;</fo:inline>Alfons<fo:inline color="#527F3F">&lt;/first-name&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;last-name&gt;</fo:inline>Blimetsrieder<fo:inline color="#527F3F">&lt;/last-name&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;subjects&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;subject&gt;</fo:inline>Biology<fo:inline color="#527F3F">&lt;/subject&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;subject&gt;</fo:inline>Math<fo:inline color="#527F3F">&lt;/subject&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;subject&gt;</fo:inline>Sport<fo:inline color="#527F3F">&lt;/subject&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/subjects&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;suspended&gt;</fo:inline>2017-12-31<fo:inline color="#527F3F">&lt;/suspended&gt;</fo:inline>
    [...]
  <fo:inline color="#527F3F">&lt;/teacher&gt;</fo:inline>
  [...]
<fo:inline color="#527F3F">&lt;/teachers&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">Und die Datei, welche die Schulen auflistet:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;schools&gt;</fo:inline>
  [...]
  <fo:inline color="#527F3F">&lt;school</fo:inline> id="45"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>Gymnasium Bad Aibling<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;type&gt;</fo:inline>Oberschule<fo:inline color="#527F3F">&lt;/type&gt;</fo:inline>
    [...]
  <fo:inline color="#527F3F">&lt;/school&gt;</fo:inline>
  [...]
<fo:inline color="#527F3F">&lt;/schools&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">Um diese Daten verarbeiten zu können ist es sinnvoll, die drei Dateien in einem ersten "Resolver" Schritt zusammenzuführen und ggf. irrelevante Strukturen zu entfernen. Lehrer aus obigem Beispiel können beispielsweise suspendiert worden sein. Das folgende Skript erledigt dies mittels einer zusätzlichen Transformation in eine Variable:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;?xml</fo:inline> version="1.0" encoding="UTF-8"?<fo:inline color="#527F3F">&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;xsl:stylesheet</fo:inline> version="2.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  exclude-result-prefixes="#all"<fo:inline color="#527F3F">&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:output</fo:inline> indent="yes" method="xml"<fo:inline color="#527F3F">/&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:strip-space</fo:inline> elements="*"<fo:inline color="#527F3F">/&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:param</fo:inline> name="file-1" required="yes"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;xsl:param</fo:inline> name="file-2" required="yes"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;xsl:param</fo:inline> name="file-3" required="yes"<fo:inline color="#527F3F">/&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:variable</fo:inline> name="files" select="(doc($file-1), doc($file-2), doc($file-3))"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;xsl:variable</fo:inline> name="bavaria-region-ids" select="(31, 58)"<fo:inline color="#527F3F">/&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:key</fo:inline> name="teachers" match="teacher" use="@id"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;xsl:key</fo:inline> name="schools" match="school" use="@id"<fo:inline color="#527F3F">/&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> name="main"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:variable</fo:inline> name="resolve-result"<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="$files/administrative-regions" mode="resolve"<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/xsl:variable&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="$resolve-result/administrative-regions"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="administrative-region[not(@id = $bavaria-region-ids)]" 
                mode="resolve"<fo:inline color="#527F3F">/&gt;</fo:inline>

  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="school" mode="resolve"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:copy&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:copy-of</fo:inline> select="key('schools',@id, $files/schools[1]/root())/node()"<fo:inline color="#527F3F">/&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="node()|@*" mode="resolve"<fo:inline color="#527F3F">/&gt;</fo:inline>      
    <fo:inline color="#527F3F">&lt;/xsl:copy&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>

  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="teacher" mode="resolve"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:copy-of</fo:inline> select="key('teachers',@id, $files/teachers[1]/root())/node()"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
    
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="teacher[suspended/xs:date(.) le current-date()]"<fo:inline color="#527F3F">/&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="node()|@*" mode="#all"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:copy&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> mode="#current"<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/xsl:copy&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
  
<fo:inline color="#527F3F">&lt;/xsl:stylesheet&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">Im ersten Resolve-Schritt werden die Referenzen zu den Lehrer- und Schul-Objekten aufgelöst, d.h. die Attribute des Schul-Objekts werden in die Struktur aus der ersten Datei kopiert. </fo:block>
            
               <fo:block space-after="6pt">Die Liste der Lehrer an diesen Schul-Objekten bleibt erhalten und wird mit dem Inhalt aus der zweiten Datei bestückt. </fo:block>
            
               <fo:block space-after="6pt">Zusätzlich werden alle Regierungsbezirke entfernt, die nicht zu Bayern gehören - was die weitere Verarbeitung wesentlich beschleunigen wird. Lehrer die suspendiert worden sind fliegen ebenfalls raus ...</fo:block>
            </fo:block><fo:block id="d4e4224" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="13pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                  Vererbung
               </fo:block>
               <fo:block space-after="6pt">Mit XSLT<fo:inline id="d4e4236" color="white" font-size="0pt" visibility="hidden">.</fo:inline> kann man Konstrukte nachbilden, so wie sie in anderen Programmiersprachen auch vorhanden sind, bspw. Vererbung. Dabei wird in einer Spezialisierung eine schon bereits getätigte Implementierung übernommen und erweitert oder eingeschränkt.</fo:block>
            
               <fo:block space-after="6pt">Der Vorteil dabei ist, dass man nicht alles nochmal neu schreiben muss. Das verkleinert die Redundanz, führt zu einer besseren Wartbarkeit und einer geringeren Fehleranfälligkeit.</fo:block>
            
               <fo:block space-after="6pt">Gewöhnlich implementiert man ein Stylsheet für ein bestimmtes Ausgabeformat und eine Produktvariante. Schrittweise werden dann weitere Varianten und Formate hinzugefügt.</fo:block>
            
               <fo:block space-after="6pt">Am komfortabelsten hat man es natürlich, wenn zu Beginn der Implementierung eine vollständige Spezifikation vorliegt... Das ist aber natürlich eher selten der Fall.</fo:block>
            
               <fo:block space-after="6pt">Aus diesem Grund ist es wichtig, sich eine gute Strategie zu überlegen, damit die Architektur nicht in Spagetthi-Code auswartet.</fo:block>
            
               <fo:block space-after="6pt">Eine gute Option wäre, die XSLT Import Präzedenz auszunutzen, vgl. Kapitel <fo:inline color="red">ERROR! Linktarget does not exist 0a812a97-0146-461c-bc92-00f7a42f49e0</fo:inline>.</fo:block>
            
               <fo:block space-after="6pt">Angenommen es geht darum zu einem späteren Zeitpunkt weitere Parameter einzuführen. Ein Switch, wie der folgende, müsste dann an mehreren Stellen im Code aktualisiert werden.</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:choose&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:when</fo:inline> test="$myParameter='this_option'"<fo:inline color="#527F3F">&gt;</fo:inline>
        &lt;!-- do this --&gt;
    <fo:inline color="#527F3F">&lt;/xsl:when&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:when</fo:inline> test="$myParameter='that_option'"<fo:inline color="#527F3F">&gt;</fo:inline>
        &lt;!-- do that --&gt;
    <fo:inline color="#527F3F">&lt;/xsl:when&gt;</fo:inline>
        [...]
<fo:inline color="#527F3F">&lt;/xsl:choose&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">Besser ist es, wenn man ein Core-Stylesheet<fo:inline id="d4e4326" color="white" font-size="0pt" visibility="hidden">.</fo:inline> pflegt, das für ein Format und eine Produktvariante<fo:inline id="d4e4335" color="white" font-size="0pt" visibility="hidden">.</fo:inline> gut ausgetestet ist. Dieses Core-Stylesheet wird dann einfach für eine neue Variante importiert und relevante Teile werden für die neue "Spezialisierung"<fo:inline id="d4e4341" color="white" font-size="0pt" visibility="hidden">.</fo:inline> überschrieben. Beispielsweise könnte eine Regel zum Setzen des Headers auf jeder Seite so implementiert sein:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:template</fo:inline> name="render-header"<fo:inline color="#527F3F">&gt;</fo:inline>
    &lt;!-- print logo on the left side spanning two rows--&gt;
    &lt;!-- print some metadata right side first row --&gt;
    &lt;!-- print a running header right side second row --&gt;
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">Will man in einem neuen Format, bspw. A5, diese Logik austauschen und nur eine Zeile drucken, z.B. weil man nicht so viel Platz hat, so würde in einem "abgeleiteten" Stylesheet einfach die Regel noch einmal implementiert.<fo:inline id="d4e4370" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
               </fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:choose&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;xsl:template</fo:inline> name="render-header"<fo:inline color="#527F3F">&gt;</fo:inline>
    &lt;!-- print a running header on left side --&gt;
    &lt;!-- print logo on right side --&gt;
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">Dieses Template hat nun Vorrang und wird zur Auswertung herangezogen, mit der Konsequenz, dass der Header nur einzeilig gedruckt wird. Das schöne an diesen "Named-Templates"<fo:inline id="d4e4401" color="white" font-size="0pt" visibility="hidden">.</fo:inline> ist auch, dass man sie innerhalb von Variablen verwenden kann:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:variable</fo:inline> name="margin-width"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:call-template</fo:inline> name="get-margin-width"<fo:inline color="#527F3F">/&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:variable&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Das Template <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">get-margin-width</fo:inline>
                  </fo:inline> kann in einem "Sub"-Stylesheet überschrieben werden ohne dass die Variablen-Zugriffe im Core-Stylesheet angepasst werden müssten. Eine Zuweisung, wie:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">width="{<fo:inline color="#7F0037">$margin-width</fo:inline>}"</fo:block>
            
               <fo:block space-after="6pt">müsste nirgendwo im Code nochmal angefasst werden.</fo:block>
            </fo:block><fo:block id="d4e4460" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="13pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                  XSLT Streaming
               </fo:block>
               <fo:block space-after="6pt">Bei grossen flach strukturierten Datenmengen gibt es zwei Möglichkeiten:</fo:block>
            
               
                     <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="7mm">
                           <fo:block space-after="6pt">Für einfache Sammel- und Auswertungsaufgaben schreibt man sich am besten einen kleinen Parser, z.B. mit der Python<fo:inline id="d4e4484" color="white" font-size="0pt" visibility="hidden">.</fo:inline>sgmllib<fo:footnote><fo:inline id="fnsource-d4e4493" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e4493">34)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e4493" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e4493">34)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://docs.python.org/2/library/sgmllib.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>.</fo:block>
                        </fo:list-item-body></fo:list-item></fo:list-block>
                     <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="7mm">
                           <fo:block space-after="6pt">Für komplexere Aufgaben, in denen man nicht an jeder Stelle über den ganzen XML Baum navigiert und sich die Werte zusammensuchen suchen muss, kann man die Streaming Funktion des Saxon XSLT Prozessors verwenden.</fo:block>
                        </fo:list-item-body></fo:list-item></fo:list-block>
                  <fo:block color="white">.</fo:block>
            
               <fo:block space-after="6pt">XSLT Streaming<fo:inline id="d4e4520" color="white" font-size="0pt" visibility="hidden">.</fo:inline> ist in der XSLT Version 3.0<fo:footnote><fo:inline id="fnsource-d4e4529" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e4529">35)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e4529" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e4529">35)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.saxonica.com/html/documentation/sourcedocs/streaming/xslt-streaming.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> neu hinzugekommen und in der
kommerziellen Saxon-EE Löusug <fo:footnote><fo:inline id="fnsource-d4e4538" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e4538">36)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e4538" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e4538">36)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.saxonica.com/html/documentation/sourcedocs/streaming/</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> implementiert. Bei dieser Methode wird kein Eingabebaum im Speicher aufgebaut, was zu einer drastischen Performanzsteigerung<fo:inline id="d4e4544" color="white" font-size="0pt" visibility="hidden">.</fo:inline> führt.</fo:block>
            
               <fo:block space-after="6pt">Es gibt ein paar Regeln, die man bei der Verarbeitung großer Datenmengen über die Streaming Funktionen beachten sollte:</fo:block>
            
               <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Bei einer XPATH Auswertung sollte nur ein einfacher Ausdruck mit höchstens einer konsumierenden Selektion gegeben sein. Konsumieren heißt, dass vom Kontextknoten aus eine Knotenmenge abwärts selektiert wird. Dagegen bleibt die Information bzgl. der Ancestor-Achse erhalten.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Bei einer Selektion sollte man aber darauf achten nur atomarische Werte auszuwählen.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Knotenmengen, die über die Streaming Option eingelesen wurden, können nicht einer Funktion übergeben werden. Sie sind auch nicht einer Variablen zuweisbar.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt" hyphenate="false">"Crawler”-Ausdrücke, wie <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">//section</fo:inline>
                        </fo:inline> sind nicht nicht zu verwenden, ebenso ein rekursiver Abstieg mit Selektion, wie bspw. mit einem <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">apply-templates</fo:inline>
                        </fo:inline> Call.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
            
               <fo:block space-after="6pt">Zu Beginn der Streaming-Aktion kann man sich auf konventionelle Art und Weise Teilbäume, die nicht so performanzlastig aufgebaut werden, in einer Variablen abspeichern und im Verlauf der Streaming-Verarbeitung z.B. für einen Vergleich auswerten.</fo:block>
            <fo:block id="d4e4607" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="11pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                     XSLT Akkumulator
                  </fo:block>
                  <fo:block space-after="6pt">Ein einfaches Streaming Stylesheet könnte z.B. so aussehen:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:stylesheet</fo:inline> version="3.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="#all"<fo:inline color="#527F3F">&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:output</fo:inline> method="xml" indent="yes"<fo:inline color="#527F3F">/&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:mode</fo:inline> on-no-match="shallow-copy" use-accumulators="entry-count" streamable="true"<fo:inline color="#527F3F">/&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:accumulator</fo:inline> name="entry-count" as="xs:integer" initial-value="0" 
                   streamable="yes"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:accumulator-rule</fo:inline> match="entry" select="$value + 1"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:accumulator&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="/"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;result&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:apply-templates/&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;count&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="accumulator-after('entry-count')"<fo:inline color="#527F3F">/&gt;</fo:inline> 
      <fo:inline color="#527F3F">&lt;/count&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/result&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
  
<fo:inline color="#527F3F">&lt;/xsl:stylesheet&gt;</fo:inline></fo:block>
               
                  <fo:block space-after="6pt">Diese Stylesheet hat einige Besonderheiten:</fo:block>
               
                  <fo:block space-after="6pt">Zum einen wird darin ein Default-Modus deklariert, der jeden Knoten der Eingabeinstanz über
eine implizite Identity-Transformation (shallow-copy)<fo:footnote><fo:inline id="fnsource-d4e4704" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e4704">37)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e4704" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e4704">37)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.saxonica.com/html/documentation/xsl-elements/mode.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                     <fo:inline id="d4e4713" color="white" font-size="0pt" visibility="hidden">.</fo:inline>in die Ausgabeinstanz kopiert.</fo:block>
               
                  <fo:block space-after="6pt">Auf herkömmlichem Weg würde man dafür ein Templates wie dieses verwenden:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="node()|@*"
  &lt;xsl:copy<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="node()|@*"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:copy&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
               
                  <fo:block space-after="6pt">Zum anderen wird ein Akkumulator<fo:inline id="d4e4757" color="white" font-size="0pt" visibility="hidden">.</fo:inline> verwendet. Normalerweise gibt es in XSLT keine Variablen,
sondern nur Konstanten, so wie das auch bei funktionalen Programmiersprachen der Fall ist.</fo:block>
               
                  <fo:block space-after="6pt">Es gab zwar schon länger eine Saxon-Erweiterung, die die mehrmalige Zuweisung eines Wertes
an eine Variable erlaubte, im Normallfall braucht man diese Eigenschaft aber nicht.</fo:block>
               
                  <fo:block space-after="6pt">Ber der Verarbeitung sehr großer Datemengen, ist es aber unumgänglich, denn sonst
würde der Laufzeitstapel schnell an seine Grenzen gelangen.</fo:block>
               
                  <fo:block space-after="6pt">Ein Akkumulator akkumuliert Werte, wie der Name schon sagt. Das können atomare Typen sein,
wie im obigen Beispiel, aber auch Datenstrukturen können aufgebaut werden, wie 
bspw. das Abspeichern des gerade prozessierten Teilbaums in einem Dictionary zur 
späteren Auswertung bzw. Gruppierung der Key-Elemente.</fo:block>
               
                  <fo:block space-after="6pt" hyphenate="false">Auch im Akkumulator muss das <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">streamable="yes"</fo:inline>
                     </fo:inline> Property gesetzt sein, wenn er im 
Streaming-Modus arbeiten soll. In diesem Modus kann der Akkumulatorwert erst ausgelesen werden,
wenn der untersuchte Baum vollständig durchlaufen wurde.</fo:block>
               
                  <fo:block space-after="6pt">Um die Unterschiede zum "normalen" XSLT Betrieb festzustellen, können im obigen Beispiel 
einige offensichtlich korrekte Änderungen vorgenommen werden, die der Streaming 
Prozessor allerdings nicht akzeptiert.</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">Cannot call accumulator-after except during the post-descent 
phase of a streaming template</fo:block>
               
                  <fo:block space-after="6pt" hyphenate="false">Diese Fehlermeldung erscheint, wenn man den <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">apply-templates</fo:inline>
                     </fo:inline> Call entfernt. Der Akkumulator
wird also nur befüllt, wenn der Baum auch explizit durchlaufen wurde. Dieser Durchlauf 
kann auch ein reines Kopieren sein, bspw. kann man den <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">apply-templates</fo:inline>
                     </fo:inline> Call auch durch ein</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:copy-of</fo:inline> select="."<fo:inline color="#527F3F">/&gt;</fo:inline></fo:block>
               
                  <fo:block space-after="6pt">ersetzen, was gleichbedeutend mit der Mode Einstellung</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">on-no-match="deep-copy"</fo:block>
               
                  <fo:block space-after="6pt">wäre. Wie man sieht hat sich in XSLT 3.0 viel bzgl. der Handhabung verschiedener
Verarbeitungsmodi getan. Anstatt Default-Match Regeln zu schreiben, kann man ganz oben
am Stylesheet Modus Properties setzen, die den Baumdurchlauf auf verschiedene
Arten realisieren.</fo:block>
               
                  <fo:block space-after="6pt">Die Verarbeitung großer Datenmenden ist aber mit Streaming etwas tricky und es sollte geprüft 
werden, ob ggf. konventionelles Performanz-optimiertes XSLT für den Answendungsfall ausreichen
würde.</fo:block>
               </fo:block><fo:block id="d4e4865" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="11pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                     XSLT Iterator
                  </fo:block>
                  <fo:block space-after="6pt">XSLT Streaming<fo:inline id="d4e4877" color="white" font-size="0pt" visibility="hidden">.</fo:inline> ist ziemlich tricky. Betrachten wir ein einfaches Problem. Es soll ein kommaseparierter Report aus folgender XML Quelle generiert werden.</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;status-report&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;status-change&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;billing_id&gt;</fo:inline>360788<fo:inline color="#527F3F">&lt;/dentaltrac_encounter_id&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;claim_ids&gt;</fo:inline>967382,673647<fo:inline color="#527F3F">&lt;/claim_ids&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;status&gt;</fo:inline>open<fo:inline color="#527F3F">&lt;/status&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;time_stamp&gt;</fo:inline>2019-02-22T13:53:34.605Z<fo:inline color="#527F3F">&lt;/status_time&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/status-change&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;status-change&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;billing_id&gt;</fo:inline>360788<fo:inline color="#527F3F">&lt;/dentaltrac_encounter_id&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;claim_ids&gt;</fo:inline>967382,673647<fo:inline color="#527F3F">&lt;/claim_ids&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;status&gt;</fo:inline>open<fo:inline color="#527F3F">&lt;/status&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;time_stamp&gt;</fo:inline>2019-02-22T13:53:34.605Z<fo:inline color="#527F3F">&lt;/status_time&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/status-change&gt;</fo:inline>
  [...]</fo:block>
               
                  <fo:block space-after="6pt" hyphenate="false">Mit einer <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">for-each</fo:inline>
                     </fo:inline> Loop und einem Named-Template würde das so gehen:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:template</fo:inline> name="main"<fo:inline color="#527F3F">&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;xsl:for-each</fo:inline> select="$input-file/status-report/status-change"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(billing_id,',')"<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(claim_ids,',')"<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(status,',')"<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(format-dateTime(xs:dateTime(time_stamp),
                                        '[Y]-[M]-[D] [H]:[m]'),'&amp;#10;')"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:for-each&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
               
                  <fo:block space-after="6pt" keep-together.within-page="10" font-style="italic" background-color="white" border-top="none" border-bottom="none" margin="0mm" padding-top="1mm" padding-bottom="1mm" padding-left="1mm"><fo:list-block start-indent="0mm" space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label start-indent="2mm"><fo:block color="#808080">►</fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt" hyphenate="false">Named-Templates, die direkt über den Saxon Aufruf <fo:inline font-family="Courier New, monospace" hyphenate="false">
                              <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">saxon -it:main</fo:inline>
                           </fo:inline> aufgerufen werden, sind dann
brauchbar, wenn keine eindeutige Eingabequelle vorhanden ist, bspw. weil aus mehreren
Quellen eingelesen werden soll, wenn die Eingabe von einem Webservice kommt oder 
vom XSLT Skript selbst erzeugt wird.</fo:block>
                        </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/></fo:block>
               
                  <fo:block space-after="6pt">Im vorliegenden Fall wird von einer Datei eingelesen - wir brauchen also kein Named-Template. Statt der  Schleife können wir uns auch auf den rekursiven Abstieg des XSLT Prozessors
verlassen, was den Code weiter vereinfacht:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="/status-report/status-change"<fo:inline color="#527F3F">&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(billing_id,',')"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(claim_ids,',')"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(status,',')"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(format-dateTime(xs:dateTime(time_stamp),
                                      '[Y]-[M]-[D] [H]:[m]'),'&amp;#10;')"<fo:inline color="#527F3F">/&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
               
                  <fo:block space-after="6pt">Wollen wir große Datenmengen schnell verarbeiten mit ein paar Hundert MB, so ist es sinnvoll
auf die neue XSLT3.0 Streaming Option umzuschalten, weil dadurch kein Eingabebaunm in-Memory
aufgebaut wird. Wie schon im Kapitel <fo:inline color="red">ERROR! Linktarget does not exist 9573967e-809c-4d86-8bf1-0381ac6e2b5d</fo:inline> angesprochen, gibt es dazu mehrere Möglichkeiten.</fo:block>
               
                  <fo:block space-after="6pt" hyphenate="false">Wir betrachten hier das <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xsl:iterator</fo:inline>
                     </fo:inline>(Doku)<fo:footnote><fo:inline id="fnsource-d4e5103" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e5103">38)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e5103" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e5103">38)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.saxonica.com/html/documentation/xsl-elements/iterate.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
 Konstrukt und stossen dabei auf einige Fallstricke. Zunächst einmal unsere Settings:</fo:block>
               
                  <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt" hyphenate="false">Wir benutzen <fo:inline font-family="Courier New, monospace" hyphenate="false">
                              <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xsl:source-document</fo:inline>
                           </fo:inline> in Verbindung mit dem <fo:inline font-family="Courier New, monospace" hyphenate="false">
                              <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">streamable='yes'</fo:inline>
                           </fo:inline> Attribut,
um dem Prozessor mitzuteilen, dass er im Streaming Modus arbeiten soll.</fo:block>
                        </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt">Wenn wir die Quelle über einen Parameter einlesen, dann müssen wir auch die Transformation über ein Named-Template
starten.</fo:block>
                        </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
               
                  <fo:block space-after="6pt" hyphenate="false">Ohne zu wissen, wie XSLT Streaming genau funktioniert, setzen wir eine Reihe von <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">value-of select</fo:inline>
                     </fo:inline> statements in den Iterator:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:template</fo:inline> name="main"<fo:inline color="#527F3F">&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;xsl:source-document</fo:inline> href="{$input-file}" streamable='yes'<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:iterate</fo:inline> select="status-report/status-change"<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(billing_id,',')"<fo:inline color="#527F3F">/&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(claim_ids,',')"<fo:inline color="#527F3F">/&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(status,',')"<fo:inline color="#527F3F">/&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(format-dateTime(xs:dateTime(time_stamp),
                                          '[Y]-[M]-[D] [H]:[m]'),'&amp;#10;')"<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/xsl:iterate&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:source-document&gt;</fo:inline> 
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
               
                  <fo:block space-after="6pt">und werden dafür prompt mit einer Fehlermeldung belohnt:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">Static error on line 16 column 64 of report.xsl:
  XTSE3430: The body of the xsl:stream instruction is not streamable
  *  There is more than one consuming operand: {xsl:value-of} on line 18, and
  {xsl:value-of} on line 19</fo:block>
               
                  <fo:block space-after="6pt" hyphenate="false">In diesem Iterator ist also nur eine "konsumierende" <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">value-of</fo:inline>
                     </fo:inline> Operation erlaubt. Um nur einmal zu selektieren, müssen wir - auf Kosten der Lesbarkeit - ziemlich umbauen. Eine Lösung könnte z.B. so aussehen:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;?xml</fo:inline> version="1.0" encoding="UTF-8"?<fo:inline color="#527F3F">&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;xsl:stylesheet</fo:inline> xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs"
  xpath-default-namespace="https://tekturcms.de/schema/status-report/1.0"
  version="3.0"<fo:inline color="#527F3F">&gt;</fo:inline>
   
  <fo:inline color="#527F3F">&lt;xsl:param</fo:inline> name="input-file" required="yes"<fo:inline color="#527F3F">/&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:output</fo:inline> method="text"<fo:inline color="#527F3F">/&gt;</fo:inline>
 
  &lt;!-- https://www.saxonica.com/html/documentation/xsl-elements/iterate.html --&gt;

  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> name="main"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:source-document</fo:inline> href="{$input-file}" streamable='yes'<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:iterate</fo:inline> select="status-report/status-change/*"<fo:inline color="#527F3F">&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;xsl:choose&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;xsl:when</fo:inline> test="name()='time_stamp'"<fo:inline color="#527F3F">&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(format-dateTime(xs:dateTime(time_stamp),
                                               '[Y]-[M]-[D] [H]:[m]'),'&amp;#10;')"<fo:inline color="#527F3F">/&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;/xsl:when&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;xsl:otherwise&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="concat(.,',')"<fo:inline color="#527F3F">/&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;/xsl:otherwise&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;/xsl:choose&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/xsl:iterate&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/xsl:source-document&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>  
<fo:inline color="#527F3F">&lt;/xsl:stylesheet&gt;</fo:inline>
</fo:block>
               
                  <fo:block space-after="6pt" hyphenate="false">Hier wird davon ausgegangen, dass das Element mit Namen 'time_stamp' als letztes in der Sequenz vorkommt und beim Auftreten (<fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">&amp;#10;</fo:inline>
                     </fo:inline>) wird ein Zeilenumbruch gesetzt. Der deklarative Ansatz aus dem ersten Beispiel geht dabei verloren. </fo:block>
               
                  <fo:block space-after="6pt" keep-together.within-page="10" font-style="italic" background-color="white" border-top="none" border-bottom="none" margin="0mm" padding-top="1mm" padding-bottom="1mm" padding-left="1mm"><fo:list-block start-indent="0mm" space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label start-indent="2mm"><fo:block color="#808080">►</fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt">Logisch wird beim XSLT Streaming auf einer niedrigeren Abstraktionsebene programmiert, um den Anforderungen des Prozessors gerecht zu werden.</fo:block>
                        </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/></fo:block>
               
                  <fo:block space-after="6pt">Für eine <fo:inline font-weight="bold">1.6 GB Datei</fo:inline> benötigt das obige Skript auf meinem Rechner gute<fo:inline font-weight="bold"> drei Minuten</fo:inline>. Der traditionelle temlate-match Ansatz bricht mit einer Out-of-Memory Exception ab, selbst wenn man den Java Heap Size auf 4GB einstellt.</fo:block>
               </fo:block></fo:block><fo:block id="d4e5374" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="13pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                  Identifikation mit <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">generate-id()</fo:inline>
                  </fo:inline>
               
               </fo:block>
               <fo:block space-after="6pt" hyphenate="false">Die <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">generate-id()</fo:inline>
                  </fo:inline> Funktion gibt es in XSLT schon immer. Mit ihr kann eine Prüfsumme eines Knotens im Baum generiert werden.</fo:block>
            
               <fo:block space-after="6pt">Das funktioniert natürlich nur, wenn man bei der Auswertung dieses Wertes nicht den Kontext wechselt. D.h. z.B. dass ein Knoten in einem Baum,
der in einer Variablen gespeichert ist, eine andere Prüfsumme bekommt, als derselbe Knoten im Kontext-Baum.</fo:block>
            
               <fo:block space-after="6pt">Ein Anwendungszenario wäre bspw. die Generierung einer Target-ID für ein Bauteil in einer Stückliste. Das Bauteil ist nur einmal im 
System erfasst, hat also eine eindeutige ID, soll aber an mehreren Stellen in die Ausgabe (Eine Dokumentation für eine Maschine)
generiert werden.</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Die Id an einem Element <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">&lt;part id=“1234”&gt;</fo:inline>
                  </fo:inline> würde somit mehrfach in die XML Eingabe für einen XSL-FO Prozessor erscheinen und ist 
für Referenzen unbrauchbar geworden.  Deshalb ist es ratsam beim Rendern der Bauteile eine neue Id zu vergeben, das kann z.B. 
mit den folgenden Templates (vereinfacht) passieren:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:key</fo:inline> name="parts" match="part" use="@id"<fo:inline color="#527F3F">/&gt;</fo:inline>
  
<fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match=“part” mode=“content"<fo:inline color="#527F3F">&gt;</fo:inline>
  &lt;!-- Ausgabe des Bauteils im Content Bereich --&gt;
  <fo:inline color="#527F3F">&lt;fo:block</fo:inline> id="{generate-id()}"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;fo:external-graphic</fo:inline> xsl:use-attribute-sets="part.img"<fo:inline color="#527F3F">/&gt;</fo:inline>  
  <fo:inline color="#527F3F">&lt;/fo:block&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
    
<fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match=“part” mode=“part-list"<fo:inline color="#527F3F">&gt;</fo:inline>
  &lt;!-- Ausgabe einer Liste mit allen Verweisen an unterschiedicher Stelle --&gt;
  <fo:inline color="#527F3F">&lt;fo:block&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:for-each</fo:inline> select="key('parts',@id)"<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;fo:page-number-citation</fo:inline> ref-id="{generate-id()}"<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/xsl:for-each&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/fo:block&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">Im Bereich EDI Datenaustausch werden große XML Dateien versendet, die man auf einzelne Transmissions 
aufsplitten will, um sie in einer <fo:inline color="red">ERROR! Linktarget does not exist 18ee2c22-0163-4c54-af55-c15a807a817b</fo:inline> abspeichern zu können. Die Struktur einer Datenübertragung
könnte folgendermassen aussehen:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">WRAPPER1
  SEQUENZ1
  SEQUENZ2
  SEQUENZ3
  WRAPPER2
    SEQUENZ1
    SEQUENZ2
    SEQUENZ3
    SEQUENZ4
    WRAPPER3
      SEQUENZ1
      SEQUENZ2
      CONTENT
        DATA1
        DATA2
        DATA3
        DATA4
        DATA5
      CONTENT
        DATA1
        DATA2
        DATA3
        DATA4
        DATA5
      WRAPPER4
        SEQUENZ1
      CONTENT
        DATA1
        DATA2
        DATA3
        DATA4
        DATA5
      [...]</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Jedes einzelne <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">CONTENT</fo:inline>
                  </fo:inline> Element soll nun einen Mantel erhalten und separat in einer Datei abgelegt werden.
Der "Umschlag" soll dabei alle Elemente des Rahmens der Transmission erhalten. Also alles auf der
Descendant-Achse bis zum Element <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">WRAPPER3</fo:inline>
                  </fo:inline>, ausserdem noch die Elemente <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">SEQUENZ1</fo:inline>
                  </fo:inline> und <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">SEQUENZ2</fo:inline>
                  </fo:inline>,
sowie das Element <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">WRAPPER4</fo:inline>
                  </fo:inline> mit Kind <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">SEQUENZ1</fo:inline>
                  </fo:inline>. Ohne groß auf die Performanz zu achten, könnte das recht einfach so realisiert werden:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:stylesheet</fo:inline> xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0"<fo:inline color="#527F3F">&gt;</fo:inline>
    
  <fo:inline color="#527F3F">&lt;xsl:output</fo:inline> method="xml" indent="yes"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;xsl:strip-space</fo:inline> elements="*"<fo:inline color="#527F3F">/&gt;</fo:inline>
  
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="/"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="/WRAPPER1/WRAPPER2/WRAPPER3/CONTENT" mode="umschlag"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
    
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="CONTENT" mode="umschlag"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:result-document</fo:inline> href="{concat(@id,'.xml')}"<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;umschlag&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;metadaten&gt;</fo:inline>&lt;!-- einige Metadaten --&gt;<fo:inline color="#527F3F">&lt;/env:metadata&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;nutzdaten&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="ancestor::WRAPPER1"<fo:inline color="#527F3F">&gt;</fo:inline>
              <fo:inline color="#527F3F">&lt;xsl:with-param</fo:inline> name="this-id" select="generate-id()" tunnel="yes"<fo:inline color="#527F3F">/&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;/xsl:apply-templates&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;/nutzdaten&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/umschlag&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/xsl:result-document&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>

  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="node()|@*"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:copy&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="node()|@*"<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/xsl:copy&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
    
  <fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="CONTENT"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:param</fo:inline> name="this-element" tunnel="yes"<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:if</fo:inline> test="$this-id = generate-id()"<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:copy&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="node()|@*"<fo:inline color="#527F3F">/&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/xsl:copy&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/xsl:if&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline>
    
<fo:inline color="#527F3F">&lt;/xsl:stylesheet&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Im rekursiven Abstieg wird im Modus "umschlag" jedes <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">CONTENT</fo:inline>
                  </fo:inline> Element selektiert und
in einen Umschlag verpackt. Der eigentlich Inhalt des Umschlags wird generiert,
indem der gesamte XML Baum über die Standard-Kopierregel in das Element <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">&lt;nutzdaten&gt;</fo:inline>
                  </fo:inline> gesetzt wird. Dabei wird aber nur derjenige <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">CONTENT</fo:inline>
                  </fo:inline> Abschnitt evaluiert, der - zu der als Parameter übergebenen - generierten Id passt.</fo:block>
            </fo:block><fo:block id="d4e5743" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="13pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                  Reguläre Ausdrücke
               </fo:block>
               <fo:block space-after="6pt">Manchmal reicht für das Durchsuchen des XML Baums XPATH nicht mehr aus und man will auf den Textknoten reguläre Ausdrücke aufrufen. Mir sind derzeit drei XPATH Funktionen bekannt, in denen man XPATH angeben kann:</fo:block>
            
               <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt" hyphenate="false">
                        <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">fn:matches(subject, pattern, flags)</fo:inline>
                        </fo:inline>
                     </fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt" hyphenate="false">
                        <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">fn:replace(subject, pattern, replacement, flags)</fo:inline>
                        </fo:inline>
                     </fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt" hyphenate="false">
                        <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">fn:tokenize(subject, pattern, flags)</fo:inline>
                        </fo:inline>
                     </fo:block>
                     </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Bei der Eingabe des regulaären Ausdrucks muss man natürlich Zeichen, wie <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">&gt;,&lt;,&amp;</fo:inline>
                  </fo:inline> maskieren, was den Ausdruck im Gegensatz zur herkömmlichen Nicht-XML Programmierung noch ein bisschen komplizierter macht.</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Der Audruck, der bspw. auf alle XML Tags matched ist folgender: <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">&amp;lt;[^&amp;gt;^!]+&amp;gt;</fo:inline>
                  </fo:inline>. Hier sind die für XML reservierten Zeichen bereits maskiert.</fo:block>
            
               <fo:block space-after="6pt">Es gibt aber auch ein eigenes XSLT Konstrukt, unabhängig von XPATH, um reguläre Ausdrücke anwenden zu können. Der Quelltext dazu sieht so aus:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="text()[parent::xml-code]"<fo:inline color="#527F3F">&gt;</fo:inline>
  &lt;xsl:analyze-string select="." regex="&amp;lt;[^&amp;gt;^!]+&amp;gt;"&gt;
    <fo:inline color="#527F3F">&lt;xsl:matching-substring&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;b&gt;</fo:inline><fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="."<fo:inline color="#527F3F">/&gt;</fo:inline><fo:inline color="#527F3F">&lt;/b&gt;</fo:inline>     
    <fo:inline color="#527F3F">&lt;/xsl:matching-substring&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;xsl:non-matching-substring&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="."<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/xsl:non-matching-substring&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Hier wird jeder Textknoten eines Elements untersucht und falls ein XML-Tag enthalten ist, so wird dieses über die <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xsl:matching-substring</fo:inline>
                  </fo:inline> Anweisung in ein <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">&lt;b&gt;</fo:inline>
                  </fo:inline> Tag gewrapped. Im nächsten Transformationsschritt wird dieses wiederum in Fettschrift dargestellt.</fo:block>
            
               <fo:block space-after="6pt">Das ist ein einfacher Syntax-Highlighter für XML Quelltexte. Auf diese Weise ist der Syntax-Highlighter für dieses PDF realisiert.</fo:block>
            
               <fo:block space-after="6pt" keep-together.within-page="10" font-style="italic" background-color="white" border-top="none" border-bottom="none" margin="0mm" padding-top="1mm" padding-bottom="1mm" padding-left="1mm"><fo:list-block start-indent="0mm" space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label start-indent="2mm"><fo:block color="#808080">►</fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt" hyphenate="false">Man kann auch die <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xsl:analyze-string</fo:inline>
                        </fo:inline> Elemente in den <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xsl:matching-substring</fo:inline>
                        </fo:inline> und <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xsl:non-matching-substring</fo:inline>
                        </fo:inline> Elementen verschachteln, was natürlich noch wesentlich kompliziertere Problemstellungen erlaubt.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/></fo:block>
            </fo:block><fo:block id="d4e5933" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="13pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                  Webservice Calls mit <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">doc()</fo:inline>
                  </fo:inline> und <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">unparsed-text()</fo:inline>
                  </fo:inline>
               
               </fo:block>
               <fo:block space-after="6pt" hyphenate="false">Eine verbreitete Paxis ist es, mit der Funktion <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">document()</fo:inline>
                  </fo:inline> oder kurz <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">doc()</fo:inline>
                  </fo:inline> 
entfernte Ressourcen in die Transformation einzubinden. 
Bei einer Schematron-Validierung, würde bspw. eine Regel, wie:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;sch:not-assert</fo:inline> id="personal-check"
    role="error"
    test="doc(concat('https://tekturcms.de/personal.xqy?personal-id=',personal-id))/kuendigung"<fo:inline color="#527F3F">&gt;</fo:inline>
        Angestellter mit ID "<fo:inline color="#527F3F">&lt;sch:value-of</fo:inline> select="personal-id"<fo:inline color="#527F3F">/&gt;</fo:inline>" hat gekündigt!
<fo:inline color="#527F3F">&lt;/sch:not-assert&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">einen entferneten Webservice aufrufen und prüfen, ob für den Angestellten mit <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">personal-id</fo:inline>
                  </fo:inline>
eine Kündigung vorliegt. Ist dies der Fall, so ist die negative Zusicherung <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">not-assert</fo:inline>
                  </fo:inline> nicht
erfüllt und die Schematron Regel feuert - was sich wohl im einfachsten Fall in einem 
Logfile Eintrag äussern sollte.</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Was vermutlich viele noch nicht kennen - ich nehme jetzt einfach mal an, dass mein 
bisheriger Kenntnisstand dem der Mehrheit der XML-Entwickler entspricht - ist der Umstand,
dass auch die Funktion <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">unparsed-text()</fo:inline>
                  </fo:inline> eine URL als Parameter nimmt:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;xsl:template</fo:inline> match="angestellter"
    &lt;xsl:copy<fo:inline color="#527F3F">&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;xsl:apply-templates</fo:inline> select="node()|@*"<fo:inline color="#527F3F">/&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;hat-gekuendigt&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;xsl:sequence</fo:inline> select="json-to-xml(
                                  unparsed-text(
                                  concat('https://tekturcms.de/personal.xqy?personal-id=',
                                  personal-id))))/descendant::*[@key='gekuendigt']/text()"<fo:inline color="#527F3F">/&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;/hat-gekuendigt&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/xsl:copy&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/xsl:template&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Während mit <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">doc()</fo:inline>
                  </fo:inline> oder <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">document()</fo:inline>
                  </fo:inline> ein zurückgeliefertes XML Fragment 
prozessiert wird, erwartet <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">unparsed-text()</fo:inline>
                  </fo:inline> z.B. einen <fo:inline font-weight="bold">JSON-String</fo:inline>, der dann mittels
der Funktion <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">json-to-xml()</fo:inline>
                  </fo:inline> nach XML konvertiert werden kann.</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Beispielsweise könnte die Gegenseite zum <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">angestellter</fo:inline>
                  </fo:inline> Template mittels XQuery
folgendermassen realisiert sein:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">xquery version "1.0-ml";

<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">variable </fo:inline><fo:inline color="#7F0037">$personal-id</fo:inline> := <fo:inline color="#000099">xdmp:get-request-field</fo:inline>('personal-id');

<fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$gekuendigt</fo:inline> := <fo:inline color="#7F3300">if </fo:inline>(collection('/personal')/*[personal-id = <fo:inline color="#7F0037">$personal-id</fo:inline> and 
                                                 <fo:inline color="#000099">fn:exists</fo:inline>(kuendingung)] <fo:inline color="#7F3300">then </fo:inline>
                                                 'ja' else 'nein'
<fo:inline color="#7F3300">return </fo:inline>
    <fo:inline color="#000099">common:render-response</fo:inline>(concat('{"gekuendigt":"',<fo:inline color="#7F0037">$gekuendigt</fo:inline>,'",
                                    "personal-id":"',<fo:inline color="#7F0037">$personal-id</fo:inline>,'"}'))</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">(<fo:inline color="red">ERROR! Linktarget does not exist 86e61dc1-c690-4420-b3ce-83c39c6bf091</fo:inline>, wie <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">render-response()</fo:inline>
                  </fo:inline>))</fo:block>
            
               <fo:block space-after="6pt">Das zurückgeklieferte JSON Dokument sieht dann so aus:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">{"gekuendig":"ja","personal-id":"q5687500"}</fo:block>
            
               <fo:block space-after="6pt">Konvertiert nach XML erhält man eine Map Struktur:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;map</fo:inline> xmlns="http://www.w3.org/2005/xpath-functions"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;string</fo:inline> key="gekuedigt"<fo:inline color="#527F3F">&gt;</fo:inline>ja<fo:inline color="#527F3F">&lt;/string&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;string</fo:inline> key="personal-id"<fo:inline color="#527F3F">&gt;</fo:inline>q5687500<fo:inline color="#527F3F">&lt;/string&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/map&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">was den Selektorausdruck im obigen XPATH erklärt:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">json-to-xml(
unparsed-text(
concat('https://tekturcms.de/personal.xqy?personal-id=',
personal-id))))/descendant::*[@key='gekuendigt']/text()</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Resultat der Konvertierung wäre also dann - wie erwartet - ein um 
das <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">gekuendigt</fo:inline>
                  </fo:inline> Flag erweitertes <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">&lt;angestellter&gt;</fo:inline>
                  </fo:inline>
Element:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;angestellter&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;perosnal-id&gt;</fo:inline>q5687500<fo:inline color="#527F3F">&lt;/perosnal-id&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>Alex<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
    [...]
    <fo:inline color="#527F3F">&lt;gekuendigt&gt;</fo:inline>nein<fo:inline color="#527F3F">&lt;/gekuendigt&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/angestellter&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">Sicherlich wird der XML Entwicler eine <fo:inline color="red">ERROR! Linktarget does not exist 997e18de-4390-4b97-9f13-5198617f39e4</fo:inline>, wie MarkLogic, vorziehen
und sich gleich XML Fragmente ausliefern laasen.  ist aber bspw. mit
MongoDB<fo:footnote><fo:inline id="fnsource-d4e6281" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e6281">39)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e6281" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e6281">39)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.mongodb.com/</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
realisiert, die auf JSON arbeitet... Nicht zuletzt deshalb finde ich JSON Verarbeitung
mit XSLT recht spannend.</fo:block>
            </fo:block></fo:block><fo:block id="d4e6294" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="14pt" provisional-distance-between-starts="10mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
               Abfragen mit XQuery 
            </fo:block>
            <fo:block space-after="6pt">Xquery<fo:inline id="d4e6306" color="white" font-size="0pt" visibility="hidden">.</fo:inline> führt im Publishing-Bereich ein Schattendasein. In meiner Zeit als XSL Programmierer für zwei Publishing  Firmen hatte ich damit nie zu tun. Erst als ich näher an den eigentlichen Daten war und mit <fo:inline color="red">ERROR! Linktarget does not exist b5da4c72-c065-4578-81ae-e8bf121d1629</fo:inline> zu tun hatte, kam ich mit XQuery in Berührung.</fo:block>
         
            <fo:block space-after="6pt">Während relationale Datenbanken mit SQL abgefragt werden, verwendet man bei XML Datenbanken, wie eXist<fo:footnote><fo:inline id="fnsource-d4e6324" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e6324">40)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e6324" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e6324">40)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://exist-db.org/exist/apps/homepage/index.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> oder Marklogic<fo:footnote><fo:inline id="fnsource-d4e6333" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e6333">41)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e6333" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e6333">41)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.marklogic.com/</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>, XQuery als Abfragesprache.</fo:block>
         
            <fo:block space-after="6pt">Aber auch einzelne XML Dokumente können z.B. in Oxygen XML Editor<fo:inline id="d4e6348" color="white" font-size="0pt" visibility="hidden">.</fo:inline> mit dem XQuery Builder Tool<fo:footnote><fo:inline id="fnsource-d4e6357" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e6357">42)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e6357" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e6357">42)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.oxygenxml.com/xml_editor/xquery_builder.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> oder auch per Saxon Kommandozeile abgefragt werden:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">java -cp usr/lib/saxon/saxon.jar net.sf.saxon.Query 
     -s:"schulen.xml" 
     -qs:"/schulen/schule[id='6']" 
     -o:"/Users/Alex/Desktop/schule_6.xml"</fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">Mit der Option <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">-qs</fo:inline>
               </fo:inline> kann hier der Querystring angebenen werden. </fo:block>
         
            <fo:block space-after="6pt">Wie man an dem einfachen Beispiel schon sieht, ist XQuery mit XPath verwandt. XQuery umfasst den Sprachumfang von XPath bietet aber zusätzlich die FLOWR Syntax um mächtigere Abfragen stellen zu können. Mittels weiterer Extensions<fo:footnote><fo:inline id="fnsource-d4e6391" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e6391">43)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e6391" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e6391">43)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://cs.au.dk/~amoeller/XML/querying/flwrexp.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> können aber auch ganze Programme erstellt werden, die weit über die Funktionalität einer "Abfragesprache" hinausgehen.</fo:block>
         
            <fo:block space-after="6pt">Oxygen XML Editor<fo:footnote><fo:inline id="fnsource-d4e6412" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e6412">44)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e6412" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e6412">44)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.oxygenxml.com/xml_editor</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> bietet eine schöne Möglichkeit XQuery-Abfragen 
auf einem geladenen XML Dokument auszuführen. Dazu kann man 
seine Query in das betreffende Eingabefenster schreiben.</fo:block>
         
            <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Mit dem XQuery Builder von oXygen lassen sich unkompliziert Queries testen</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/0846d6a2-6999-42ab-9e83-55bc197fc11c/xquery-builder.png" content-height="" content-width="auto"/></fo:block></fo:block>
                  <fo:block id="d4e6429" font-weight="bold" margin-bottom="12pt" keep-with-previous.within-page="always"><fo:inline wrap-option="no-wrap">Bild 5:</fo:inline> oXygen XQuery Builder</fo:block>
               
         
            <fo:block space-after="6pt">Mit folgendem Ergebnis:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;dates&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;today&gt;</fo:inline>2019-01-16+01:00<fo:inline color="#527F3F">&lt;/today&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;formatted&gt;</fo:inline>Wednesday, 16th January 2019<fo:inline color="#527F3F">&lt;/formatted&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/dates&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">FLOWR<fo:inline id="d4e6479" color="white" font-size="0pt" visibility="hidden">.</fo:inline> steht für <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">for, let, where, order by, return</fo:inline>
               </fo:inline>. Das sind die Query-Anweisungen, die in 
dem Ausdruck erlaubt sind - in genau dieser Reihenfolge.</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$bibliothek</fo:inline> := .
<fo:inline color="#7F3300">for </fo:inline><fo:inline color="#7F0037">$x</fo:inline><fo:inline color="#7F3300">in </fo:inline><fo:inline color="#7F0037">$bibliothek</fo:inline>//buecher,
    <fo:inline color="#7F0037">$y</fo:inline><fo:inline color="#7F3300">in </fo:inline><fo:inline color="#7F0037">$bibliothek</fo:inline>//autoren/autor
<fo:inline color="#7F3300">where </fo:inline>starts-with(<fo:inline color="#7F0037">$autor</fo:inline>, 'Grass')
    and <fo:inline color="#7F0037">$x</fo:inline>/@autorId = <fo:inline color="#7F0037">$y</fo:inline>/@id
<fo:inline color="#7F3300">return </fo:inline><fo:inline color="#7F0037">$x</fo:inline>/titel</fo:block>
         
            <fo:block space-after="6pt">In dieser Query werden die Titel aller Bücher von Grass zurückgeliefert.
Bemerkenswert ist hier die Syntax.</fo:block>
         
            <fo:block space-after="6pt" keep-together.within-page="10" font-style="italic" background-color="white" border-top="none" border-bottom="none" margin="0mm" padding-top="1mm" padding-bottom="1mm" padding-left="1mm"><fo:list-block start-indent="0mm" space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label start-indent="2mm"><fo:block color="#808080">►</fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                     <fo:block space-after="6pt">Normalerweise würde man zwischen den
einzelnen Anweisungen einen Blockabschluss, wie ein Semikolon erwarten.
Da wir aber hier funtional prorgammieren, ist die Sache etwas anders...</fo:block>
                  </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/></fo:block>
         
            <fo:block space-after="6pt">Es ist aber auch möglich XML zu erzeugen, wobei natürlich für eine Transformation XSLT 
vorzuziehen ist. Dazu werden Tags direkt in die Expression geschrieben, wie z.B. hier:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">variable </fo:inline><fo:inline color="#7F0037">$nachname</fo:inline> as xs:string external;
<fo:inline color="#527F3F">&lt;buecher</fo:inline> autor="{$nachname}"<fo:inline color="#527F3F">&gt;</fo:inline>
{
  <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$bibliothek</fo:inline> := .
  <fo:inline color="#7F3300">for </fo:inline><fo:inline color="#7F0037">$x</fo:inline><fo:inline color="#7F3300">in </fo:inline><fo:inline color="#7F0037">$bibliothek</fo:inline>/buecher//buch,
      <fo:inline color="#7F0037">$y</fo:inline><fo:inline color="#7F3300">in </fo:inline><fo:inline color="#7F0037">$bibliothek</fo:inline>/autoren//autor
  <fo:inline color="#7F3300">where </fo:inline>starts-with(<fo:inline color="#7F0037">$y</fo:inline>, <fo:inline color="#7F0037">$nachname</fo:inline>)
      and <fo:inline color="#7F0037">$x</fo:inline>/@autorId = <fo:inline color="#7F0037">$y</fo:inline>/@id
  <fo:inline color="#7F3300">order </fo:inline>by <fo:inline color="#7F0037">$x</fo:inline>/ausgabe
  return
  <fo:inline color="#527F3F">&lt;buch</fo:inline> ausgabe="{$x/ausgabe}"<fo:inline color="#527F3F">&gt;</fo:inline>
    {<fo:inline color="#7F0037">$x</fo:inline>/titel}
  <fo:inline color="#527F3F">&lt;/buch&gt;</fo:inline>
}
<fo:inline color="#527F3F">&lt;/buecher&gt;</fo:inline></fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">Speichert man dieses Schnippsel in einer Datei <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">buecher.xquery</fo:inline>
               </fo:inline> ab,
so kann man mit der folgenden Kommandozeile auf einer <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">buecher.xml</fo:inline>
               </fo:inline> Datei als Eingabe suchen:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">java -cp usr/lib/saxon/saxon.jar net.sf.saxon.Query -t -s:buecher.xml 
                                                       -q:buecher.xquery 
                                                       -o:ergebnis.xml 
                                                       nachname=grass</fo:block>
         
            <fo:block space-after="6pt">Document Projection<fo:footnote><fo:inline id="fnsource-d4e6680" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e6680">45)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e6680" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e6680">45)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://www.saxonica.com/documentation/#!sourcedocs/projection</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
               <fo:inline id="d4e6689" color="white" font-size="0pt" visibility="hidden">.</fo:inline>  ist ein verstecktes Saxon XQuery Feature. Es funktioniert nur für eine einzige Abfrage.
Das kann schon recht hilfreich sein, wenn man ein mehrere 100MB großes Dokument durchsuchen
will.</fo:block>
         
            <fo:block space-after="6pt">Ohne Projection würde das Beispiel von oben so verarbeitet:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">java -cp usr/lib/saxon/saxon.jar net.sf.saxon.Query -t 
     -s:buecher.xml 
     -q:buecher.xquery 
     -o:ergebnis.xml 
     -projection:off 
     nachname=grass
Saxon-EE 9.7.0.20J from Saxonica
Java version 1.8.0_60
Using license serial number V005095
Analyzing query from Desktop/buecher.xquery
Generating byte code...
Analysis time: 201.10095 milliseconds
Processing file:/Users/Alex/buecher.xml
Using parser com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl<fo:inline color="#7F0037">$JAXPSAXParser</fo:inline>
Building tree <fo:inline color="#7F3300">for </fo:inline>file:/Users/Alex/buecher.xml 
using class net.sf.saxon.tree.tiny.TinyBuilder
Tree built<fo:inline color="#7F3300">in </fo:inline>3.482278ms
Tree size: 46 nodes, 58 characters, 6 attributes
Execution time: 27.137589ms
Memory used: 67031664</fo:block>
         
            <fo:block space-after="6pt" hyphenate="false">Mit der Option <fo:inline font-family="Courier New, monospace" hyphenate="false">
                  <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">-projection:on</fo:inline>
               </fo:inline> verändert sich die Ausführungszeit signifikant:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">[...]

Document projection <fo:inline color="#7F3300">for </fo:inline>file:/Users/Alex/buecher.xml
-- Input nodes 50; output nodes 27; reduction = 46%
Tree built<fo:inline color="#7F3300">in </fo:inline>3.80615ms
Tree size: 26 nodes, 58 characters, 3 attributes
Execution time: 15.83463ms
Memory used: 64339064</fo:block>
         <fo:block id="d4e6745" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="13pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                  XQuery als Programmiersprache
               </fo:block>
               <fo:block space-after="6pt">Erste Schritte in XQuery gehen sehr schön  
mit der Query Konsole auf dem Marklogic Server (Port 8000).
Hat man parallel auch noch oXygen Editor offen, kann man die Testergebnisse aus der Konsole direkt in ein XQuery Server Skript packen.</fo:block>
            
               <fo:block space-after="6pt">Die ersten 10 Dokumente auf dem Server bekommt man z.B. mit:<fo:inline id="d4e6769" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
               </fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">(doc())[position() lt 11]</fo:block>
            
               <fo:block space-after="6pt">Die Zahlen von 1 bis 100 mit:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">(<fo:inline color="#7F3300">for </fo:inline><fo:inline color="#7F0037">$i</fo:inline><fo:inline color="#7F3300">in </fo:inline>(1 to 100) <fo:inline color="#7F3300">return </fo:inline><fo:inline color="#7F0037">$i</fo:inline>)</fo:block>
            
               <fo:block space-after="6pt">Wenn man diese beide Anweisungen untereinander in die Konsole
schreibt bekommt man einen Fehler. Trennt man sie mit einem 
Komma - ein Tupel wird erzeugt - dann klappt es.</fo:block>
            
               <fo:block space-after="6pt">Der Befehl zum Anlegen eines Dokuments in der Marklogic DB sieht
folgendermassen aus (Doku)<fo:footnote><fo:inline id="fnsource-d4e6827" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e6827">46)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e6827" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e6827">46)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://docs.marklogic.com/xdmp:document-insert</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>:<fo:inline id="d4e6836" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
               </fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#000099">xdmp:document-insert</fo:inline>(
  "/alex-test/example-alex.xml",
  <fo:inline color="#527F3F">&lt;root&gt;</fo:inline>Hier steht der Content<fo:inline color="#527F3F">&lt;/root&gt;</fo:inline>, 
  <fo:inline color="#527F3F">&lt;options</fo:inline> xmlns="xdmp:document-insert"<fo:inline color="#527F3F">&gt;</fo:inline>  
    <fo:inline color="#527F3F">&lt;metadata&gt;</fo:inline>{
      <fo:inline color="#000099">map:map</fo:inline>() =&gt; <fo:inline color="#000099">map:with</fo:inline>("valid-start", "2014-06-03T14:13:05.472585-07:00")
      =&gt; <fo:inline color="#000099">map:with</fo:inline>("valid-end", "9999-12-31T11:59:59Z")
      }<fo:inline color="#527F3F">&lt;/metadata&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/options&gt;</fo:inline>)</fo:block>
            
               <fo:block space-after="6pt">Packt man diese Instruktion in die for-Schleife oben, dann sieht das Konstrukt so aus:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">(<fo:inline color="#7F3300">for </fo:inline><fo:inline color="#7F0037">$i</fo:inline><fo:inline color="#7F3300">in </fo:inline>(1 to 10) <fo:inline color="#7F3300">return </fo:inline>
  <fo:inline color="#000099">xdmp:document-insert</fo:inline>(
  concat("/alex-test/example-alex-",<fo:inline color="#7F0037">$i</fo:inline>,".xml"),
  <fo:inline color="#527F3F">&lt;root&gt;</fo:inline>Hier steht der Content {<fo:inline color="#7F0037">$i</fo:inline>}<fo:inline color="#527F3F">&lt;/root&gt;</fo:inline>, 
  <fo:inline color="#527F3F">&lt;options</fo:inline> xmlns="xdmp:document-insert"<fo:inline color="#527F3F">&gt;</fo:inline>  
    <fo:inline color="#527F3F">&lt;metadata&gt;</fo:inline>{
      <fo:inline color="#000099">map:map</fo:inline>() =&gt; <fo:inline color="#000099">map:with</fo:inline>("valid-start", "2014-06-03T14:13:05.472585-07:00")
      =&gt; <fo:inline color="#000099">map:with</fo:inline>("valid-end", "9999-12-31T11:59:59Z")
      }<fo:inline color="#527F3F">&lt;/metadata&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/options&gt;</fo:inline>)
)</fo:block>
            
               <fo:block space-after="6pt">Dokumente kann man einer Collection<fo:inline id="d4e6954" color="white" font-size="0pt" visibility="hidden">.</fo:inline> zuweisen, um sie leichter finden und auswerten
zu können. Das geht mit dem folgenden Befehl (Doku)<fo:footnote><fo:inline id="fnsource-d4e6963" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e6963">47)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e6963" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e6963">47)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://docs.marklogic.com/xdmp:document-add-collections</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> und diesem Schnippsel:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$root</fo:inline> :=
<fo:inline color="#527F3F">&lt;mein-test&gt;</fo:inline>
   <fo:inline color="#527F3F">&lt;id&gt;</fo:inline>{<fo:inline color="#7F0037">$id</fo:inline>}<fo:inline color="#527F3F">&lt;/id&gt;</fo:inline>
   <fo:inline color="#527F3F">&lt;content&gt;</fo:inline>Hallo Welt!<fo:inline color="#527F3F">&lt;/content&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/mein-test&gt;</fo:inline>,
<fo:inline color="#7F0037">$options</fo:inline> :=
<fo:inline color="#527F3F">&lt;options</fo:inline> xmlns="xdmp:document-insert"<fo:inline color="#527F3F">&gt;</fo:inline>  
  <fo:inline color="#527F3F">&lt;permissions&gt;</fo:inline><fo:inline color="#000099">{xdmp:default-permissions</fo:inline>()}<fo:inline color="#527F3F">&lt;/permissions&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;collections&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;collection&gt;</fo:inline>/alex-test<fo:inline color="#527F3F">&lt;/collection&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/collections&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/options&gt;</fo:inline>,
<fo:inline color="#7F0037">$fname</fo:inline> := concat('/',<fo:inline color="#7F0037">$id</fo:inline>,'_','.xml'),
<fo:inline color="#7F0037">$td</fo:inline> := <fo:inline color="#000099">xdmp:document-insert</fo:inline>(<fo:inline color="#7F0037">$fname</fo:inline>,<fo:inline color="#7F0037">$root</fo:inline>,<fo:inline color="#7F0037">$options</fo:inline>)
<fo:inline color="#7F3300">return </fo:inline>
  [...]</fo:block>
            
               <fo:block space-after="6pt">Die Dokumente, die mit der Collection alex-test getaggt wurden, kann man sich mit der folgenden Schleife ausgeben lassen:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#7F3300">for </fo:inline><fo:inline color="#7F0037">$x</fo:inline><fo:inline color="#7F3300">in </fo:inline>collection("/alex-test")
  return
    <fo:inline color="#000099">fn:document-uri</fo:inline>(<fo:inline color="#7F0037">$x</fo:inline>)</fo:block>
            <fo:block id="d4e7090" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="11pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                     Funktionen und Module
                  </fo:block>
                  <fo:block space-after="6pt">Um bestimmte Abschnitte des XQuery Programm wiederverwendbar zu machen, stehen Funktionsdeklarationen<fo:inline id="d4e7108" color="white" font-size="0pt" visibility="hidden">.</fo:inline> zur verfügung. Eine einfache Funktion wäre z.B. diese hier:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">local:wrap-header</fo:inline>(<fo:inline color="#7F0037">$json</fo:inline>) {
  <fo:inline color="#000099">xdmp:add-response-header</fo:inline>("Pragma", "no-cache"),
  <fo:inline color="#000099">xdmp:add-response-header</fo:inline>("Cache-Control", "no-cache"),
  <fo:inline color="#000099">xdmp:add-response-header</fo:inline>("Expires", "0"),
  <fo:inline color="#000099">xdmp:set-response-content-type</fo:inline>('text/json; charset=utf-8'),
  <fo:inline color="#7F0037">$json</fo:inline>
};</fo:block>
               
                  <fo:block space-after="6pt">Sie wickelt um einen JSON String eine passende Header Information.</fo:block>
               
                  <fo:block space-after="6pt">Damit die Funktion eingebunden werden kann, muss ein passender Namespace<fo:inline id="d4e7161" color="white" font-size="0pt" visibility="hidden">.</fo:inline> deklariert werden:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>local = 'local:';</fo:block>
               
                  <fo:block space-after="6pt" hyphenate="false">Nicht nur bzgl. Wiederverwendbarkeit sind Funktionen praktisch, sondern auch
um ganz elementare Konstrukte, wie <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">while...do</fo:inline>
                     </fo:inline>
                     <fo:inline id="d4e7192" color="white" font-size="0pt" visibility="hidden">.</fo:inline> Schleifen, zu realisieren.</fo:block>
               
                  <fo:block space-after="6pt">Dazu nutzt man, wie in der funktionalen Programmierung üblich, die Rekursion:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">local:ist-letzter-wert-in-kette</fo:inline>(<fo:inline color="#7F0037">$glied</fo:inline>) {
  <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$wert</fo:inline> := <fo:inline color="#000099">local:komplizierte-berechnung</fo:inline>(<fo:inline color="#7F0037">$glied</fo:inline>),
    <fo:inline color="#7F0037">$naechstes-glied</fo:inline> := <fo:inline color="#000099">local:komplizierte-berechnung-der-position</fo:inline>(<fo:inline color="#7F0037">$glied</fo:inline>),
  return
    <fo:inline color="#7F3300">if </fo:inline>(<fo:inline color="#7F0037">$naechstes-glied</fo:inline> and not(<fo:inline color="#7F0037">$wert</fo:inline> = 'foobar')) then
      <fo:inline color="#000099">local:durchlaufe-kette</fo:inline>(<fo:inline color="#7F0037">$naechstes-glied</fo:inline>)
    else
      <fo:inline color="#7F0037">$wert</fo:inline> = 'foobar'
};</fo:block>
               
                  <fo:block space-after="6pt">In diesem kleinen Schnippsel sind schon einige Besonderheiten von 
XQuery zu sehen. Variablenzuweisungen geschehen mit einem Doppelpunkt,
Vergleiche dagegen nur mit einem einfachen "=". Statements werden mit einem
Komma getrennt.</fo:block>
               
                  <fo:block space-after="6pt">Um eine XQuery Anwendung zu modularisieren<fo:inline id="d4e7281" color="white" font-size="0pt" visibility="hidden">.</fo:inline>, können einzelne Skripte in
Module ausgelagert werden. Ein Modul, z.B. common.xqy, wird dabei über einen eigenen
Namespace deklariert:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#7F3300">module </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>common = "https://www.tekturcms.de/common";</fo:block>
               
                  <fo:block space-after="6pt">Dieses Modul kann dann in anderen Skripten eingebunden werden:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">import <fo:inline color="#7F3300">module </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>common = "https://www.tekturcms.de/common" at "common.xqy";</fo:block>
               
                  <fo:block space-after="6pt">Funktionen und Variablen werden dann mir dem Namespace<fo:inline id="d4e7323" color="white" font-size="0pt" visibility="hidden">.</fo:inline> geprefixt aufgerufen:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">Funktionsaufruf: <fo:inline color="#000099">common:wrap-response-header</fo:inline>(...)
Variablenauswertung: <fo:inline color="#7F0037">$common</fo:inline>:collection-books</fo:block>
               </fo:block><fo:block id="d4e7348" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="11pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                     
                     <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">if..then..else</fo:inline>
                     </fo:inline> Ausdrücke
                  </fo:block>
                  <fo:block space-after="6pt" hyphenate="false">In nicht-funktionalen Programmiersprachen sind die Schlüsselwörter <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">if</fo:inline>
                     </fo:inline> und <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">then</fo:inline>
                     </fo:inline>
                     <fo:inline id="d4e7378" color="white" font-size="0pt" visibility="hidden">.</fo:inline> dazu da, um dem Compiler oder Interpreter mitzuteilen, dass eine bedingte Anweisung ausgewertet werden soll.</fo:block>
               
                  <fo:block space-after="6pt" hyphenate="false">Was für den Nicht-funktionalen Programmierer etwas befremdlich erscheint, ist der Umstand, dass in XQuery <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">if..then</fo:inline>
                     </fo:inline> als Ausdrücke ausgewertet werden.</fo:block>
               
                  <fo:block space-after="6pt">Das ist einerseits sehr praktisch, weil es richtig angewandt den Code verkürzt und damit das Wesentliche herausstellt, kann aber auch weiter zur allg. Verwirrung bzgl. des kryptischen XQuery Codes beitragen.</fo:block>
               
                  <fo:block space-after="6pt">Betrachten wir ein einfaches Beispiel: Wir generieren auf einer Marklogic-Webapp eine JSON Response. Da wir diesen Mechanismus an mehreren Stellen im Code einsetzen, empfiehlt es sich das Rendern des Headers in eine Funktion auszulagern.</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">common:wrap-response</fo:inline>(<fo:inline color="#7F0037">$json</fo:inline>)
{
  <fo:inline color="#000099">xdmp:add-response-header</fo:inline>("Pragma", "no-cache"),
  <fo:inline color="#000099">xdmp:add-response-header</fo:inline>("Cache-Control", "no-cache"),
  <fo:inline color="#000099">xdmp:add-response-header</fo:inline>("Expires", "0"),
  <fo:inline color="#000099">xdmp:set-response-content-type</fo:inline>('text/json; charset=utf-8'),
  <fo:inline color="#7F0037">$json</fo:inline>
};</fo:block>
               
                  <fo:block space-after="6pt">In unserem Request-Handler wird je nach Auswertung einer Variablen eine 
bedingte Anweisung ausgeführt, diese sieht bspw. so aus:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$name</fo:inline> := <fo:inline color="#000099">xdmp:get-request-field</fo:inline>('name'),
    <fo:inline color="#7F0037">$is-afternoon</fo:inline> := <fo:inline color="#000099">xs:time</fo:inline>(current-dateTime()) gt <fo:inline color="#000099">xs:time</fo:inline>('12:00:00')
<fo:inline color="#7F3300">return </fo:inline>
  <fo:inline color="#7F3300">if </fo:inline>(<fo:inline color="#7F0037">$is-afternoon</fo:inline>) <fo:inline color="#7F3300">then </fo:inline>
   <fo:inline color="#000099">common:wrap-response</fo:inline>(<fo:inline color="#000099">xdmp:unquote</fo:inline>(concat('{"greeting":"Good Afternoon! ',<fo:inline color="#7F0037">$name</fo:inline>,'!"}')))
  else
   <fo:inline color="#000099">common:wrap-response</fo:inline>(<fo:inline color="#000099">xdmp:unquote</fo:inline>(concat('{"greeting":"Good Morning! ',<fo:inline color="#7F0037">$name</fo:inline>,'!"}')))</fo:block>
               
                  <fo:block space-after="6pt">Als prozeduraler Programmierer wäre ich mit diesem Switch voll und ganz zufrieden, 
der funktionale Programmier erkennt abaer sofort einen Optimierungsbedarf.</fo:block>
               
                  <fo:block space-after="6pt">Da es sich bei der bedingten Anweisung auch um einen Ausdruck handelt, der [[code:true}} oder [[code:false}} zurückgibt, können wir die gleichen Funktionsaufrufe herausziehen:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#000099">ommon:wrap-response</fo:inline>(<fo:inline color="#000099">xdmp:unquote</fo:inline>(
    <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$is-afternoon</fo:inline> := <fo:inline color="#000099">xs:time</fo:inline>(current-dateTime()) gt <fo:inline color="#000099">xs:time</fo:inline>('12:00:00')
        <fo:inline color="#7F3300">return </fo:inline>
            <fo:inline color="#7F3300">if </fo:inline>(<fo:inline color="#7F0037">$is-afternoon</fo:inline>) <fo:inline color="#7F3300">then </fo:inline>concat('{"greeting":"Good Afternoon! ',<fo:inline color="#7F0037">$name</fo:inline>,'!"}') 
            else concat('{"greeting":"Good Morning! ',<fo:inline color="#7F0037">$name</fo:inline>,'!"}')
)</fo:block>
               
                  <fo:block space-after="6pt">Hier wird der abstrakt denkende Programmierer aber einwenden, dass eine abstrakte
Logik nicht in eine Low-Level Funktion, wie [code:xsdmp:unquote] gewrapped werden sollte.</fo:block>
               
                  <fo:block space-after="6pt" hyphenate="false">Das stimmt - und mehr noch, die Maskierung mit <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xsdmp:unquote</fo:inline>
                     </fo:inline> sollte auch noch in unsere 
Funktion gepackt werden. So dass der Code schliesslich so aussehen würde:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">common:render-response</fo:inline>(<fo:inline color="#7F0037">$json</fo:inline>)
{
  <fo:inline color="#000099">xdmp:add-response-header</fo:inline>("Pragma", "no-cache"),
  <fo:inline color="#000099">xdmp:add-response-header</fo:inline>("Cache-Control", "no-cache"),
  <fo:inline color="#000099">xdmp:add-response-header</fo:inline>("Expires", "0"),
  <fo:inline color="#000099">xdmp:set-response-content-type</fo:inline>('text/json; charset=utf-8'),
  <fo:inline color="#000099">xdmp:unquote</fo:inline>(<fo:inline color="#7F0037">$json</fo:inline>)
};
<fo:inline color="#000099">common:render-response</fo:inline>(
    <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$is-afternoon</fo:inline> := <fo:inline color="#000099">xs:time</fo:inline>(current-dateTime()) gt <fo:inline color="#000099">xs:time</fo:inline>('12:00:00')
        <fo:inline color="#7F3300">return </fo:inline>
            <fo:inline color="#7F3300">if </fo:inline>(<fo:inline color="#7F0037">$is-afternoon</fo:inline>) <fo:inline color="#7F3300">then </fo:inline>concat('{"greeting":"Good Afternoon! ',<fo:inline color="#7F0037">$name</fo:inline>,'!"}') 
            else concat('{"greeting":"Good Morning! ',<fo:inline color="#7F0037">$name</fo:inline>,'!"}')
)</fo:block>
               
                  <fo:block space-after="6pt">Sicherlich lässt sich darüber streiten, ob nun der funktionale Ansatz besser lesbar ist als
der prozedurale ganz oben.</fo:block>
               
                  <fo:block space-after="6pt">Ich denke jeder Programmierer hat hier seinen eigenen, individuellen
und bewährten Programmierstil entwickelt, den er auch beibehalten sollte.</fo:block>
               </fo:block></fo:block></fo:block><fo:block id="d4e7667" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="14pt" provisional-distance-between-starts="10mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
               XML Datenbanken
            </fo:block>
            <fo:block space-after="6pt">XML Datenbanken konzentrieren sich im Gegensatz zu den verbreiteten relationalen 
Datenbanken auf die Struktur eines Dokuments, die abstrakt gesehen einen Baum darstellt, und weniger auf die Beziehungen zwischen Objekten, die eher einen Graphen aufspannen.</fo:block>
         
            <fo:block space-after="6pt">Natürlich ist auch jeder Baum ein Graph ohne Kreise, und sicherlich kann man auch Bäume
in einer relationalen Datenbank abspeichern. Eine XML Datenbank ist aber für diese Struktur optimiert. </fo:block>
         
            <fo:block space-after="6pt">Es gibt gegenwärtig vier reine XML Datenbanken und einige Erweiterungen für konventionelle SQL Datenbanken:<fo:inline id="d4e7691" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
               <fo:inline id="d4e7700" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
               <fo:inline id="d4e7709" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
               <fo:inline id="d4e7718" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
            </fo:block>
         
            <fo:block><fo:block id="d268e2" space-after="12pt" space-before="12pt"><fo:table font-weight="normal" width="100%" table-layout="fixed"><fo:table-column column-number="" column-width="proportional-column-width(0.25)"/><fo:table-column column-number="" column-width="proportional-column-width(0.75)"/><fo:table-header height="4px" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain"><fo:table-row><fo:table-cell><fo:block/></fo:table-cell></fo:table-row></fo:table-header><fo:table-body><fo:table-row keep-together.within-page="200" keep-with-next.within-page="50">
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:inline font-weight="bold">Datenbank</fo:inline>
                           </fo:block></fo:block-container></fo:table-cell>
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:inline font-weight="bold">Besonderheiten</fo:inline>
                           </fo:block></fo:block-container></fo:table-cell>
                        </fo:table-row><fo:table-row keep-together.within-page="200">
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">eXist DB<fo:footnote><fo:inline id="fnsource-d268e30" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d268e30">
                                    [EX]
                                </fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d268e30" provisional-distance-between-starts="20mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d268e30">
                                                    [EX]
                                                </fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://exist-db.org/exist/apps/homepage/index.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                        </fo:block></fo:block-container></fo:table-cell>
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:block space-after="6pt">eXist DB ist ein Open Source Projekt. Neben der Datenbank umfasst diese Software eine komplette Entwicklungsumgebung für Webapplikationen. Für diese DB xistiert ein 1-Klick Installer in Form eines Java Jars. eXist ist im Bereich Digital Humanities (ein Fachbereich der Geschichts- und Kulturwissenschaften) sehr verbreitet.</fo:block>
                           </fo:block></fo:block-container></fo:table-cell>
                        </fo:table-row><fo:table-row keep-together.within-page="200">
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">BaseX<fo:footnote><fo:inline id="fnsource-d268e54" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d268e54">
                                    [BX]
                                </fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d268e54" provisional-distance-between-starts="20mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d268e54">
                                                    [BX]
                                                </fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://basex.org/</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                        </fo:block></fo:block-container></fo:table-cell>
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:block space-after="6pt">BaseX ist ebenfalls OpenSource und die Homepage macht einen ordentlichen Eindruck. Bisher bin ich noch nicht dazugekommen, BaseX zu evaluieren. Unter meiner Java 10 Installation lief erst einmal nichts - weshalb die erste Kontaktaufnahme scheiterte. </fo:block>
                           </fo:block></fo:block-container></fo:table-cell>
                        </fo:table-row><fo:table-row keep-together.within-page="200">
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">MarkLogic<fo:footnote><fo:inline id="fnsource-d268e78" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d268e78">
                                    [ML]
                                </fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d268e78" provisional-distance-between-starts="20mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d268e78">
                                                    [ML]
                                                </fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.marklogic.com/</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                        </fo:block></fo:block-container></fo:table-cell>
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:block space-after="6pt">MarkLogic ist der Platzhirsch unter den kommerziellen Anbietern. Hier ist alles "Enterprise"... die Funktionalität, der Support und auch der Preis. Obwohl ML viele Erweiterungen für XQuery bietet, ist der XQuery 3.0 Standard noch nicht umgesetzt.</fo:block>
                           </fo:block></fo:block-container></fo:table-cell>
                        </fo:table-row><fo:table-row keep-together.within-page="200" keep-with-previous.within-page="40">
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">Berkely DB XML Datenbank<fo:footnote><fo:inline id="fnsource-d268e102" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d268e102">
                                    [BD]
                                </fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d268e102" provisional-distance-between-starts="20mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d268e102">
                                                    [BD]
                                                </fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.oracle.com/database/berkeley-db/xml.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                        </fo:block></fo:block-container></fo:table-cell>
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:block space-after="6pt">Die gute alte Berkely DB war der Key-Value Unterbau für viele andere Datenbanken, wie auch MySQL. Sicherlich hat auch die XML Variante einiges in Petto.</fo:block>
                           </fo:block></fo:block-container></fo:table-cell>
                        </fo:table-row></fo:table-body></fo:table></fo:block></fo:block>
         
            <fo:block space-after="6pt">Da ich zur Zeit beruflich mit MarkLogic zu tun habe, lasse ich mir die Gelegenheit nicht nehmen, meine Erfahrungen und Erkenntnisse dazu in diesem Kapitel zu beschreiben. Es gibt auch eine Developer License<fo:footnote><fo:inline id="fnsource-d4e7861" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e7861">
                                    [DL]
                                </fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e7861" provisional-distance-between-starts="20mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e7861">
                                                    [DL]
                                                </fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://developer.marklogic.com/free-developer</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> mit der man die Software ausprobieren kann. Für alle langfristigen XQuery Spielereien ist die eXist DB wohl die erste Wahl, da hier auch der aktuelle XQuery 3.0 Standard umgesetzt ist.</fo:block>
         <fo:block id="d4e7875" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="13pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                  Connector zu Marklogic in Oxygen
               </fo:block>
               <fo:block space-after="6pt">Marklogic<fo:inline id="d4e7887" color="white" font-size="0pt" visibility="hidden">.</fo:inline> bietet zwar auf Port 8000 per Default ein Query Console im Browser, mit der man bestimmte Sachen ausprobieren kann. Komfortabler arbeitet man aber mit einem Oxygen-Connector<fo:inline id="d4e7896" color="white" font-size="0pt" visibility="hidden">.</fo:inline>. Hier öffnet man den <fo:inline hyphenate="false" font-style="italic">Data Source Explorer</fo:inline>: </fo:block>
            
               <fo:block space-after="6pt">und konfiguriert eine neue Datenquelle:</fo:block>
            
               <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">oXygen Data Source Explorer View öffnen</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/38f7a676-cbef-4a69-9ae9-d89bddde2719/d-source-explorer-1.png" content-height="" content-width="auto"/></fo:block></fo:block>
            
               <fo:block space-after="6pt">Dazu muss man den Marklogic Treiber installieren<fo:footnote><fo:inline id="fnsource-d4e7931" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e7931">53)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e7931" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e7931">53)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.oxygenxml.com/doc/versions/20.1/ug-editor/topics/configure-marklogic-datasource.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> und diesen im folgenden Screen verfügbar machen.</fo:block>
            
               <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Neue Datenquelle in oXygen konfigurieren</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/38f7a676-cbef-4a69-9ae9-d89bddde2719/d-source-explorer-2.png" content-height="" content-width="auto"/></fo:block></fo:block>
            
               <fo:block space-after="6pt" keep-together.within-page="10" font-style="normal" background-color="white" border-top="3pt #FCED00 solid" border-bottom="3pt #FCED00 solid" margin="0mm" padding-top="1mm" padding-bottom="1mm" padding-left="1mm"><fo:external-graphic src="./transformation/uwe/images/warning/_caution_300dpi.png"/><fo:block space-after="12pt" margin-top="12pt" font-weight="bold" keep-with-next.within-page="always">Das Jar sollte an einem soliden Ort abgespeichert werden, da hier nur ein Verweis auf diesen Ort gesetzt wird.</fo:block></fo:block>
            
               <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Marklogic Treiber auswählen</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/38f7a676-cbef-4a69-9ae9-d89bddde2719/add-marklogic-jar.png" content-height="" content-width="auto"/></fo:block></fo:block>
            
               <fo:block space-after="6pt">Natürlich ist auf der Serverseite auch eine Einstellung notwendig. Man wechselt als Admin in den Bereich <fo:inline font-weight="bold">App Servers</fo:inline> und fügt einen neuen <fo:inline font-weight="bold">WebDAV Server</fo:inline>
                  <fo:inline id="d4e7986" color="white" font-size="0pt" visibility="hidden">.</fo:inline> hinzu. Ggf. muss man bei der Auswahl der Datenbank diese noch auf "automatische Directory Erzeugung" umstellen.</fo:block>
            
               <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Wechseln in die Marklogic App Server Verwaltung</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/38f7a676-cbef-4a69-9ae9-d89bddde2719/appserver.png" content-height="" content-width="auto"/></fo:block></fo:block>
            
               <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">WebDAV in Marklogic konfigurieren</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/38f7a676-cbef-4a69-9ae9-d89bddde2719/marklogic-create-webdav.png" content-height="" content-width="auto"/></fo:block></fo:block>
            
               <fo:block space-after="6pt">Hat man den WebDAV Server erzeugt und diesem eine bestehende oder neu angelegte Datenbank zugewiesen, dann kann man diese DB im Konfigurationsdialog der neuen WebDav Connection auswählen.</fo:block>
            
               <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Konfigurieren der WebDAV Connection Einstellungen in oXygen</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/38f7a676-cbef-4a69-9ae9-d89bddde2719/cnfigure-database-connection.png" content-height="" content-width="auto"/></fo:block></fo:block>
            
               <fo:block space-after="6pt">Schliesslich hat man im Data Source Explorer in oXygen die neue Verbindung verfügbar und kann gefühlt wie im Dateisystem mit den Files auf dem Server arbeiten.</fo:block>
            
               <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">oXygen Data Source Explorer zeigt die WebDAV Verzeichnisse auf dem Marklogic Server</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/38f7a676-cbef-4a69-9ae9-d89bddde2719/Data-Source_explorer.png" content-height="" content-width="auto"/></fo:block></fo:block>
            </fo:block><fo:block id="d4e8055" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="13pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                  SQL Views in MarkLogic
               </fo:block>
               <fo:block space-after="6pt">Es macht nicht immer Sinn über eine Baumstruktur zu suchen. Obwohl das in einer 
XML Datenbank rasend schnell geht, weil jeder Knoten des Baums initial in einen Index
aufgenommen wird. So gibt es doch Anwendungsfälle bei denen man lieber eine relationale
Sicht auf die Daten hätte.</fo:block>
            
               <fo:block space-after="6pt">In MarkLogic heisst die Lösung dazu SQL Views.</fo:block>
            
               <fo:block space-after="6pt">Bspw. benötigt man eine relationale Sicht auf die Daten,
wenn über verschiedene Datensätze ein Report generiert werden soll.</fo:block>
            
               <fo:block space-after="6pt">Nehmen wir an es gibt im Datenbestand die folgenden Dokumente:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;k:kunde&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;k:id&gt;</fo:inline>1<fo:inline color="#527F3F">&lt;/k:id&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;k:name&gt;</fo:inline>Alex<fo:inline color="#527F3F">&lt;/k:name&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;k:eMail&gt;</fo:inline>tekturcms@gmail.com<fo:inline color="#527F3F">&lt;/k:eMail&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/k:kunde&gt;</fo:inline>

<fo:inline color="#527F3F">&lt;k:kunde&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;k:id&gt;</fo:inline>2<fo:inline color="#527F3F">&lt;/k:id&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;k:name&gt;</fo:inline>Horst<fo:inline color="#527F3F">&lt;/k:name&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;k:eMail&gt;</fo:inline>horst@horst.de<fo:inline color="#527F3F">&lt;/k:eMail&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/k:kunde&gt;</fo:inline>

<fo:inline color="#527F3F">&lt;k:kunde&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;k:id&gt;</fo:inline>3<fo:inline color="#527F3F">&lt;/k:id&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;k:name&gt;</fo:inline>Gundula<fo:inline color="#527F3F">&lt;/k:name&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;k:eMail&gt;</fo:inline>gundl@gundula.de<fo:inline color="#527F3F">&lt;/k:eMail&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/k:kunde&gt;</fo:inline>

<fo:inline color="#527F3F">&lt;b:bestellung&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;b:id&gt;</fo:inline>1<fo:inline color="#527F3F">&lt;/b:id&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;b:datum&gt;</fo:inline>02.01.2019<fo:inline color="#527F3F">&lt;/b:datum&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;b:preis&gt;</fo:inline>99.90<fo:inline color="#527F3F">&lt;/b:preis&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;kunde-id&gt;</fo:inline>2<fo:inline color="#527F3F">&lt;/kunde-id&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/b:bestellung&gt;</fo:inline>

<fo:inline color="#527F3F">&lt;b:bestellung&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;b:id&gt;</fo:inline>2<fo:inline color="#527F3F">&lt;/b:id&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;b:datum&gt;</fo:inline>03.01.2019<fo:inline color="#527F3F">&lt;/b:datum&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;b:preis&gt;</fo:inline>68.90<fo:inline color="#527F3F">&lt;/b:preis&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;b:kunde-id&gt;</fo:inline>1<fo:inline color="#527F3F">&lt;/b:kunde-id&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/b:bestellung&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">Will man sich alle Kunden anzeigen lassen, die eine Bestellung 
abgegeben haben - das sind Alex und Horst - so würde man bei
einem relationalen Ansatz einen JOIN verwenden, so wie:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">SELECT name, datum, preis
FROM kunden k
INNER JOIN bestellungen b
ON k.id = b.kunde_id</fo:block>
            
               <fo:block space-after="6pt">In einer relationalen Sicht würde uns das dann die folgende Tabelle liefern:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">name, datum, preis
Alex, 03.01.2019, 68.90
Horst, 02.01.2019, 99.90</fo:block>
            
               <fo:block space-after="6pt">Um für MarkLogic eine SQL View zu definieren verwendet man einen Mechanismus,
der da heisst: Template Driven Extraction<fo:footnote><fo:inline id="fnsource-d4e8259" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e8259">54)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e8259" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e8259">54)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://docs.marklogic.com/guide/app-dev/TDE</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
               </fo:block>
            
               <fo:block space-after="6pt">Dazu werden Templates in XML deklariert und in die Template Collection eingefügt. Für unser obiges Beispiel
würden wir zwei Templates brauchen, die so aussehen:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">xquery version "1.0-ml";

import <fo:inline color="#7F3300">module </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>tde = "http://marklogic.com/xdmp/tde" 
                            at "/MarkLogic/tde.xqy";

<fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$sql-view-name</fo:inline> := 'kunden-view.xml'
<fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$sql-view</fo:inline> := <fo:inline color="#527F3F">&lt;template</fo:inline> xmlns="http://marklogic.com/xdmp/tde"<fo:inline color="#527F3F">&gt;</fo:inline>
   <fo:inline color="#527F3F">&lt;path-namespaces&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;path-namespace&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;prefix&gt;</fo:inline>k<fo:inline color="#527F3F">&lt;/prefix&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;namespace-uri&gt;</fo:inline>https://tekturcms.de/schema/kunde/1.0<fo:inline color="#527F3F">&lt;/namespace-uri&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/path-namespace&gt;</fo:inline>
   <fo:inline color="#527F3F">&lt;/path-namespaces&gt;</fo:inline>
   <fo:inline color="#527F3F">&lt;context&gt;</fo:inline>/k:kunde<fo:inline color="#527F3F">&lt;/context&gt;</fo:inline>
   <fo:inline color="#527F3F">&lt;collections&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;collections-and&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;collection&gt;</fo:inline>/kunden<fo:inline color="#527F3F">&lt;/collection&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/collections-and&gt;</fo:inline>
   <fo:inline color="#527F3F">&lt;/collections&gt;</fo:inline>
   <fo:inline color="#527F3F">&lt;rows&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;row&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;schema-name&gt;</fo:inline>kunden_schema<fo:inline color="#527F3F">&lt;/schema-name&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;view-name&gt;</fo:inline>kunden_view<fo:inline color="#527F3F">&lt;/view-name&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;columns&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>id<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>k:id<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;nullable&gt;</fo:inline>true<fo:inline color="#527F3F">&lt;/nullable&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>datum<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>k:datum<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;nullable&gt;</fo:inline>true<fo:inline color="#527F3F">&lt;/nullable&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>eMail<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>k:eMail<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;nullable&gt;</fo:inline>true<fo:inline color="#527F3F">&lt;/nullable&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;/columns&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/row&gt;</fo:inline>
   <fo:inline color="#527F3F">&lt;/rows&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/template&gt;</fo:inline>
return(
  <fo:inline color="#000099">tde:template-insert</fo:inline>(concat('/templates/', <fo:inline color="#7F0037">$sql-view-name</fo:inline>), 
                      <fo:inline color="#7F0037">$sql-view</fo:inline>, <fo:inline color="#000099">xdmp:default-permissions</fo:inline>())
)</fo:block>
            
               <fo:block space-after="6pt">und analog für die Bestellungen:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">[...]
   <fo:inline color="#527F3F">&lt;rows&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;row&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;schema-name&gt;</fo:inline>bestellungen_schema<fo:inline color="#527F3F">&lt;/schema-name&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;view-name&gt;</fo:inline>bestellungen_view<fo:inline color="#527F3F">&lt;/view-name&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;columns&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>id<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>b:id<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>datum<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>b:datum<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>preis<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>b:preis<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>kunde_id<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>b:kunde-id<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;/columns&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/row&gt;</fo:inline>
[...]</fo:block>
            
               <fo:block space-after="6pt">In XQuery eingebunden könnte man dann die definierten SQL Views mit dem folgenden Befehl abfragen:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#000099">xdmp:sql</fo:inline>("SELECT name, datum, preis FROM kunden_view k 
          INNER JOIN bestellungen_view b ON k.id = b.kunde_id")</fo:block>
            
               <fo:block space-after="6pt">Folgende ist das komplette Beispiel für eine MarkLogic XQuery Konsolensitzung abgebildet ...</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">xquery version "1.0-ml";

<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>k = 'http://www.tekturcms.de/kunden';
<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>b = 'http://www.tekturcms.de/bestellungen';

import <fo:inline color="#7F3300">module </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>tde = "http://marklogic.com/xdmp/tde" at "/MarkLogic/tde.xqy";

<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">local:loadKunde</fo:inline>(<fo:inline color="#7F0037">$id</fo:inline>, <fo:inline color="#7F0037">$name</fo:inline>, <fo:inline color="#7F0037">$eMail</fo:inline>)
{
  <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$root</fo:inline> :=
  <fo:inline color="#527F3F">&lt;k:kunde&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;k:id&gt;</fo:inline>{ <fo:inline color="#7F0037">$id</fo:inline> }<fo:inline color="#527F3F">&lt;/k:id&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;k:name&gt;</fo:inline>{ <fo:inline color="#7F0037">$name</fo:inline> }<fo:inline color="#527F3F">&lt;/k:name&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;k:eMail&gt;</fo:inline>{ <fo:inline color="#7F0037">$eMail</fo:inline> }<fo:inline color="#527F3F">&lt;/k:eMail&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/k:kunde&gt;</fo:inline>,
  <fo:inline color="#7F0037">$options</fo:inline> :=
  <fo:inline color="#527F3F">&lt;options</fo:inline> xmlns="xdmp:document-insert"<fo:inline color="#527F3F">&gt;</fo:inline>  
    <fo:inline color="#527F3F">&lt;permissions&gt;</fo:inline>{ <fo:inline color="#000099">xdmp:default-permissions</fo:inline>() }<fo:inline color="#527F3F">&lt;/permissions&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;collections&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;collection&gt;</fo:inline>/kunden<fo:inline color="#527F3F">&lt;/collection&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/collections&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/options&gt;</fo:inline>,
  <fo:inline color="#7F0037">$fname</fo:inline> := concat('/kunden/',<fo:inline color="#7F0037">$id</fo:inline>,".xml")
  <fo:inline color="#7F3300">return </fo:inline><fo:inline color="#000099">xdmp:document-insert</fo:inline>(<fo:inline color="#7F0037">$fname</fo:inline>,<fo:inline color="#7F0037">$root</fo:inline>,<fo:inline color="#7F0037">$options</fo:inline>)
};

<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">local:loadBestellung</fo:inline>(<fo:inline color="#7F0037">$id</fo:inline>, <fo:inline color="#7F0037">$datum</fo:inline>, <fo:inline color="#7F0037">$preis</fo:inline>, <fo:inline color="#7F0037">$kunde-id</fo:inline>)
{
  <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$root</fo:inline> :=
  <fo:inline color="#527F3F">&lt;b:bestellung&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;b:id&gt;</fo:inline>{ <fo:inline color="#7F0037">$id</fo:inline> }<fo:inline color="#527F3F">&lt;/b:id&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;b:datum&gt;</fo:inline>{ <fo:inline color="#7F0037">$datum</fo:inline> }<fo:inline color="#527F3F">&lt;/b:datum&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;b:preis&gt;</fo:inline>{ <fo:inline color="#7F0037">$preis</fo:inline> }<fo:inline color="#527F3F">&lt;/b:preis&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;b:kunde-id&gt;</fo:inline>{ <fo:inline color="#7F0037">$kunde-id</fo:inline> }<fo:inline color="#527F3F">&lt;/b:kunde-id&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/b:bestellung&gt;</fo:inline>,
  <fo:inline color="#7F0037">$options</fo:inline> :=
  <fo:inline color="#527F3F">&lt;options</fo:inline> xmlns="xdmp:document-insert"<fo:inline color="#527F3F">&gt;</fo:inline>  
    <fo:inline color="#527F3F">&lt;permissions&gt;</fo:inline>{ <fo:inline color="#000099">xdmp:default-permissions</fo:inline>() }<fo:inline color="#527F3F">&lt;/permissions&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;collections&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;collection&gt;</fo:inline>/bestellungen<fo:inline color="#527F3F">&lt;/collection&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/collections&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/options&gt;</fo:inline>,
  <fo:inline color="#7F0037">$fname</fo:inline> := concat('/bestellungen/',<fo:inline color="#7F0037">$id</fo:inline>,".xml")
  <fo:inline color="#7F3300">return </fo:inline><fo:inline color="#000099">xdmp:document-insert</fo:inline>(<fo:inline color="#7F0037">$fname</fo:inline>,<fo:inline color="#7F0037">$root</fo:inline>,<fo:inline color="#7F0037">$options</fo:inline>)
};

<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">local:insertKundenSchema</fo:inline>()
{
  <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$sql-view-name</fo:inline> := 'kunden-view.xml',
      <fo:inline color="#7F0037">$sql-view</fo:inline> := <fo:inline color="#527F3F">&lt;template</fo:inline> xmlns="http://marklogic.com/xdmp/tde"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;path-namespaces&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;path-namespace&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;prefix&gt;</fo:inline>k<fo:inline color="#527F3F">&lt;/prefix&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;namespace-uri&gt;</fo:inline>http://www.tekturcms.de/kunden<fo:inline color="#527F3F">&lt;/namespace-uri&gt;</fo:inline>
       <fo:inline color="#527F3F">&lt;/path-namespace&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/path-namespaces&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;context&gt;</fo:inline>/k:kunde<fo:inline color="#527F3F">&lt;/context&gt;</fo:inline>
     <fo:inline color="#527F3F">&lt;collections&gt;</fo:inline>
       <fo:inline color="#527F3F">&lt;collections-and&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;collection&gt;</fo:inline>/kunden<fo:inline color="#527F3F">&lt;/collection&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/collections-and&gt;</fo:inline>
     <fo:inline color="#527F3F">&lt;/collections&gt;</fo:inline>
     <fo:inline color="#527F3F">&lt;rows&gt;</fo:inline>
       <fo:inline color="#527F3F">&lt;row&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;schema-name&gt;</fo:inline>kunden_schema<fo:inline color="#527F3F">&lt;/schema-name&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;view-name&gt;</fo:inline>kunden_view<fo:inline color="#527F3F">&lt;/view-name&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;columns&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>id<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>k:id<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>name<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>k:name<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
             <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>eMail<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
             <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
             <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>k:eMail<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;/columns&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/row&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/rows&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/template&gt;</fo:inline>
  return
    <fo:inline color="#000099">tde:template-insert</fo:inline>(concat('/templates/', 
                        <fo:inline color="#7F0037">$sql-view-name</fo:inline>), <fo:inline color="#7F0037">$sql-view</fo:inline>, <fo:inline color="#000099">xdmp:default-permissions</fo:inline>())
};

<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">local:insertBestellungenSchema</fo:inline>()
{
  <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$sql-view-name</fo:inline> := 'bestellungen-view.xml',
      <fo:inline color="#7F0037">$sql-view</fo:inline> := <fo:inline color="#527F3F">&lt;template</fo:inline> xmlns="http://marklogic.com/xdmp/tde"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;path-namespaces&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;path-namespace&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;prefix&gt;</fo:inline>b<fo:inline color="#527F3F">&lt;/prefix&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;namespace-uri&gt;</fo:inline>http://www.tekturcms.de/bestellungen<fo:inline color="#527F3F">&lt;/namespace-uri&gt;</fo:inline>
       <fo:inline color="#527F3F">&lt;/path-namespace&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/path-namespaces&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;context&gt;</fo:inline>/b:bestellung<fo:inline color="#527F3F">&lt;/context&gt;</fo:inline>
     <fo:inline color="#527F3F">&lt;collections&gt;</fo:inline>
       <fo:inline color="#527F3F">&lt;collections-and&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;collection&gt;</fo:inline>/bestellungen<fo:inline color="#527F3F">&lt;/collection&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/collections-and&gt;</fo:inline>
     <fo:inline color="#527F3F">&lt;/collections&gt;</fo:inline>
     <fo:inline color="#527F3F">&lt;rows&gt;</fo:inline>
       <fo:inline color="#527F3F">&lt;row&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;schema-name&gt;</fo:inline>bestellungen_schema<fo:inline color="#527F3F">&lt;/schema-name&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;view-name&gt;</fo:inline>bestellungen_view<fo:inline color="#527F3F">&lt;/view-name&gt;</fo:inline>
         <fo:inline color="#527F3F">&lt;columns&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>id<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>b:id<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>datum<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
               <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>b:datum<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
            <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
             <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>preis<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
             <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
             <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>b:preis<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;column&gt;</fo:inline>
             <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>kunde_id<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>
             <fo:inline color="#527F3F">&lt;scalar-type&gt;</fo:inline>string<fo:inline color="#527F3F">&lt;/scalar-type&gt;</fo:inline>
             <fo:inline color="#527F3F">&lt;val&gt;</fo:inline>b:kunde-id<fo:inline color="#527F3F">&lt;/val&gt;</fo:inline>
          <fo:inline color="#527F3F">&lt;/column&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;/columns&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/row&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/rows&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/template&gt;</fo:inline>
  return
    <fo:inline color="#000099">tde:template-insert</fo:inline>(concat('/templates/', 
                        <fo:inline color="#7F0037">$sql-view-name</fo:inline>), <fo:inline color="#7F0037">$sql-view</fo:inline>, <fo:inline color="#000099">xdmp:default-permissions</fo:inline>())
};

<fo:inline color="#000099">local:loadKunde</fo:inline>("1","Alex","tekturcms@gmail.com"),
<fo:inline color="#000099">local:loadKunde</fo:inline>("2","Horst","horst@horst.de"),
<fo:inline color="#000099">local:loadKunde</fo:inline>("3","Gundula","gundl@gundula.de"),
<fo:inline color="#000099">local:loadBestellung</fo:inline>("1","02.01.2019","99.90","2"),
<fo:inline color="#000099">local:loadBestellung</fo:inline>("2","03.01.2019","68.90","1"),
<fo:inline color="#000099">local:insertKundenSchema</fo:inline>(),
<fo:inline color="#000099">local:insertBestellungenSchema</fo:inline>(),
<fo:inline color="#000099">xdmp:sql</fo:inline>("SELECT name, datum, preis FROM kunden_view k INNER JOIN 
          bestellungen_view b ON k.id = b.kunde_id")</fo:block>
            
               <fo:block space-after="6pt">... mit einer schönen tabellarischen Ausgabe im unteren Panel der Query Konsole - oder als JSON:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">[
  [
    "k.name", 
    "b.datum", 
    "b.preis"
  ], 
  [
    "Alex", 
    "03.01.2019", 
    "68.90"
  ], 
  [
    "Horst", 
    "02.01.2019", 
    "99.90"
  ]
]</fo:block>
            </fo:block><fo:block id="d4e9376" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="13pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                  Bi-Temporale Dokumente
               </fo:block>
               <fo:block space-after="6pt">Wenn wir zwischen der Zeit in der das Dokument, bspw. ein Vetrag 
in der DB angelegt wird, und der Zeit in der ein Vetrag zwischen zwei 
Vetragspartnern abgeschlossen wird unterscheiden, dann betrachten
wir zwei Zeitachsen.<fo:inline id="d4e9388" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
               </fo:block>
            
               <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">die gültige Zeit (Valid Time)</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">die Systemzeit (System Time)</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
            
               <fo:block space-after="6pt">Für die Vetragspartner ist nur die gültige Zeit relevant. Das Zeitfenster
zwischen gültiger Zeit und Systemzeit ist jedoch in manchen Fällen
ausschlaggebend.</fo:block>
            
               <fo:block space-after="6pt">
                     <fo:inline hyphenate="false" font-style="italic">Bsp: Kürzlich wurde
meine Geldbörse mit meinem Perso geklaut. Beim Austellen eines vorläufigen
Ausweises wurde ich schriftlich darauf hingewiesen, dass nun mein Perso
bei Interpol zur Fahndung ausgeschrieben ist.</fo:inline>
                  </fo:block>
            
               <fo:block space-after="6pt">
                     <fo:inline hyphenate="false" font-style="italic">Kurze Zeit später fand ein netter Herr die Geldbörse (ohne Geld aber 
mit allen Papieren) in seinem Garten. Bei einer anschliessenden Busfahrt mit einem
Fernbus, wurde ich bei einer Zollkontrolle festgehalten, da das System der Polizei noch nicht aktualisiert war.</fo:inline>
                  </fo:block>
            
               <fo:block space-after="6pt">Ich nehme an, dass nach meiner Unschuldsbekundung der Vorgang auch
auf Seiten des Polizeicomputers aktualisiert wurde. Nun könnte man zwei Fragen
stellen:</fo:block>
            
               
                     <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="7mm">
                           <fo:block space-after="6pt">Ist das Festhalten seitens der Zollbeamten rechtens?</fo:block>
                        </fo:list-item-body></fo:list-item></fo:list-block>
                     <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="7mm">
                           <fo:block space-after="6pt">Habe ich mich durch ein verspätetes Anzeigen des Funds schuldig gemacht?</fo:block>
                        </fo:list-item-body></fo:list-item></fo:list-block>
                  <fo:block color="white">.</fo:block>
            
               <fo:block space-after="6pt" keep-together.within-page="10" font-style="italic" background-color="white" border-top="none" border-bottom="none" margin="0mm" padding-top="1mm" padding-bottom="1mm" padding-left="1mm"><fo:list-block start-indent="0mm" space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label start-indent="2mm"><fo:block color="#808080">►</fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Beachte, dass man diese Fragen auch noch nach 10 Jahren stellen
könnte und das - bei meinem Pech in diesen Angelegenheiten - so ein Vorfall auch noch öfters passieren könnte...</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/></fo:block>
            
               <fo:block space-after="6pt">Um diese Fragen zu beantworten, müsste unsere Datenbank in der Lage sein,
eine bitemporale Query<fo:footnote><fo:inline id="fnsource-d4e9488" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e9488">55)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e9488" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e9488">55)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://en.wikipedia.org/wiki/Temporal_database</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> auszuführen. Zunächst registerieren wir den Vorgang
des Persoverlustes in unserer Marklogic Datenbank:</fo:block>
            
               <fo:block space-after="6pt" keep-together.within-page="10" font-style="italic" background-color="white" border-top="none" border-bottom="none" margin="0mm" padding-top="1mm" padding-bottom="1mm" padding-left="1mm"><fo:list-block start-indent="0mm" space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label start-indent="2mm"><fo:block color="#808080">►</fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Da wir hier auf einer XML Datenbank arbeiten, sprechen wir von einem Dokument,
wenn wir einen Datensatz meinen. </fo:block>
                        <fo:block space-after="6pt">Der Datensatz bzw. das Dokument wird nicht aktualisiert, sondern stattdessen das Dokument mit den aktualisierten Daten in einer neuen Version angelegt. </fo:block>
                        <fo:block space-after="6pt">Auf diese Weise bleibt die Änderungshistorie erhalten.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/></fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">xquery version "1.0-ml";
import <fo:inline color="#7F3300">module </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>temporal = 
       "http://marklogic.com/xdmp/temporal" at "/MarkLogic/temporal.xqy";   
<fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$root</fo:inline> :=    
  <fo:inline color="#527F3F">&lt;vorgang&gt;</fo:inline>     
    <fo:inline color="#527F3F">&lt;perso-id&gt;</fo:inline>XYZ<fo:inline color="#527F3F">&lt;/perso-id&gt;</fo:inline>    
    <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>Alex Düsel<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>   
    <fo:inline color="#527F3F">&lt;status&gt;</fo:inline>gestohlen<fo:inline color="#527F3F">&lt;/status&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/vorgang&gt;</fo:inline>
<fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$options</fo:inline> :=   
  <fo:inline color="#527F3F">&lt;options</fo:inline> xmlns="xdmp:document-insert"<fo:inline color="#527F3F">&gt;</fo:inline>     
    <fo:inline color="#527F3F">&lt;metadata&gt;</fo:inline>        
      <fo:inline color="#527F3F">&lt;map:map</fo:inline> xmlns:map="http://marklogic.com/xdmp/map"<fo:inline color="#527F3F">&gt;</fo:inline>          
        <fo:inline color="#527F3F">&lt;map:entry</fo:inline> key="validStart"<fo:inline color="#527F3F">&gt;</fo:inline>            
	  <fo:inline color="#527F3F">&lt;map:value&gt;</fo:inline>2019-02-01T08:23:11<fo:inline color="#527F3F">&lt;/map:value&gt;</fo:inline>          
	<fo:inline color="#527F3F">&lt;/map:entry&gt;</fo:inline>          
	<fo:inline color="#527F3F">&lt;map:entry</fo:inline> key="validEnd"<fo:inline color="#527F3F">&gt;</fo:inline>            
	  <fo:inline color="#527F3F">&lt;map:value&gt;</fo:inline>9999-12-31T11:59:59Z<fo:inline color="#527F3F">&lt;/map:value&gt;</fo:inline>          
	<fo:inline color="#527F3F">&lt;/map:entry&gt;</fo:inline>         
      <fo:inline color="#527F3F">&lt;/map:map&gt;</fo:inline>    
    <fo:inline color="#527F3F">&lt;/metadata&gt;</fo:inline>  

<fo:inline color="#7F3300">return </fo:inline> <fo:inline color="#000099">temporal:document-insert</fo:inline>("/perso-verluste", 
                                 "duesel_alex_270774.xml", 
                                 <fo:inline color="#7F0037">$root</fo:inline>, <fo:inline color="#7F0037">$options</fo:inline>)</fo:block>
            
               <fo:block space-after="6pt">Unser Enddatum liegt in ferner Zukunft sicherzustellen, dass der Vorgang auf unbestimmte Zeit
im System bleibt.</fo:block>
            
               <fo:block space-after="6pt">Drei Tage später hatte ich meinen Ausweis wieder und der Vorgang wurde vier Tage später,
mit dem Status "gefunden" im Polizeicomputer aktualisiert:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">xquery version "1.0-ml";
import <fo:inline color="#7F3300">module </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>temporal = 
       "http://marklogic.com/xdmp/temporal" at "/MarkLogic/temporal.xqy";   
<fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$root</fo:inline> :=    
  <fo:inline color="#527F3F">&lt;vorgang&gt;</fo:inline>     
    <fo:inline color="#527F3F">&lt;perso-id&gt;</fo:inline>XYZ<fo:inline color="#527F3F">&lt;/perso-id&gt;</fo:inline>    
    <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>Alex Düsel<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>   
    <fo:inline color="#527F3F">&lt;status&gt;</fo:inline><fo:inline font-weight="bold">gefunden</fo:inline><fo:inline color="#527F3F">&lt;/status&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/vorgang&gt;</fo:inline>
<fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$options</fo:inline> :=   
  <fo:inline color="#527F3F">&lt;options</fo:inline> xmlns="xdmp:document-insert"<fo:inline color="#527F3F">&gt;</fo:inline>     
    <fo:inline color="#527F3F">&lt;metadata&gt;</fo:inline>        
      <fo:inline color="#527F3F">&lt;map:map</fo:inline> xmlns:map="http://marklogic.com/xdmp/map"<fo:inline color="#527F3F">&gt;</fo:inline>          
        <fo:inline color="#527F3F">&lt;map:entry</fo:inline> key="validStart"<fo:inline color="#527F3F">&gt;</fo:inline>            
	  <fo:inline color="#527F3F">&lt;map:value&gt;</fo:inline>2019-02-06T08:00:00<fo:inline color="#527F3F">&lt;map:value&gt;</fo:inline>          
	<fo:inline color="#527F3F">&lt;/map:entry&gt;</fo:inline>          
	<fo:inline color="#527F3F">&lt;map:entry</fo:inline> key="validEnd"<fo:inline color="#527F3F">&gt;</fo:inline>            
	  <fo:inline color="#527F3F">&lt;map:value&gt;</fo:inline>9999-12-31T11:59:59Z<fo:inline color="#527F3F">&lt;/map:value&gt;</fo:inline>          
	<fo:inline color="#527F3F">&lt;/map:entry&gt;</fo:inline>         
      <fo:inline color="#527F3F">&lt;/map:map&gt;</fo:inline>    
    <fo:inline color="#527F3F">&lt;/metadata&gt;</fo:inline>  

<fo:inline color="#7F3300">return </fo:inline> <fo:inline color="#000099">temporal:document-insert</fo:inline>("/perso-verluste", 
                                 "duesel_alex_270774.xml", 
                                 <fo:inline color="#7F0037">$root</fo:inline>, <fo:inline color="#7F0037">$options</fo:inline>)</fo:block>
            
               <fo:block space-after="6pt">Nach der Aktualisierung enthält unsere Datenbank logisch gesehen drei Dokumente zu diesem Vorgang, 
die über eine Query gesucht werden können:</fo:block>
            
               
                     <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="7mm">
                           <fo:block space-after="6pt">Das Originaldokument, es ist vom 1.2.2019 bis zum 5.2.2019 im System aktiv</fo:block>
                        </fo:list-item-body></fo:list-item></fo:list-block>
                     <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="7mm">
                           <fo:block space-after="6pt">Die Aktualisierung, sie ist ab dem 6.2.2019 aktiv</fo:block>
                        </fo:list-item-body></fo:list-item></fo:list-block>
                     <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="7mm">
                           <fo:block space-after="6pt">Ein "Split"-Dokument<fo:inline id="d4e9791" color="white" font-size="0pt" visibility="hidden">.</fo:inline>, das aus der verspäteten Aktualisierung resultiert. Es ist ab dem 6.2.2019 im System aktiv, 
und zeigt den Zeitraum über einen Tag, vom 4.2.2019 bis 5.2.2019 - in dem ich ohne Perso registriert war, ihn aber tatsächlich
schon wieder hatte.</fo:block>
                        </fo:list-item-body></fo:list-item></fo:list-block>
                  <fo:block color="white">.</fo:block>
            
               <fo:block space-after="6pt">Im Gegensatz zu einer herkömmlichen Datenhaltung, bei der ein Datensatz aktualisiert wird - ggf. noch eine neue
Version angelegt wird - wird beim Dokument-basierten Ansatz mit bi-temporaler Datenhaltung jede Transaktion separat
abgespeichert. </fo:block>
            
               <fo:block space-after="6pt">Das ist vergleichbar mit einer Simulation des tatsächlichen Papierverkehrs bei buchhalterischen Tätigkeiten.</fo:block>
            
               <fo:block space-after="6pt">Die Abfrage so einer Datenbank ist dadurch nicht einfacher. Drei Queries, die jeweils eines dieser drei
Dokumente zurückgeben, könnten bspw. so aussehen:</fo:block>
            
               <fo:block space-after="6pt">
                  <fo:block space-after="6pt" margin-left="1mm" font-weight="bold" start-indent="0">Rückgabe des Originals</fo:block>
               </fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">xquery version "1.0-ml";<fo:inline color="#000099">cts:search</fo:inline>(<fo:inline color="#000099">fn:doc</fo:inline>(), <fo:inline color="#000099">cts:period-range-query</fo:inline>(
  "system",     
  "ISO_CONTAINS",     
  <fo:inline color="#000099">cts:period</fo:inline>(<fo:inline color="#000099">xs:dateTime</fo:inline>("2019-02-02T00:00:00"),                
             <fo:inline color="#000099">xs:dateTime</fo:inline>("2019-02-03T23:59:59")) )</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Hier wird geprüft, ob ein Dokument im System aktiv war, dass den Zeitraum vom 2.3. bis zum 3.3. umfasste (<fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">ISO_CONTAINS</fo:inline>
                  </fo:inline>). Diese Query ist erfolgreich und gibt das Original-Dokument des Vorgangs zurück: In diesem Zeitraum war ich also mit gestohlenem Perso registriert.</fo:block>
            
               <fo:block space-after="6pt">
                  <fo:block space-after="6pt" margin-left="1mm" font-weight="bold" start-indent="0">Rückgabe des Split-Dokuments</fo:block>
               </fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">xquery version "1.0-ml";<fo:inline color="#000099">cts:search</fo:inline>(<fo:inline color="#000099">fn:doc</fo:inline>(), <fo:inline color="#000099">cts:period-range-query</fo:inline>(
   "valid",
   "ALN_FINISHES",
   <fo:inline color="#000099">cts:period</fo:inline>(<fo:inline color="#000099">xs:dateTime</fo:inline>("2019-02-06T08:00:00"),
              <fo:inline color="#000099">xs:dateTime</fo:inline>("2019-02-06T08:00:00")) ))</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Bei dieser Query wird geprüft, ob es ein Dokument gibt, dass zu einem bestimmten Datum auf inaktiv gesetzt wurde (<fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">ALN_FINISHES</fo:inline>
                  </fo:inline>) - Das Split-Dokument wird automatisch auf inaktiv gesetzt, wenn die neue Version angelegt wird. Unser Suchdatum wäre also folgendes <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">2019-02-06T08:00:00</fo:inline>
                  </fo:inline>.</fo:block>
            
               <fo:block space-after="6pt">
                  <fo:block space-after="6pt" margin-left="1mm" font-weight="bold" start-indent="0">Rückgabe von Split und neuer Version</fo:block>
               </fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">xquery version "1.0-ml";<fo:inline color="#000099">cts:search</fo:inline>(<fo:inline color="#000099">fn:doc</fo:inline>(), <fo:inline color="#000099">cts:period-range-query</fo:inline>(
   "system",
   "ALN_AFTER",
   <fo:inline color="#000099">cts:period</fo:inline>(<fo:inline color="#000099">xs:dateTime</fo:inline>("2019-02-05T11:00:00"),
              <fo:inline color="#000099">xs:dateTime</fo:inline>("2019-02-05T11:20:00")) ))</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Hier wird geprüft ob es Dokumente gibt, die nach einer bestimmten Zeitspanne im System aktiv waren. Man beachte hier, dass eine Periode angegeben ist, obwohl nur ein Datum notwendig wäre. Der Vergleichsoperator hierzu heisst <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">ALN_AFTER</fo:inline>
                  </fo:inline>.</fo:block>
            
               <fo:block space-after="6pt">
                  <fo:block space-after="6pt" margin-left="1mm" font-weight="bold" start-indent="0">Rückgabe von aktueller Version</fo:block>
               </fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">xquery version "1.0-ml";<fo:inline color="#000099">cts:search</fo:inline>(<fo:inline color="#000099">fn:doc</fo:inline>(), <fo:inline color="#000099">cts:period-compare-query</fo:inline>(
   "system",
   "ISO_CONTAINS",
   "valid" ))</fo:block>
            
               <fo:block space-after="6pt">Die aktuelle Version kann in Erfahrung gebracht werden, indem geprüft wird, welche gültigen Dokumente innerhalb der Systemzeitspanne liegen. Das kann nur die aktuelle Version sein. Frühere gültige Versionen und Split-Dokumente wären vor der Systemzeit-Spanne.</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Die letzte Version eines Dokuments kann aber auch einfach über ein <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">latest</fo:inline>
                  </fo:inline> flag in Erfahrung gebracht werden:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">xquery version "1.0-ml";<fo:inline color="#000099">cts:search</fo:inline>(<fo:inline color="#000099">fn:doc</fo:inline>(), <fo:inline color="#000099">cts:and-query</fo:inline>((
    <fo:inline color="#000099">cts:collection-query</fo:inline>(("koolorder.xml")),
    <fo:inline color="#000099">cts:collection-query</fo:inline>(("latest")))))</fo:block>
            
               <fo:block space-after="6pt">
                  <fo:block space-after="6pt" margin-left="1mm" font-weight="bold" start-indent="0">Weiterführende Links</fo:block>
               </fo:block>
            
               <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Temporal Developer's Guide auf den MarkLogic Doku-Seiten<fo:footnote><fo:inline id="fnsource-d4e10048" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e10048">56)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e10048" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e10048">56)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://docs.marklogic.com/guide/temporal</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                     </fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">A Deep Dive into Bitemporal<fo:footnote><fo:inline id="fnsource-d4e10063" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e10063">57)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e10063" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e10063">57)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.marklogic.com/blog/bitemporal/</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                     </fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Temporale Datenhaltung in der Praxis mit Java<fo:footnote><fo:inline id="fnsource-d4e10078" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e10078">58)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e10078" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e10078">58)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.heise.de/developer/artikel/Temporale-Datenhaltung-in-der-Praxis-mit-Java-2100268.html?seite=all</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                     </fo:block>
                     </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
            <fo:block id="d4e10091" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="11pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                     Anlegen des Testszenarios auf der ML Konsole
                  </fo:block>
                  <fo:block space-after="6pt">Die Codefragmente aus dem vorherigen Kapitel sind folgend für eine ML Konsolensitzung aufbereitet:</fo:block>
               
                  <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt" hyphenate="false">Anlegen der temporalen Properties: <fo:inline font-family="Courier New, monospace" hyphenate="false">
                              <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">validStart</fo:inline>
                           </fo:inline>, <fo:inline font-family="Courier New, monospace" hyphenate="false">
                              <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">validEnd</fo:inline>
                           </fo:inline>, <fo:inline font-family="Courier New, monospace" hyphenate="false">
                              <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">systemStart</fo:inline>
                           </fo:inline>, <fo:inline font-family="Courier New, monospace" hyphenate="false">
                              <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">systemEnd</fo:inline>
                           </fo:inline>
                        </fo:block>
                        </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt" hyphenate="false">Anlegen der Indizes zum Suchen über Zeitbereiche: <fo:inline font-family="Courier New, monospace" hyphenate="false">
                              <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">database-range-field-index("dateTime", "systemStart",...</fo:inline>
                           </fo:inline>
                        </fo:block>
                        </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt" hyphenate="false">Anlegen der zwei Zeitachsen <fo:inline font-family="Courier New, monospace" hyphenate="false">
                              <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">system</fo:inline>
                           </fo:inline> und <fo:inline font-family="Courier New, monospace" hyphenate="false">
                              <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">valid</fo:inline>
                           </fo:inline>
                           <fo:inline id="d4e10167" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
                        </fo:block>
                        </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt" hyphenate="false">Anlegen der temporalen Collection <fo:inline font-family="Courier New, monospace" hyphenate="false">
                              <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">/perso-verluste</fo:inline>
                           </fo:inline>
                        </fo:block>
                        </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt">Anlegen des Originals am 1.2.2019</fo:block>
                        </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt">Aktualisierung am 6.2.2019</fo:block>
                        </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">xquery version "1.0-ml";

import <fo:inline color="#7F3300">module </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>admin = 
  "http://marklogic.com/xdmp/admin" at "/MarkLogic/admin.xqy";
import <fo:inline color="#7F3300">module </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>temporal = 
  "http://marklogic.com/xdmp/temporal" at "/MarkLogic/temporal.xqy";

<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">namespace </fo:inline>local = 'local:';
<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">variable </fo:inline><fo:inline color="#7F0037">$db</fo:inline> := "alex-test";

<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">local:create-temporal-fields</fo:inline>()
{
  <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$config</fo:inline> := <fo:inline color="#000099">admin:get-configuration</fo:inline>(),
      <fo:inline color="#7F0037">$dbid</fo:inline> := <fo:inline color="#000099">xdmp:database</fo:inline>(<fo:inline color="#7F0037">$db</fo:inline>)
  <fo:inline color="#7F3300">return </fo:inline>
    try {
      <fo:inline color="#000099">admin:save-configuration</fo:inline>(
        <fo:inline color="#000099">admin:database-add-field</fo:inline>(<fo:inline color="#7F0037">$config</fo:inline>, <fo:inline color="#7F0037">$dbid</fo:inline>, 
        <fo:inline color="#000099">admin:database-metadata-field</fo:inline>("validStart"))),
      <fo:inline color="#000099">admin:save-configuration</fo:inline>(
        <fo:inline color="#000099">admin:database-add-field</fo:inline>(<fo:inline color="#7F0037">$config</fo:inline>, <fo:inline color="#7F0037">$dbid</fo:inline>, 
        <fo:inline color="#000099">admin:database-metadata-field</fo:inline>("validEnd"))),
      <fo:inline color="#000099">admin:save-configuration</fo:inline>(
        <fo:inline color="#000099">admin:database-add-field</fo:inline>(<fo:inline color="#7F0037">$config</fo:inline>, <fo:inline color="#7F0037">$dbid</fo:inline>, 
        <fo:inline color="#000099">admin:database-metadata-field</fo:inline>("systemStart"))),
      <fo:inline color="#000099">admin:save-configuration</fo:inline>(
        <fo:inline color="#000099">admin:database-add-field</fo:inline>(<fo:inline color="#7F0037">$config</fo:inline>, <fo:inline color="#7F0037">$dbid</fo:inline>, 
        <fo:inline color="#000099">admin:database-metadata-field</fo:inline>("systemEnd")))
    } catch (<fo:inline color="#7F0037">$err</fo:inline>) {}
};

<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">local:create-range-index-fields</fo:inline>() 
{
  <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$config</fo:inline> := <fo:inline color="#000099">admin:get-configuration</fo:inline>(),
      <fo:inline color="#7F0037">$dbid</fo:inline> := <fo:inline color="#000099">xdmp:database</fo:inline>(<fo:inline color="#7F0037">$db</fo:inline>)
  return
    try {
      <fo:inline color="#000099">admin:save-configuration</fo:inline>(
        <fo:inline color="#000099">admin:database-add-range-field-index</fo:inline>(<fo:inline color="#7F0037">$config</fo:inline>, <fo:inline color="#7F0037">$dbid</fo:inline>, 
        <fo:inline color="#000099">admin:database-range-field-index</fo:inline>("dateTime", "validStart", "", <fo:inline color="#000099">fn:true</fo:inline>()))),
      <fo:inline color="#000099">admin:save-configuration</fo:inline>(
        <fo:inline color="#000099">admin:database-add-range-field-index</fo:inline>(<fo:inline color="#7F0037">$config</fo:inline>, <fo:inline color="#7F0037">$dbid</fo:inline>, 
        <fo:inline color="#000099">admin:database-range-field-index</fo:inline>("dateTime", "validEnd", "", <fo:inline color="#000099">fn:true</fo:inline>()))),
      <fo:inline color="#000099">admin:save-configuration</fo:inline>(
        <fo:inline color="#000099">admin:database-add-range-field-index</fo:inline>(<fo:inline color="#7F0037">$config</fo:inline>, <fo:inline color="#7F0037">$dbid</fo:inline>, 
        <fo:inline color="#000099">admin:database-range-field-index</fo:inline>("dateTime", "systemStart", "", <fo:inline color="#000099">fn:true</fo:inline>()))),
      <fo:inline color="#000099">admin:save-configuration</fo:inline>(
        <fo:inline color="#000099">admin:database-add-range-field-index</fo:inline>(<fo:inline color="#7F0037">$config</fo:inline>, <fo:inline color="#7F0037">$dbid</fo:inline>, 
        <fo:inline color="#000099">admin:database-range-field-index</fo:inline>("dateTime", "systemEnd", "", <fo:inline color="#000099">fn:true</fo:inline>())))
    } catch (<fo:inline color="#7F0037">$err</fo:inline>) {}  
};

<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">local:create-axes</fo:inline>()
{
  try {
    <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$t</fo:inline>1 := <fo:inline color="#000099">temporal:axis-create</fo:inline>(
          "valid",
          <fo:inline color="#000099">cts:field-reference</fo:inline>("validStart", "type=dateTime"),
          <fo:inline color="#000099">cts:field-reference</fo:inline>("validEnd", "type=dateTime")),
        <fo:inline color="#7F0037">$t</fo:inline>2 := <fo:inline color="#000099">temporal:axis-create</fo:inline>(
          "system",
          <fo:inline color="#000099">cts:field-reference</fo:inline>("systemStart", "type=dateTime"),
          <fo:inline color="#000099">cts:field-reference</fo:inline>("systemEnd", "type=dateTime"))
     <fo:inline color="#7F3300">return </fo:inline>()
   } catch (<fo:inline color="#7F0037">$err</fo:inline>) {}
};

<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">local:create-temporal-collection</fo:inline>() 
{
  try {
    <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$t</fo:inline>:= <fo:inline color="#000099">temporal:collection-create</fo:inline>("/perso-verluste", "system", "valid")
    <fo:inline color="#7F3300">return </fo:inline>()
  } catch (<fo:inline color="#7F0037">$err</fo:inline>) {}
};

<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">local:insert-original</fo:inline>()
{
  <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$root</fo:inline> := 
    <fo:inline color="#527F3F">&lt;vorgang&gt;</fo:inline>     
      <fo:inline color="#527F3F">&lt;perso-id&gt;</fo:inline>XYZ<fo:inline color="#527F3F">&lt;/perso-id&gt;</fo:inline>    
      <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>Alex Düsel<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>   
      <fo:inline color="#527F3F">&lt;status&gt;</fo:inline>gestohlen<fo:inline color="#527F3F">&lt;/status&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/vorgang&gt;</fo:inline>,
     <fo:inline color="#7F0037">$options</fo:inline> :=   
    <fo:inline color="#527F3F">&lt;options</fo:inline> xmlns="xdmp:document-insert"<fo:inline color="#527F3F">&gt;</fo:inline>     
      <fo:inline color="#527F3F">&lt;metadata&gt;</fo:inline>        
        <fo:inline color="#527F3F">&lt;map:map</fo:inline> xmlns:map="http://marklogic.com/xdmp/map"<fo:inline color="#527F3F">&gt;</fo:inline>          
          <fo:inline color="#527F3F">&lt;map:entry</fo:inline> key="validStart"<fo:inline color="#527F3F">&gt;</fo:inline>            
	          <fo:inline color="#527F3F">&lt;map:value&gt;</fo:inline>2019-02-01T08:23:11<fo:inline color="#527F3F">&lt;/map:value&gt;</fo:inline>          
	        <fo:inline color="#527F3F">&lt;/map:entry&gt;</fo:inline>          
	        <fo:inline color="#527F3F">&lt;map:entry</fo:inline> key="validEnd"<fo:inline color="#527F3F">&gt;</fo:inline>            
	          <fo:inline color="#527F3F">&lt;map:value&gt;</fo:inline>9999-12-31T11:59:59Z<fo:inline color="#527F3F">&lt;/map:value&gt;</fo:inline>          
	        <fo:inline color="#527F3F">&lt;/map:entry&gt;</fo:inline>         
         <fo:inline color="#527F3F">&lt;/map:map&gt;</fo:inline>    
      <fo:inline color="#527F3F">&lt;/metadata&gt;</fo:inline>  
    <fo:inline color="#527F3F">&lt;/options&gt;</fo:inline>
  <fo:inline color="#7F3300">return </fo:inline> <fo:inline color="#000099">temporal:document-insert</fo:inline>("/perso-verluste", 
                                   "duesel_alex_270774.xml", 
                                   <fo:inline color="#7F0037">$root</fo:inline>, <fo:inline color="#7F0037">$options</fo:inline>)
};

<fo:inline color="#7F3300">declare </fo:inline><fo:inline color="#7F3300">function </fo:inline><fo:inline color="#000099">local:insert-update</fo:inline>()
{
  <fo:inline color="#7F3300">let </fo:inline><fo:inline color="#7F0037">$root</fo:inline> :=    
    <fo:inline color="#527F3F">&lt;vorgang&gt;</fo:inline>     
      <fo:inline color="#527F3F">&lt;perso-id&gt;</fo:inline>XYZ<fo:inline color="#527F3F">&lt;/perso-id&gt;</fo:inline>    
      <fo:inline color="#527F3F">&lt;name&gt;</fo:inline>Alex Düsel<fo:inline color="#527F3F">&lt;/name&gt;</fo:inline>   
      <fo:inline color="#527F3F">&lt;status&gt;</fo:inline>gefunden<fo:inline color="#527F3F">&lt;/status&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/vorgang&gt;</fo:inline>,
    <fo:inline color="#7F0037">$options</fo:inline> :=   
    <fo:inline color="#527F3F">&lt;options</fo:inline> xmlns="xdmp:document-insert"<fo:inline color="#527F3F">&gt;</fo:inline>     
      <fo:inline color="#527F3F">&lt;metadata&gt;</fo:inline>        
        <fo:inline color="#527F3F">&lt;map:map</fo:inline> xmlns:map="http://marklogic.com/xdmp/map"<fo:inline color="#527F3F">&gt;</fo:inline>          
          <fo:inline color="#527F3F">&lt;map:entry</fo:inline> key="validStart"<fo:inline color="#527F3F">&gt;</fo:inline>            
	          <fo:inline color="#527F3F">&lt;map:value&gt;</fo:inline>2019-02-06T08:00:00<fo:inline color="#527F3F">&lt;/map:value&gt;</fo:inline>          
	        <fo:inline color="#527F3F">&lt;/map:entry&gt;</fo:inline>          
	        <fo:inline color="#527F3F">&lt;map:entry</fo:inline> key="validEnd"<fo:inline color="#527F3F">&gt;</fo:inline>            
	          <fo:inline color="#527F3F">&lt;map:value&gt;</fo:inline>9999-12-31T11:59:59Z<fo:inline color="#527F3F">&lt;/map:value&gt;</fo:inline>          
	        <fo:inline color="#527F3F">&lt;/map:entry&gt;</fo:inline>         
         <fo:inline color="#527F3F">&lt;/map:map&gt;</fo:inline>    
      <fo:inline color="#527F3F">&lt;/metadata&gt;</fo:inline>  
    <fo:inline color="#527F3F">&lt;/options&gt;</fo:inline>
  <fo:inline color="#7F3300">return </fo:inline> <fo:inline color="#000099">temporal:document-insert</fo:inline>("/perso-verluste", 
                                   "duesel_alex_270774.xml", 
                                   <fo:inline color="#7F0037">$root</fo:inline>, <fo:inline color="#7F0037">$options</fo:inline>)
};

( <fo:inline color="#000099">xdmp:invoke-function</fo:inline>(local:create-temporal-fields#0),
  <fo:inline color="#000099">xdmp:invoke-function</fo:inline>(local:create-range-index-fields#0),
  <fo:inline color="#000099">xdmp:invoke-function</fo:inline>(local:create-axes#0),
  <fo:inline color="#000099">xdmp:invoke-function</fo:inline>(local:create-temporal-collection#0),
  <fo:inline color="#000099">xdmp:invoke-function</fo:inline>(local:insert-original#0),
  <fo:inline color="#000099">xdmp:invoke-function</fo:inline>(local:insert-update#0))</fo:block>
               
                  <fo:block space-after="6pt" keep-together.within-page="10" font-style="italic" background-color="white" border-top="none" border-bottom="none" margin="0mm" padding-top="1mm" padding-bottom="1mm" padding-left="1mm"><fo:list-block start-indent="0mm" space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label start-indent="2mm"><fo:block color="#808080">►</fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt">Beachtenswert ist hier,</fo:block>
                           
                              <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm">
                                    <fo:block space-after="6pt" hyphenate="false">dass die einzelnen Schritte als Funktion über <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                       <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xdmp:invoke-function</fo:inline>
                                    </fo:inline> aufgerufen werden. Dieses Konstrukt wird normalerweise benutzt um eine Funktion anonym<fo:footnote><fo:inline id="fnsource-d4e10757" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e10757">59)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e10757" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e10757">59)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://de.wikipedia.org/wiki/Anonyme_Funktion</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> zu deklarieren und als Transaktion<fo:inline id="d4e10766" color="white" font-size="0pt" visibility="hidden">.</fo:inline> aufzurufen. Marklogic bietet weitere Möglichkeiten<fo:footnote><fo:inline id="fnsource-d4e10772" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e10772">60)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e10772" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e10772">60)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://docs.marklogic.com/guide/app-dev/transactions</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> transaktional zu arbeiten.</fo:block>
                                 </fo:list-item-body></fo:list-item></fo:list-block>
                              <fo:list-block space-after="6pt" keep-together.within-page="always"><fo:list-item space-after="4pt" start-indent="7mm"><fo:list-item-label><fo:block><fo:inline background-color="#404040" color="white" padding-top="2px" padding-left="2px" padding-right="2px">►</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="13mm">
                                    <fo:block space-after="6pt" hyphenate="false">Um die 5 Tage zwiachen Verlustmeldung und Wiederauffinden zu simulieren, wurde zwischem dem Anlegen der Dokumente ein <fo:inline font-family="Courier New, monospace" hyphenate="false">
                                       <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">xdmp:sleep</fo:inline>
                                    </fo:inline> Statement eingefügt.</fo:block>
                                 </fo:list-item-body></fo:list-item></fo:list-block>
                           <fo:block color="white">.</fo:block>
                        </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/></fo:block>
               
                  <fo:block space-after="6pt">Lassen wir diese Query auf einer frischen Datenbank laufen, so erhalten wir die folgendes Ergebnis:</fo:block>
               
                  <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Nach der Ausführung obiger Query gibt es in der DB drei Dokumente, das Orginal, das Split-Dokument und die Aktualisierung. Das Split-Dokuments und das Originals sind als Vorgänger mit Suffix gekennzeichnet.</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/7c58baac-7b83-41b9-adf6-12f63539cbb6/temporal-documents.png" content-height="" content-width="auto"/></fo:block></fo:block>
               </fo:block><fo:block id="d4e10822" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="11pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                     Ausführen einiger Beispiel-Queries
                  </fo:block>
                  <fo:block space-after="6pt">Wie im vorherigen Kapitel beschrieben, muss in der Konsolensitzung zwischen Anlegen der Originalversion und der Aktualisierung eine Verzögerung eingebaut werden, um irgendwie das "Zeitloch" zu simulieren, in dem - wenn wir bei dem vorherigen Beispiel bleiben -  der Personalausweis als Verlust gemeldet war, aber tatsächlich schon wieder in meinem Besitz war.</fo:block>
               
                  <fo:block space-after="6pt" hyphenate="false">Ohne jetzt groß <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">validStart</fo:inline>
                     </fo:inline> und <fo:inline font-family="Courier New, monospace" hyphenate="false">
                        <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">validEnd</fo:inline>
                     </fo:inline> anzupassen, habe ich das Beispiel mit einer Verzögerung von 50 Sekunden lassen:</fo:block>
               
                  <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">( <fo:inline color="#000099">xdmp:invoke-function</fo:inline>(local:create-temporal-fields#0),
  <fo:inline color="#000099">xdmp:invoke-function</fo:inline>(local:create-range-index-fields#0),
  <fo:inline color="#000099">xdmp:invoke-function</fo:inline>(local:create-axes#0),
  <fo:inline color="#000099">xdmp:invoke-function</fo:inline>(local:create-temporal-collection#0),
  <fo:inline color="#000099">xdmp:invoke-function</fo:inline>(local:insert-original#0),
  <fo:inline font-weight="bold"><fo:inline color="#000099">xdmp:sleep</fo:inline>(50000),</fo:inline>
  <fo:inline color="#000099">xdmp:invoke-function</fo:inline>(local:insert-update#0))</fo:block>
               
                  <fo:block space-after="6pt">Und bekomme folgendes Ergebnis:</fo:block>
               <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Diese Daten wurde aus der Exploreransicht der Konsolensitzung entnommen. </fo:block><fo:table font-weight="normal" width="100%" table-layout="fixed">
                           <fo:table-column column-number="" column-width="proportional-column-width(0.1755868544600939)"/>
                           <fo:table-column column-number="" column-width="proportional-column-width(0.20657276995305165)"/>
                           <fo:table-column column-number="" column-width="proportional-column-width(0.2084507042253521)"/>
                           <fo:table-column column-number="" column-width="proportional-column-width(0.19812206572769953)"/>
                           <fo:table-column column-number="" column-width="proportional-column-width(0.2112676056338028)"/>
                           <fo:table-header background-color="#fff" font-weight="bold"><fo:table-row keep-together.within-page="200" keep-with-next.within-page="50" keep-with-previous.within-page="40">
                                 <fo:table-cell text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-left-style="solid" border-left-width="1pt" border-left-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">Document</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">validStart</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">validEnd</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">systemStart</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">systemEnd</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                              </fo:table-row></fo:table-header>
                           <fo:table-body><fo:table-row keep-together.within-page="200" keep-with-next.within-page="50">
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-left-style="solid" border-left-width="1pt" border-left-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">duesel_alex_270774.2462380991258156208.xml</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">2019-03-19T14:17:00</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">
                                       <fo:inline font-weight="bold">unendlich</fo:inline>
                                    </fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">2019-03-19T13:18:28</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">2019-03-19T13:19:18</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                              </fo:table-row><fo:table-row keep-together.within-page="200">
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-left-style="solid" border-left-width="1pt" border-left-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">duesel_alex_270774.819911042637597172.xml</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">2019-03-19T14:17:00</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">2019-03-19T14:18:00</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">2019-03-19T13:19:18</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">
                                       <fo:inline font-weight="bold">unendlich</fo:inline>
                                    </fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                              </fo:table-row><fo:table-row keep-together.within-page="200" keep-with-previous.within-page="40">
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-left-style="solid" border-left-width="1pt" border-left-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">duesel_alex_270774.xml</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">2019-03-19T14:18:00</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">
                                       <fo:inline font-weight="bold">unendlich</fo:inline>
                                    </fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">2019-03-19T13:19:18</fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                                 <fo:table-cell background-color="white" text-align="inherit" border-right-style="solid" border-right-width="1pt" border-right-color="#fff" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                                    <fo:block space-after="6pt">
                                       <fo:inline font-weight="bold">unendlich</fo:inline>
                                    </fo:block>
                                 </fo:block></fo:block-container></fo:table-cell>
                              </fo:table-row></fo:table-body>
                        </fo:table>
                  <fo:block space-after="6pt"/>
               
                  <fo:block space-after="6pt">Wie man sieht, müsste sich jetzt das Zeitloch von 50 Sekunden der Systemzeiten innerhalb der gültigen Zeiten befinden, um das Beispiel mit dem verlorenen Ausweis zumindest für die Zeitspanne von 50 Sekunden simulieren zu können. </fo:block>
               
                  <fo:block space-after="6pt">Das korrekte Setup bleibt an dieser Stelle dem geneigten Leser selbst überlassen.</fo:block>
               
                  <fo:block space-after="6pt">Zwei Queries, die die Werte in der Tabelle illustriere sind bspw. folgende:</fo:block>
               
                  <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Bei dieser Query werden alle Dokumente gesucht, deren gültiger Zeitraum, den Zeitraum zwischen 14:17 Uhr und 14:18 Uhr umfasst. Das sind das Split-Dokument und das Original-Dokument. Beide mit dem Status "gestolen", da erst um 14:18 Uhr der Fund bekannt gegeben wurde.</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/62faa067-ecd5-4053-8388-e7e151f04542/result1.png" content-height="" content-width="auto"/></fo:block></fo:block>
               
                  <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Verändert man den Zeitraum nach 18:00 Uhr, so wird das Original - wie erwartet - durch das Update verdrängt.</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/62faa067-ecd5-4053-8388-e7e151f04542/result2.png" content-height="" content-width="auto"/></fo:block></fo:block>
               
                  <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Die aktuelle Version des temporal verwalteten Dokuments ist in der Collection "<fo:inline hyphenate="false" font-style="italic">latest</fo:inline>" gespeichert.</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/62faa067-ecd5-4053-8388-e7e151f04542/result_3.png" content-height="" content-width="auto"/></fo:block></fo:block>
               
                  <fo:block space-after="6pt">Wie man sie kann man - ausreichend Lösungsphantasie vorausgesetzt - einiges mit diesen Queries anstellen. Hilfreich ist sicherlich auch die umfangreiche Liste der Vergleichsoperatoren, die MarkLogic zum Vergleichen von Zeiträumen bereitstellt: ISO Operator<fo:footnote><fo:inline id="fnsource-d4e11122" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e11122">61)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e11122" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e11122">61)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://docs.marklogic.com/guide/temporal/searching#id_92200</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote> und ALLEN Operators<fo:footnote><fo:inline id="fnsource-d4e11131" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e11131">62)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e11131" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e11131">62)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://docs.marklogic.com/guide/temporal/searching#id_98704</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>.</fo:block>
               </fo:block></fo:block><fo:block id="d4e11144" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="13pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                  MarkLogic Tools
               </fo:block>
               <fo:block space-after="6pt">MarkLogic bringt out-of-the-box schon eine Vielzahl an Ansichten und Tools mit. Da aber ein produktiver Applicatione Server nicht auch noch Entwicklerwerkzeuge bündeln sollte, bzw. verhindern sollte, dass irgendwelche halbfertigen Sachen produktiv laufen, ist es nicht verwunderlich, dass einige interessante Ansichten fehlen, wie z.B. ein Datenbrowser
                     <fo:inline id="d4e11158" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
                   mit Syntaxhighlighting.</fo:block>
            
               <fo:block space-after="6pt">Hier springen fleissige Entwickler in die Bresche und stellen einige, interessante Werkzeuge zur Verfügung.</fo:block>
            
               <fo:block space-after="6pt">
                  
               </fo:block>
            <fo:block id="d4e11184" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="11pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                     mlproj - Project and Environment Manager
                  </fo:block>
                  <fo:block space-after="6pt">bla bla</fo:block>
               </fo:block><fo:block id="d4e11200" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="11pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                     EXPath Konsole
                  </fo:block>
                  <fo:block space-after="6pt">Die MarkLogic EXPath Konsole<fo:footnote><fo:inline id="fnsource-d4e11212" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e11212">63)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e11212" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e11212">63)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://github.com/fgeorges/expath-ml-console</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>ist eine Webanwendung, die ausserhalb des MarkLgic Servers verschiedene Ansichten auf die Daten bereitstellt. Sie umfasst auch einige praktische Tools, wie:</fo:block>
               
                  <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt">Package Manager<fo:inline id="d4e11231" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
                        </fo:block>
                        </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt">Browser (Für Dokumente und Tripel)</fo:block>
                        </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt">Document Manager<fo:inline id="d4e11252" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
                        </fo:block>
                        </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                           <fo:block space-after="6pt">XQuery Profiler<fo:inline id="d4e11267" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
                        </fo:block>
                        </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
               
                  <fo:block space-after="6pt">Im Rahmen dieser Lektüre wird nur der Browser kurz vorgestellt, weil man damit unkompliziert die Daten sichten kann. </fo:block>
               
                  <fo:block space-after="6pt">Diese werden in einem Editorfenster mit Syntaxhighlightiung dargestellt. Die Anwendung sollte nicht produktiv eingesetzt werden, sondern ist für Entwicklungszwecke gedacht.</fo:block>
               </fo:block><fo:block id="d4e11293" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="11pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                     mlcp - Content Pump
                  </fo:block>
                  <fo:block space-after="6pt">bl abl </fo:block>
               </fo:block></fo:block></fo:block><fo:block id="d4e11310" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="14pt" provisional-distance-between-starts="10mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
               Testing
            </fo:block>
            <fo:block space-after="6pt">In diesem Kapitel werden einige ausgewählte Themen zum Testing von XSLT und XQuery Programmen dargestellt. Dabei geht es weder um Vollständigkeit, noch um die beste/eleganteste Lösung, sondern eher darum die Tools und deren Anwendung vorzustellen.</fo:block>
         <fo:block id="d4e11324" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="13pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                  Validierung mit Schematron
               </fo:block>
               <fo:block space-after="6pt">Um die Korrektheit einer XML Instanz zu prüfen, gib es verschiedene Schemata, wie <fo:inline font-weight="bold">XSD</fo:inline>, <fo:inline font-weight="bold">RNG</fo:inline> oder <fo:inline font-weight="bold">DTD</fo:inline>
                  <fo:inline id="d4e11345" color="white" font-size="0pt" visibility="hidden">.</fo:inline>, welche der Parser beim Aufbau des DOM Baums heranzieht. Eine Validierung<fo:inline id="d4e11351" color="white" font-size="0pt" visibility="hidden">.</fo:inline> mit Apache Xerces könnte beispielsweise als Java Code<fo:inline id="d4e11361" color="white" font-size="0pt" visibility="hidden">.</fo:inline> folgendermaßen angestossen werden:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">URL schemaFile = new URL("http://host:port/filename.xsd");
Source xmlFile = new StreamSource(new File("web.xml"));
SchemaFactory schemaFactory = SchemaFactory
    .newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
try {
  Schema schema = schemaFactory.newSchema(schemaFile);
  Validator validator = schema.newValidator();
  validator.validate(xmlFile);
  System.out.println(xmlFile.getSystemId() + " is valid");
} catch (SAXException e) {
  System.out.println(xmlFile.getSystemId() + " is NOT valid reason:" + e);
} catch (IOException e) {</fo:block>
            
               <fo:block space-after="6pt">Schema Dateien können aber auch in XML Editoren eingebunden werden, um schon während der Eingabe der XML Instanz die Korrektheit zu überprüfen. </fo:block>
            
               <fo:block space-after="6pt">Das geht einerseits über die Angabe des Doctypes in der XML Instanz, anderseits bieten auch alle Editoren die Möglichkeit ein bestimmtes Schema explizit auszuwählen, um gegen dieses auf Anforderung zu validieren.</fo:block>
            
               <fo:block space-after="6pt">Gilt es komplexere Businessregeln zu überprüfen, die über Syntax-, Konsistenz- und einfache Korrektheitschecks hinausgehen, empfiehlt sich eine Validierung mit Schematron Regeln.</fo:block>
            
               <fo:block space-after="6pt">Bei einer Schematron Validierung wird eine XML Instanz mit Hilfe eines automatisch generierten XSLT Stylesheets überprüft. Dieses kontextabhängige Stylesheet wird aus einer in der Schematron Syntax vom Autor verfassten Regelbasis, die wiederum in XML vorliegt, über ein zweites XSLT Stylesheet generiert - Dieses zweite XSLT Stylesheet ist sozusagen das eigentliche Schematron Programm. </fo:block>
            
               <fo:block space-after="6pt">Das folgende Diagramm veranschaulicht die Vorgehensweise anhand eines Filter-Szenarios<fo:inline id="d4e11413" color="white" font-size="0pt" visibility="hidden">.</fo:inline>, bei dem ein XML Dokument mit einigen ungültigen Passagen in eine gefilterte Darstellung überführt wird.</fo:block>
            
               <fo:block font-style="italic" keep-with-next="always" keep-together.within-page="always" space-after="6pt" border="#e3e3e3 2pt solid" padding="5pt" margin="0mm">Einfacher Batch-Prozess zur Validierung mit Schematron und anschliessendem Filtern der Ergebnisse</fo:block><fo:block start-indent="0mm" space-after.conditionality="discard" margin-bottom="6pt" margin-top="12pt" keep-together.within-page="7" id=""><fo:block start-indent="0mm" space-after="6pt" padding="2pt" keep-with-next.within-page="auto" text-align="center"><fo:external-graphic src="./client/data/6fd7b270-9d1f-4f8e-996f-13b5862956a9/schematron.svg" content-height="" content-width="auto"/></fo:block></fo:block>
                     <fo:block id="d4e11430" font-weight="bold" margin-bottom="12pt" keep-with-previous.within-page="always"><fo:inline wrap-option="no-wrap">Bild 11:</fo:inline> Schematron Validierung mit Filter</fo:block>
                  
            
               <fo:block space-after="6pt" hyphenate="false">Zu finden ist das Schematron Repo auf Github<fo:footnote><fo:inline id="fnsource-d4e11445" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e11445">64)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e11445" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e11445">64)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://github.com/Schematron/schematron</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>. Dieses Repo ist etwas unübersichtlich. Der relevante Teil des Sourcecodes befindet sich unter: <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">schematron/code</fo:inline>
                  </fo:inline>
               </fo:block>
            
               <fo:block space-after="6pt">Um die Schematron XSLT Skripte in eine eigene XSLT Anwendung per Kommandozeile einzubinden, könnte man folgendermassen vorgehen: </fo:block>
            
               <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Im eigenen GIT Projekt das Schematron Projekt als Submodule referenzieren.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt" hyphenate="false">Eine Regelbasis anlegen, beispielsweise <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">$project_name.sch</fo:inline>
                        </fo:inline>.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt" hyphenate="false">Zwei Batch-Skripte anlegen, beispielsweise <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">generate_schema.sh</fo:inline>
                        </fo:inline> und <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">validate.sh</fo:inline>
                        </fo:inline>.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Mittels des Skripts <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">generate_schema.sh</fo:inline>
                  </fo:inline> wird aus der Schematron Regelbasis das Schematron XSLT Stylesheet generiert. Der Inhalt dieser Batchdatei könnte zum Beispiel so aussehen:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">saxon <fo:inline color="#7F0037">$script</fo:inline>_dir/<fo:inline color="#7F0037">$project</fo:inline>_name_validation.sch <fo:inline color="#7F0037">$script</fo:inline>_dir/schematron/iso_dsdl_include.xsl
 | \ saxon -s:- <fo:inline color="#7F0037">$script</fo:inline>_dir/schematron/iso_abstract_expand.xsl | \
saxon -s:- <fo:inline color="#7F0037">$script</fo:inline>_dir/schematron/iso_svrl_for_xslt2.xsl \
  <fo:inline font-weight="bold">generate-fired-rule</fo:inline>=false &gt; <fo:inline color="#7F0037">$script</fo:inline>_dir/<fo:inline color="#7F0037">$project</fo:inline>_name_validation.xsl</fo:block>
            
               <fo:block space-after="6pt">Der Prozess zum Erzeugen des projektspezifischen Validerungs-XSLT-Skripts ist dreistufig und wird über die folgenden XSLT Schritte abgearbeitet.</fo:block>
            
               <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt" hyphenate="false">
                        <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">iso_dsdl_include.xsl</fo:inline>
                        </fo:inline>
                     </fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt" hyphenate="false">
                        <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">iso_abstract_expand.xsl</fo:inline>
                        </fo:inline>
                     </fo:block>
                     </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt" hyphenate="false">
                        <fo:inline font-family="Courier New, monospace" hyphenate="false">
                           <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">iso_svrl_for_xslt2.xsl</fo:inline>
                        </fo:inline>
                     </fo:block>
                     </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Herauszufinden, was in diesen Skripten passiert, sei dem geneigten Leser selbst überlassen. Uns interessiert an dieser Stelle nur das Resultat, nämlich das XSLT Stylesheet <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">$project_name_validation.xsl</fo:inline>
                  </fo:inline>.</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Dieses Skript wird in der Batchdatei <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">validate.sh</fo:inline>
                  </fo:inline> aufgerufen:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">saxon <fo:inline color="#7F0037">$xml</fo:inline>_instance_to_check.xml <fo:inline color="#7F0037">$script</fo:inline>_dir/<fo:inline color="#7F0037">$project</fo:inline>_name_validation.xsl \
  &gt; <fo:inline color="#7F0037">$validation-result</fo:inline>.xml</fo:block>
            
               <fo:block space-after="6pt">Die Ausgabe dieses Prüfprozesses ist eine XML Datei mit den Fehlern in der Eingabe-XML-Instanz, die weiterverarbeitet werden kann, beispielsweise als Filterkriterium für einen nachfolgenden Prozessschritt. Ihr Inhalt dieser Datei sieht z.B. wie folgt aus:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;svrl:schematron-output</fo:inline> xmlns:svrl="http://purl.oclc.org/dsdl/svrl" [...]
  &lt;svrl:active-pattern document="file:/Users/alex/xml_instance_to_check.xml" 
   id="default" name="default"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;svrl:failed-assert</fo:inline> test="count(key('unique-ids', current()))=1"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;svrl:text&gt;</fo:inline>ID is not unique!<fo:inline color="#527F3F">&lt;/svrl:text&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;svrl:diagnostic-reference</fo:inline> diagnostic="default"<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;bk:id</fo:inline> xmlns:bk="http://tekturcms/namespaces/book"<fo:inline color="#527F3F">&gt;</fo:inline>1234-5678-9<fo:inline color="#527F3F">&lt;/my:id&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/svrl:diagnostic-reference&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/svrl:failed-assert&gt;</fo:inline>
  [...]</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Neben den <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">svrl:failed-assert</fo:inline>
                  </fo:inline> Elementen, die angeben, was bei der überprüften XML-Instanz fehlgeschlagen ist, gibt es auch die Möglichkeit sich positive Ergebnisse anzeigen zu lassen - über das Element <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">svrl:successful-report</fo:inline>
                  </fo:inline>.</fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">Konkret sagt uns das obige XML Schnipsel, dass unsere <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">id</fo:inline>
                  </fo:inline> mit dem Wert <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">1234-5688-9</fo:inline>
                  </fo:inline> im geprüften XML Dokument nicht eindeutig ist. Die Schematron Regelbasis, die wir zur Überprüfung angegebenen haben, sieht so aus:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;schema</fo:inline> xmlns:sch="http://purl.oclc.org/dsdl/schematron" [...]
  &lt;xsl:key name="unique-ids" match="bk:id" use="."<fo:inline color="#527F3F">/&gt;</fo:inline>
  &lt;sch:<fo:inline color="#7F3300">let </fo:inline>name="date-regex" value="'^((19|2[0-9])[0-9]{2})-(0[1-9]|1[012])
                                     -(0[1-9]|[12][0-9]|3[01])$'"/&gt;
  <fo:inline color="#527F3F">&lt;sch:pattern</fo:inline> id="default"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;sch:rule</fo:inline> context="book"<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;sch:assert</fo:inline> id="check-book-id" role="error" test="count(key('unique-ids', bk:id))=1" 
                  diagnostics="default"<fo:inline color="#527F3F">&gt;</fo:inline>ID is not unique!<fo:inline color="#527F3F">&lt;/sch:assert&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;sch:assert</fo:inline> id="check-book-published" role="error" 
                  test="matches(bk:published,$date-regex)
    &lt;/sch:rule<fo:inline color="#527F3F">&gt;</fo:inline>
    [...]
  <fo:inline color="#527F3F">&lt;/sch:pattern&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;sch:diagnostics&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;sch:diagnostic</fo:inline> id="default"<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;xsl:element</fo:inline> name="bk:id"<fo:inline color="#527F3F">&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;xsl:value-of</fo:inline> select="bk:id"<fo:inline color="#527F3F">/&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/xsl:element&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/sch:diagnostic&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/sch:diagnostics&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">Neben der "successful" und "failed" Regeln ist auch die Deklaration von Funktionen und Variablen im Body der Regelbasis erlaubt. Dies ermöglicht komplexe Bedingungen, bespw. durch das Nachschlagen in einer Lookup-Tabelle abzuprüfen. </fo:block>
            </fo:block><fo:block id="d4e11823" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="13pt" provisional-distance-between-starts="15mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
                  Erste Schritte mit Xspec
               </fo:block>
               <fo:block space-after="6pt">XSpec<fo:inline id="d4e11835" color="white" font-size="0pt" visibility="hidden">.</fo:inline> ist ein Test-Framework<fo:footnote><fo:inline id="fnsource-d4e11844" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d4e11844">65)</fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d4e11844" provisional-distance-between-starts="7mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d4e11844">65)</fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://github.com/xspec</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                  <fo:inline id="d4e11853" color="white" font-size="0pt" visibility="hidden">.</fo:inline> für XSLT, XQuery und Schematron. 
Um beispielsweise komplexe Schematron Regeln zu testen, hinterlegt man in einem <fo:inline font-weight="bold">Test-Szenario</fo:inline> 
Erwartungswerte für positive und negative Testfälle in Form von XML Schnippseln.</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;test-szenario&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;testfall&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;personen&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;person&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;vorname&gt;</fo:inline>Horst<fo:inline color="#527F3F">&lt;/vorname&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;nachname&gt;</fo:inline>Schlämmer<fo:inline color="#527F3F">&lt;/nachname&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;gewicht&gt;</fo:inline>100<fo:inline color="#527F3F">&lt;/gewicht&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/person&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;person&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;vorname&gt;</fo:inline>Gundula<fo:inline color="#527F3F">&lt;/vorname&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;nachname&gt;</fo:inline><fo:inline color="#527F3F">&lt;/nachname&gt;</fo:inline>
        <fo:inline color="#527F3F">&lt;gewicht&gt;</fo:inline>60<fo:inline color="#527F3F">&lt;/gewicht&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;/person&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/personen&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/testfall&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/test-szenario&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt" hyphenate="false">in einer XSpec Datei <fo:inline font-family="Courier New, monospace" hyphenate="false">
                     <fo:inline font-style="italic" background-color="#f3f3f3" keep-together.within-line="always">*.xspec</fo:inline>
                  </fo:inline> werden <fo:inline font-weight="bold">Assert- und Not-Assert-Methoden</fo:inline>
                  <fo:inline id="d4e11949" color="white" font-size="0pt" visibility="hidden">.</fo:inline>deklariert:</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;x:description</fo:inline> xslt-version="2.0" xmlns:x="http://www.jenitennison.com/xslt/xspec" 
               schematron="test.sch"<fo:inline color="#527F3F">&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;x:scenario</fo:inline> label="ALL"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;x:context</fo:inline> href="test.xml"<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;x:expect-not-assert</fo:inline> id="person-nachname-rule" location="//person[1]/nachname"<fo:inline color="#527F3F">/&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;x:expect-assert</fo:inline> id="person-nachname-rule" location="//person[2]/nachname"<fo:inline color="#527F3F">/&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/x:scenario&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/x:description&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">Grds. bdeutet ein Assert, dass das Mapping zwischen tatsächlichem Wert und Erwartungswert des
Testfalls<fo:inline id="d4e12003" color="white" font-size="0pt" visibility="hidden">.</fo:inline> positiv erfüllt ist. Beim Not-Assert ist das Gegenteil der Fall. Im obigen Beispiel
reichen zwei Regeln, um den Testfall vollständig abzudecken.</fo:block>
            
               <fo:block space-after="6pt">Wenn man Schematron<fo:inline id="d4e12015" color="white" font-size="0pt" visibility="hidden">.</fo:inline> Regeln mit Hilfe von XSpec testen will, dann muss man ein bisschen um 
die Ecke denken. Denn auch diese Regeln werden mittels Assert und Not-Assert modelliert.</fo:block>
            
               <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt"><fo:inline color="#527F3F">&lt;sch:schema</fo:inline> xmlns:sch="http://purl.oclc.org/dsdl/schematron" 
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform" queryBinding="xslt2"<fo:inline color="#527F3F">&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;sch:pattern</fo:inline> id="main"<fo:inline color="#527F3F">&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;sch:rule</fo:inline> context="nachname"<fo:inline color="#527F3F">&gt;</fo:inline>
      <fo:inline color="#527F3F">&lt;sch:assert</fo:inline> id="person-nachname-rule" role="error" test="normalize-space(.)"<fo:inline color="#527F3F">&gt;</fo:inline>
        Der Nachname der Person mit ID: <fo:inline color="#527F3F">&lt;sch:value-of</fo:inline> select="@id"<fo:inline color="#527F3F">/&gt;</fo:inline> fehlt! 
      <fo:inline color="#527F3F">&lt;/sch:assert&gt;</fo:inline>
    <fo:inline color="#527F3F">&lt;/sch:rule&gt;</fo:inline>
  <fo:inline color="#527F3F">&lt;/sch:pattern&gt;</fo:inline>
<fo:inline color="#527F3F">&lt;/sch:schema&gt;</fo:inline></fo:block>
            
               <fo:block space-after="6pt">In der Schematron-Regel wird zugesichert (Assert), dass jede Person einen Nachnamen hat.</fo:block>
            
               <fo:block space-after="6pt">Hat sie keinen Nachnamen so wird der Bericht zum Fehlerfall in die Schematron Ergebnisdatei
geschrieben. Diese Datei wertet nun Xspec aus.</fo:block>
            
               <fo:block space-after="6pt" keep-together.within-page="10" font-style="italic" background-color="white" border-top="none" border-bottom="none" margin="0mm" padding-top="1mm" padding-bottom="1mm" padding-left="1mm"><fo:list-block start-indent="0mm" space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label start-indent="2mm"><fo:block color="#808080">►</fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                        <fo:block space-after="6pt">Erscheint ein Fehler (= das Feld <fo:inline font-weight="bold">nachname</fo:inline> ist leer), so greift bei Xspec die Assert-Regel! Das ist die umgekehrte Logik zu den Schematron Regeln.</fo:block>
                     </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/></fo:block>
            
               <fo:block space-after="6pt">Als Eselsbrücke kann man
ein Assert in der Xspec Datei gleichsetzen mit <fo:inline font-weight="bold">Appear</fo:inline> und ein Not-Assert mit
<fo:inline font-weight="bold">Not-Appear</fo:inline>. <fo:inline id="d4e12112" color="white" font-size="0pt" visibility="hidden">.</fo:inline>
               </fo:block>
            
               <fo:block space-after="6pt">Ein Assert sichert also zu, dass sich ein Fehlerbericht in der
Schematron Ergebnisdatei zum Testfall befindet. Ein Not-Assert sichert zu, dass
sich kein Fehlerbericht befindet. </fo:block>
            
               <fo:block space-after="6pt"> Wie man sich leicht vorstellen kann, sind Assert-Regeln in diesem Fall leicht zu finden,
dazu muss man nur die Schematron Testregeln ins Leere zeigen lassen. Alles ist grün
und alles ist gut - dem Augenschein nach.</fo:block>
            </fo:block></fo:block></fo:block><fo:block id="d4e12138" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="16pt" provisional-distance-between-starts="12mm" space-after="8pt" font-weight="bold" hyphenate="false" line-height="140%">
            Zusätzliches Know-How
         </fo:block><fo:block space-after="8pt"><fo:block font-weight="bold" line-height="130%" text-align="left" hyphenate="false" keep-with-next.within-page="40" space-after="6pt" font-size="11pt">Kapitelinhalt</fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" keep-with-previous="always" space-before="4pt"><fo:list-block><fo:list-item start-indent="0mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e12160">
               GIT Einmaleins 
            <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e12160"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block font-size="10pt" line-height="120%" font-weight="normal" keep-with-previous="always" space-before="4pt"><fo:list-block><fo:list-item start-indent="0mm"><fo:list-item-label end-indent="label-end()"><fo:block/></fo:list-item-label><fo:list-item-body start-indent="5mm"><fo:block><fo:basic-link internal-destination="d4e12205">
               XML Editoren 
            <fo:leader leader-pattern="dots" leader-pattern-width="2mm" font-weight="bold" leader-length.optimum="0pt" keep-with-previous="always" keep-with-next="always" padding-left="2mm" padding-right="2mm"/> ...  <fo:page-number-citation keep-with-previous="always" ref-id="d4e12205"/></fo:basic-link></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block>
         <fo:block space-after="6pt">Unsortierte Notizen, die für jeden XSLT-Programmierer interessant sein könnten.</fo:block>
      
         <fo:block space-after="6pt">
            
         </fo:block>
      <fo:block id="d4e12160" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="14pt" provisional-distance-between-starts="10mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
               GIT Einmaleins 
            </fo:block>
            <fo:block space-after="6pt">Im Fachbereich Technische Dokumentation wird neue Technologie ein bisschen langsamer adaptiert, als in anderen Disziplinen der IT - schliesslich muss ja erst alles dokumentiert werden ...</fo:block>
         
            <fo:block space-after="6pt">Bei Versionsverwaltungssystemen ist das nicht anders. Doch inzwischen hat auch GIT<fo:inline id="d4e12178" color="white" font-size="0pt" visibility="hidden">.</fo:inline> in manchen Entwicklerbüros Einzug gehalten und verdrängt Subversion.</fo:block>
         
            <fo:block space-after="6pt">Ein Grund an dieser Stelle einmal zumindest die wichtigsten Befehle aufzulisten - Note to self:</fo:block>
         
            <fo:block font-family="Courier New, monospace" wrap-option="no-wrap" font-size="9pt" line-height="110%" linefeed-treatment="preserve" white-space="pre" white-space-collapse="false" margin-top="10pt" margin-bottom="10pt" border="#e3e3e3 2pt solid" padding="10pt" padding-bottom="5pt">GIT COMMANDS

CLONE
=====
git clone https://github.com/libgit2/libgit2
SIMPLE
======
git init
git add *
git commit -m "Form validation added”
[changes]
git add [changed files] or git commit -a
git diff —cached
git branch experimental
git checkout experimental
git commit -a -m "only<fo:inline color="#7F3300">in </fo:inline>the experimental branch”
git checkout master
git merge experimental
git branch -d experimental

COLLABORATION
=============
push new branch git push -u origin newLocalBranch
bob$ git clone /home/alice/project myrepo
(edit files)
bob$ git commit -a
alice$ cd /home/alice/project
alice$ git pull /home/bob/myrepo master  (fetch &amp; merge)
(fetch and not merge)
alice$ git fetch /home/bob/myrepo master
alice$ git log -p HEAD..FETCH_HEAD
(visualization only)
gitk HEAD..FETCH_HEAD
gitk HEAD…FETCH_HEAD
—
git log
git show ea14 (firs chars is enough)
git grep "headline_font_size” v2.5

PULL REQUESTS
=============
(checkout branch)
git pull origin simple-examples
(changes)
git push origin simple-examples
Create a pull request using the form on the Github page and assign it to a Reviewer

MERGE CONFLICTS
===============
git pull origin master
=&gt; merga conflicts

TROUBLE SHOOTING
=================
git reset --hard origin/master
git tree
git status
git checkout 118886ee3f06738b53f089433078d35f4d70a8f9 vendor/error-report.xsl
git log --diff-filter=D --summary</fo:block>
         </fo:block><fo:block id="d4e12205" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="14pt" provisional-distance-between-starts="10mm" space-after="18pt" font-weight="bold" hyphenate="false" line-height="140%">
               XML Editoren 
            </fo:block>
            <fo:block space-after="6pt">Der XSLT Styesheet-Entwickler wird sich  gewöhnlich mit Eingabedaten beschäftigen, die entweder automatisch mittels irgendeines Prozesses erzeugt wurden, oder die durch einen menschlichen Autor mit einem XML Editor<fo:inline id="d4e12217" color="white" font-size="0pt" visibility="hidden">.</fo:inline> eingegeben wurden.</fo:block>
         
            <fo:block space-after="6pt">Aus diesem Grund ist es ganz nützlich, die wichtigsten Editoren zu kennen. Wir unterscheiden zwischen Desktopapplikationen und Webanwendungen. Ausserdem unterscheiden wir noch ob der Editor WYSIWIG (<fo:inline font-weight="bold">W</fo:inline>hat <fo:inline font-weight="bold">Y</fo:inline>ou <fo:inline font-weight="bold">S</fo:inline>ee <fo:inline font-weight="bold">I</fo:inline>s <fo:inline font-weight="bold">W</fo:inline>hat <fo:inline font-weight="bold">Y</fo:inline>ou <fo:inline font-weight="bold">G</fo:inline>et) oder WYSIWYM (<fo:inline font-weight="bold">W</fo:inline>hat <fo:inline font-weight="bold">Y</fo:inline>ou <fo:inline font-weight="bold">S</fo:inline>ee <fo:inline font-weight="bold">I</fo:inline>s <fo:inline font-weight="bold">W</fo:inline>hat <fo:inline font-weight="bold">Y</fo:inline>ou <fo:inline font-weight="bold">M</fo:inline>ean) <fo:inline id="d4e12276" color="white" font-size="0pt" visibility="hidden">.</fo:inline> unterstützt oder eine Mischung aus beidem darstellt.</fo:block>
         
            <fo:block><fo:block id="d330e2" space-after="12pt" space-before="12pt"><fo:table font-weight="normal" width="100%" table-layout="fixed"><fo:table-column column-number="" column-width="proportional-column-width(0.25)"/><fo:table-column column-number="" column-width="proportional-column-width(0.75)"/><fo:table-header height="4px" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain"><fo:table-row><fo:table-cell><fo:block/></fo:table-cell></fo:table-row></fo:table-header><fo:table-body><fo:table-row keep-together.within-page="200" keep-with-next.within-page="50">
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:inline font-weight="bold">Editor</fo:inline>
                           </fo:block></fo:block-container></fo:table-cell>
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:inline font-weight="bold">Beschreibung</fo:inline>
                           </fo:block></fo:block-container></fo:table-cell>
                        </fo:table-row><fo:table-row keep-together.within-page="200">
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">XMetal<fo:footnote><fo:inline id="fnsource-d330e30" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d330e30">
                                    [XM]
                                </fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d330e30" provisional-distance-between-starts="20mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d330e30">
                                                    [XM]
                                                </fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://xmetal.com/</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                        </fo:block></fo:block-container></fo:table-cell>
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:block space-after="6pt">XMetal ist wahrscheinlich der am weitesten verbreitete reine WYSIWYM Editor. Er hat Schnittstellen zu COM und Java und kann daher in eigene CMS integriert werden.</fo:block>
                           </fo:block></fo:block-container></fo:table-cell>
                        </fo:table-row><fo:table-row keep-together.within-page="200" keep-with-previous.within-page="40">
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">Arbortext XML Editor<fo:footnote><fo:inline id="fnsource-d330e54" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d330e54">
                                    [EP]
                                </fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d330e54" provisional-distance-between-starts="20mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d330e54">
                                                    [EP]
                                                </fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.ptc.com/en/products/service-lifecycle-management/arbortext/editor</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                        </fo:block></fo:block-container></fo:table-cell>
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:block space-after="6pt">Arbortext XML Editor, früher bekannt als EPIC ist sehr betagt. Ich hatte damit im Bereich Luftfahrt/Verteidigung zu tun. Bekanntermassen ist sein Tabelleneditor etwas buggy.</fo:block>
                           </fo:block></fo:block-container></fo:table-cell>
                        </fo:table-row></fo:table-body></fo:table></fo:block></fo:block>
         
            <fo:block space-after="6pt">XMetal kann so konfiguriert werden, dass bei einer einfachen DTD der Content Bereich wie Word aussieht. Auch Code Editoren, wie OxygenXML<fo:inline id="d4e12380" color="white" font-size="0pt" visibility="hidden">.</fo:inline> bieten diese Möglichkeit. Das Key-Handling bei dieser Variante zeigt aber schnell, dass die UX noch weit von herkömmlichen Textverarbeitungssystem, wie Word oder OpenOffice entfernt ist.  </fo:block>
         
            <fo:block><fo:block id="d339e2" space-after="12pt" space-before="12pt"><fo:table font-weight="normal" width="100%" table-layout="fixed"><fo:table-column column-number="" column-width="proportional-column-width(0.25)"/><fo:table-column column-number="" column-width="proportional-column-width(0.75)"/><fo:table-header height="4px" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain"><fo:table-row><fo:table-cell><fo:block/></fo:table-cell></fo:table-row></fo:table-header><fo:table-body><fo:table-row keep-together.within-page="200" keep-with-next.within-page="50">
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:inline font-weight="bold">Editor</fo:inline>
                           </fo:block></fo:block-container></fo:table-cell>
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:inline font-weight="bold">Beschreibung</fo:inline>
                           </fo:block></fo:block-container></fo:table-cell>
                        </fo:table-row><fo:table-row keep-together.within-page="200">
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">Oxygen XML WebAuthor<fo:footnote><fo:inline id="fnsource-d339e30" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d339e30">
                                    [OX]
                                </fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d339e30" provisional-distance-between-starts="20mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d339e30">
                                                    [OX]
                                                </fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.oxygenxml.com/oxygen-xml-web-author/app/oxygen.html</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                        </fo:block></fo:block-container></fo:table-cell>
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:block space-after="6pt">Dieser Online-Editor verwendet auf der Serverseite dieselbe Logik, wie das Desktop Programm des Herstellers. Das führt dazu, dass bei jedem Tastendruck eine Verbindung zum Server aufgebaut wird, und die Verarbeitung langsam werden kann. Zum Betrieb und bzgl. Customizing ist einschlägiges Java-Know-How erforderlich.</fo:block>
                           </fo:block></fo:block-container></fo:table-cell>
                        </fo:table-row><fo:table-row keep-together.within-page="200">
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">FontoXML<fo:footnote><fo:inline id="fnsource-d339e54" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d339e54">
                                    [FX]
                                </fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d339e54" provisional-distance-between-starts="20mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d339e54">
                                                    [FX]
                                                </fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>https://www.fontoxml.com/</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                        </fo:block></fo:block-container></fo:table-cell>
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:block space-after="6pt">FontoXML sieht schon fast aus wie Word. Neben der WYSWYG/M Darstellung, kann auch die XML Struktur in einem Seitenpanel angezeigt werden.</fo:block>
                           </fo:block></fo:block-container></fo:table-cell>
                        </fo:table-row><fo:table-row keep-together.within-page="200">
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">XEditor<fo:footnote><fo:inline id="fnsource-d339e78" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d339e78">
                                    [XE]
                                </fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d339e78" provisional-distance-between-starts="20mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d339e78">
                                                    [XE]
                                                </fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://www.xeditor.com/portal</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                        </fo:block></fo:block-container></fo:table-cell>
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:block space-after="6pt">Xeditor benutzt XSLT Transformationen, um aus der Eingabe die Editoransicht zu generieren. Beim Abspeichern wird der umgekehrte Weg bestritten. Das mag zwar auf den ersten Blick etwas holprig erscheinen, wie aber auch Tektur beweist, funktioniert das ganze recht gut und schnell.</fo:block>
                           </fo:block></fo:block-container></fo:table-cell>
                        </fo:table-row><fo:table-row keep-together.within-page="200" keep-with-previous.within-page="40">
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">Xopus<fo:footnote><fo:inline id="fnsource-d339e102" font-size="67%" baseline-shift="super"><fo:basic-link internal-destination="fntarget-d339e102">
                                    [XO]
                                </fo:basic-link></fo:inline><fo:footnote-body><fo:list-block id="fntarget-d339e102" provisional-distance-between-starts="20mm" color="#999"><fo:list-item><fo:list-item-label end-indent="label-end()" start-indent="0"><fo:block><fo:basic-link internal-destination="fnsource-d339e102">
                                                    [XO]
                                                </fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="10mm"><fo:block>http://xopusfiddle.net/VT7T/3/</fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:footnote-body></fo:footnote>
                        </fo:block></fo:block-container></fo:table-cell>
                           <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                              <fo:block space-after="6pt">Xopus ist wohl der älteste web-basierte XML Editor. Ich hatte damit schon 2008 zu tun, als er für ein Redaktionssystem evaluiert wurde. Wir haben uns dann für eine eigene nicht-generische Lösung basierend auf dem Webeditor CKEditor entschieden.</fo:block>
                           </fo:block></fo:block-container></fo:table-cell>
                        </fo:table-row></fo:table-body></fo:table></fo:block></fo:block>
         
            <fo:block space-after="6pt">Das Customizing dieser Editoren erfordert einen sehr hohen Aufwand. Es müssen diverse Ressourcen angepasst werden, wie XSLT Skripte, XSD Schemas, CSS und Javascript. Das Schema wird meist über Kommandozeilentools in eine JS Repräsentation überführt. </fo:block>
         
            <fo:block space-after="6pt">Aus diesem Grund bieten einige Hersteller spezielle Schulungen an, wo man die Bedienung erlernen kann. Aus meiner Sicht ist das Problem "Webbasierter XML Editor" weltweit noch nicht ausreichend gelöst.</fo:block>
         
            <fo:block space-after="6pt">Die Kosten für den Betrieb rangieren um die 1000 EUR monatl. für ein 20 Benutzer-Setup.</fo:block>
         </fo:block></fo:block><fo:block id="d4e12545" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="16pt" provisional-distance-between-starts="12mm" space-after="8pt" font-weight="bold" hyphenate="false" line-height="140%">Glossar</fo:block>
         <fo:block id="glossary"><fo:block id="d353e2" space-after="12pt" space-before="12pt"><fo:table font-weight="normal" width="100%" table-layout="fixed"><fo:table-column column-number="" column-width="proportional-column-width(2)"/><fo:table-column column-number="" column-width="proportional-column-width(4)"/><fo:table-header height="4px" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain"><fo:table-row><fo:table-cell><fo:block/></fo:table-cell></fo:table-row></fo:table-header><fo:table-body><fo:table-row keep-together.within-page="200" keep-with-next.within-page="50" keep-with-previous.within-page="40">
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                        <fo:inline font-weight="bold">Core-Stylesheet</fo:inline>
                     </fo:block></fo:block-container></fo:table-cell>
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                           In einem Stylesheet-Projekt bezeichnet das Core-Stylesheet eine bereits ausgiebig getestete Variante, die mittels Sub-Stylesheet unter Ausnutzung der XSLT Import Präzedenz überschrieben wird.
                        </fo:block></fo:block-container></fo:table-cell>
                  </fo:table-row></fo:table-body></fo:table></fo:block></fo:block>
      
         <fo:block><fo:block id="d358e2" space-after="12pt" space-before="12pt"><fo:table font-weight="normal" width="100%" table-layout="fixed"><fo:table-column column-number="" column-width="proportional-column-width(2)"/><fo:table-column column-number="" column-width="proportional-column-width(4)"/><fo:table-header height="4px" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain"><fo:table-row><fo:table-cell><fo:block/></fo:table-cell></fo:table-row></fo:table-header><fo:table-body><fo:table-row keep-together.within-page="200" keep-with-next.within-page="50" keep-with-previous.within-page="40">
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                        <fo:inline font-weight="bold">DITA</fo:inline>
                     </fo:block></fo:block-container></fo:table-cell>
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                           DITA ist ein Informationsmodell für die Technische Dokumentation.
                        </fo:block></fo:block-container></fo:table-cell>
                  </fo:table-row></fo:table-body></fo:table></fo:block></fo:block>
      
         <fo:block><fo:block id="d363e2" space-after="12pt" space-before="12pt"><fo:table font-weight="normal" width="100%" table-layout="fixed"><fo:table-column column-number="" column-width="proportional-column-width(2)"/><fo:table-column column-number="" column-width="proportional-column-width(4)"/><fo:table-header height="4px" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain"><fo:table-row><fo:table-cell><fo:block/></fo:table-cell></fo:table-row></fo:table-header><fo:table-body><fo:table-row keep-together.within-page="200" keep-with-next.within-page="50" keep-with-previous.within-page="40">
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                        <fo:inline font-weight="bold">Parameterisierung</fo:inline>
                     </fo:block></fo:block-container></fo:table-cell>
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                           Bei der Parameterisierung wird ein bestehendes Stylesheet mit Parametern versehen, um für möglichst viele Produktvarianten und Ausgabeformate die gleiche Codebasis wiederverwenden zu können. Dadurch soll Redundanz eingespart werden und der Aufruf vereinfacht werden.
                        </fo:block></fo:block-container></fo:table-cell>
                  </fo:table-row></fo:table-body></fo:table></fo:block></fo:block>
      
         <fo:block><fo:block id="d368e2" space-after="12pt" space-before="12pt"><fo:table font-weight="normal" width="100%" table-layout="fixed"><fo:table-column column-number="" column-width="proportional-column-width(2)"/><fo:table-column column-number="" column-width="proportional-column-width(4)"/><fo:table-header height="4px" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain"><fo:table-row><fo:table-cell><fo:block/></fo:table-cell></fo:table-row></fo:table-header><fo:table-body><fo:table-row keep-together.within-page="200" keep-with-next.within-page="50">
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                        <fo:inline font-weight="bold">Sub-Stylesheet</fo:inline>
                     </fo:block></fo:block-container></fo:table-cell>
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                           Ein Sub-Stylesheet spezialisiert das Core-Stylesheet, damit Redundanz vermieden wird und somit die Wartbarkeit gewährleistet werden kann.
                        </fo:block></fo:block-container></fo:table-cell>
                  </fo:table-row><fo:table-row keep-together.within-page="200">
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                        <fo:inline font-weight="bold">SGML</fo:inline>
                     </fo:block></fo:block-container></fo:table-cell>
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                           SGML ist der Vorläufer von XML.
                        </fo:block></fo:block-container></fo:table-cell>
                  </fo:table-row><fo:table-row keep-together.within-page="200">
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                        <fo:inline font-weight="bold">Single Source Publishing</fo:inline>
                     </fo:block></fo:block-container></fo:table-cell>
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                           Beim Single Source Publishing wird aus einer XML Quelle eine Vielzahl von Ausgabeformaten erzeugt
                        </fo:block></fo:block-container></fo:table-cell>
                  </fo:table-row><fo:table-row keep-together.within-page="200" keep-with-previous.within-page="40">
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                        <fo:inline font-weight="bold">Structured Content Authoring</fo:inline>
                     </fo:block></fo:block-container></fo:table-cell>
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                           Der Content wird hierbei semantisch mittels XML Tags ausgezeichnet. Bei einem WYSIWYG Ansatz sind die meisten Tags nur optional sichtbar.
                        </fo:block></fo:block-container></fo:table-cell>
                  </fo:table-row></fo:table-body></fo:table></fo:block></fo:block>
      
         <fo:block><fo:block id="d379e2" space-after="12pt" space-before="12pt"><fo:table font-weight="normal" width="100%" table-layout="fixed"><fo:table-column column-number="" column-width="proportional-column-width(2)"/><fo:table-column column-number="" column-width="proportional-column-width(4)"/><fo:table-header height="4px" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain"><fo:table-row><fo:table-cell><fo:block/></fo:table-cell></fo:table-row></fo:table-header><fo:table-body><fo:table-row keep-together.within-page="200" keep-with-next.within-page="50">
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                        <fo:inline font-weight="bold">Topic Based Authoring</fo:inline>
                     </fo:block></fo:block-container></fo:table-cell>
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                           Beim Topic Based Authoring steht nicht das gesamte Buch im Vordergrund, sondern der Inhalt wird in wiederverwendbare Topics aufgeteilt, die dann in verschiedenen Publikationen wiederverwendet werden können. 
                        </fo:block></fo:block-container></fo:table-cell>
                  </fo:table-row><fo:table-row keep-together.within-page="200" keep-with-previous.within-page="40">
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                        <fo:inline font-weight="bold">TIOBE Index</fo:inline>
                     </fo:block></fo:block-container></fo:table-cell>
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                           Im TIOBE Index wird jährlich die Beliebtheit von Programmiersprachen erfasst.
                        </fo:block></fo:block-container></fo:table-cell>
                  </fo:table-row></fo:table-body></fo:table></fo:block></fo:block>
      
         <fo:block><fo:block id="d386e2" space-after="12pt" space-before="12pt"><fo:table font-weight="normal" width="100%" table-layout="fixed"><fo:table-column column-number="" column-width="proportional-column-width(2)"/><fo:table-column column-number="" column-width="proportional-column-width(4)"/><fo:table-header height="4px" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain"><fo:table-row><fo:table-cell><fo:block/></fo:table-cell></fo:table-row></fo:table-header><fo:table-body><fo:table-row keep-together.within-page="200" keep-with-next.within-page="50" keep-with-previous.within-page="40">
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                        <fo:inline font-weight="bold">XML Datenbanken</fo:inline>
                     </fo:block></fo:block-container></fo:table-cell>
                     <fo:table-cell background-color="#F6F6F6" text-align="inherit" border-bottom-style="solid" border-bottom-width="1pt" border-bottom-color="#fff" border-after-width.conditionality="retain" padding-top="2mm" padding-bottom="2mm" padding-left="2mm" padding-right="2mm"><fo:block-container start-indent="0mm"><fo:block keep-together.within-page="15">
                           XML Datenbanken sind NoSQL Datenbanken, d.h. "Not only SQL" oder auch tatsächlich "No SQL" wird unterstützt. Die Spezialisierung erfolgt auf XML Daten. Wie sich aber zeigt, ist eine relationale Sicht auf die Daten meistens auch notwendig, so dass DB wie Marklogic diese Funktionalität mittels Erweiterungen unterstützt. 
                        </fo:block></fo:block-container></fo:table-cell>
                  </fo:table-row></fo:table-body></fo:table></fo:block></fo:block>
      </fo:block><fo:block id="d4e12828" hyphenate="true" space-before="8pt"><fo:block keep-with-next="always" font-size="16pt" provisional-distance-between-starts="12mm" space-after="8pt" font-weight="bold" hyphenate="false" line-height="140%">
            Tektur CCMS
         </fo:block>
         <fo:block space-after="6pt">Tekur CCMS<fo:inline id="d4e12840" color="white" font-size="0pt" visibility="hidden">.</fo:inline> ist ein web-basiertes Component Content Management System und befindet sich noch in der Entwicklung.</fo:block>
      
         <fo:block space-after="6pt">Hier sind einige Random Features:</fo:block>
      
         <fo:list-block space-after="6pt"><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">Die Inhalte werden nach dem DITA Content Model eingegeben. Die Ausgabe erfolgt über ein automatisches Satzsystem.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">Grafiken können für die PDF-Ausgabe seitenbreit, spaltenbreit und in der Marginalie gesetzt werden.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">Die Breite der Marginalie ist stufenlos einstellbar; die PDF-Ausgabe ist bzgl. der Formatierung weitestgehend konfigurierbar.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">Layoutoptionen bzgl. Papierformat, Bemassung und Schriftgrößen können über einen einfachen Dialog eingestellt werden.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">TOC und mehrstufige Register werden automatisch in der PDF-Ausgabe erzeugt.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">Die Zellenbreite von CALS Tabellen kann mit der Maus eingestellt werden; Funktionen auf Zellen sind weitestgehend implementiert.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">Copy 'n Paste funktioniert Element-weise und topic-übergreifend.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">Paras, Listitems und Sections können mit den Pfeilbuttons in der Toolbar nach oben und unten verschoben werden.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">Verlinkung auf andere Topics funktioniert über Referenzen und ein Linktext wird automatisch aktualisiert, wenn sich der Topic-Titel ändert.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">Die DITA-Map kann u.a. mittels Drag 'n Drop editiert werden; Im Topic Editor gibt es an jeder Stelle ein dynamisches Kontextmenü für weitere Optionen.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">Valide DITA Strukturen können exportiert und importiert werden.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item><fo:list-item space-after="4pt" start-indent="0mm"><fo:list-item-label><fo:block color="#808080"> </fo:block></fo:list-item-label><fo:list-item-body start-indent="6mm"><fo:block>
                  <fo:block space-after="6pt">Topics, Tasks und Maps können vom Autor an Reviewer und Approver für einen Kommentar- und Freigabeprozess überwiesen werden.</fo:block>
               </fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block keep-with-previous.within-page="always" margin-bottom="6pt"/><fo:block color="white">.</fo:block>
      </fo:block><fo:block space-before="8pt"><fo:block space-after="3pt" font-weight="bold">(c) Alex Düsel 2019</fo:block><fo:block space-after="1pt">Creative Commons Namensnennung-Keine Bearbeitungen 4.0 International Public License</fo:block><fo:block space-after="1pt">www.github.com/alexdd/Buch</fo:block><fo:block space-after="1pt">www.tekturcms.de</fo:block></fo:block></fo:flow></fo:page-sequence>
   
   
   
   
   
   
<fo:page-sequence master-reference="page-sequence" force-page-count="auto"><fo:flow flow-name="xsl-region-body"><fo:block space-after="24pt"><fo:external-graphic src="././client/data/6478ddd6-a447-4a5d-a467-1d3820bf7049/logo.png"/></fo:block><fo:block space-after="3pt" font-weight="bold">(c) Alex Düsel 2019</fo:block><fo:block space-after="1pt">Creative Commons Namensnennung-Keine Bearbeitungen 4.0 International Public License</fo:block><fo:block space-after="1pt">www.github.com/alexdd/Buch</fo:block><fo:block space-after="1pt">www.tekturcms.de</fo:block></fo:flow></fo:page-sequence></fo:root>