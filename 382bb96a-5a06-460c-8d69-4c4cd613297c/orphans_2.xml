<?xml version="1.0" encoding="UTF-8"?><elements><element id="93c23a40-291b-4a08-86fb-6d5df5342233d7e12">&lt;k:kunde&gt; &lt;k:id&gt;1&lt;\/k:id&gt; &lt;k:name&gt;Alex&lt;\/k:name&gt; &lt;k:eMail&gt;tekturcms@gmail.com&lt;\/k:eMail&gt; &lt;\/k:kunde&gt; &lt;k:kunde&gt; &lt;k:id&gt;2&lt;\/k:id&gt; &lt;k:name&gt;Horst&lt;\/k:name&gt; &lt;k:eMail&gt;horst@horst.de&lt;\/k:eMail&gt; &lt;\/k:kunde&gt; &lt;k:kunde&gt; &lt;k:id&gt;3&lt;\/k:id&gt; &lt;k:name&gt;Gundula&lt;\/k:name&gt; &lt;k:eMail&gt;gundl@gundula.de&lt;\/k:eMail&gt; &lt;\/k:kunde&gt; &lt;b:bestellung&gt; &lt;b:id&gt;1&lt;\/b:id&gt; &lt;b:datum&gt;02.01.2019&lt;\/b:datum&gt; &lt;b:preis&gt;99.90&lt;\/b:preis&gt; &lt;kunde-id&gt;2&lt;\/kunde-id&gt; &lt;\/b:bestellung&gt; &lt;b:bestellung&gt; &lt;b:id&gt;2&lt;\/b:id&gt; &lt;b:datum&gt;03.01.2019&lt;\/b:datum&gt; &lt;b:preis&gt;68.90&lt;\/b:preis&gt; &lt;b:kunde-id&gt;1&lt;\/b:kunde-id&gt; &lt;\/b:bestellung&gt;</element><element id="23cc225b-6851-4d15-a3c4-eecc21587d97d7e16">SELECT name, datum, preis FROM kunden k INNER JOIN bestellungen b ON k.id = b.kunde_id</element><element id="883432be-459a-4cd9-a025-119ed7d6aba1d7e20">name, datum, preis Alex, 03.01.2019, 68.90 Horst, 02.01.2019, 99.90</element><element id="6410cd95-7051-46fd-b135-1c5d028d2113d7e27">xquery version\"1.0-ml\"; import module namespace tde =\"http:\/\/marklogic.com\/xdmp\/tde\"at\"\/MarkLogic\/tde.xqy\"; let $sql-view-name := 'kunden-view.xml' let $sql-view := &lt;template xmlns=\"http:\/\/marklogic.com\/xdmp\/tde\"&gt; &lt;path-namespaces&gt; &lt;path-namespace&gt; &lt;prefix&gt;k&lt;\/prefix&gt; &lt;namespace-uri&gt;https:\/\/tekturcms.de\/schema\/kunde\/1.0&lt;\/namespace-uri&gt; &lt;\/path-namespace&gt; &lt;\/path-namespaces&gt; &lt;context&gt;\/k:kunde&lt;\/context&gt; &lt;collections&gt; &lt;collections-and&gt; &lt;collection&gt;\/kunden&lt;\/collection&gt; &lt;\/collections-and&gt; &lt;\/collections&gt; &lt;rows&gt; &lt;row&gt; &lt;schema-name&gt;kunden_schema&lt;\/schema-name&gt; &lt;view-name&gt;kunden_view&lt;\/view-name&gt; &lt;columns&gt; &lt;column&gt; &lt;name&gt;id&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;k:id&lt;\/val&gt; &lt;nullable&gt;true&lt;\/nullable&gt; &lt;\/column&gt; &lt;column&gt; &lt;name&gt;datum&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;k:datum&lt;\/val&gt; &lt;nullable&gt;true&lt;\/nullable&gt; &lt;\/column&gt; &lt;column&gt; &lt;name&gt;eMail&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;k:eMail&lt;\/val&gt; &lt;nullable&gt;true&lt;\/nullable&gt; &lt;\/column&gt; &lt;\/columns&gt; &lt;\/row&gt; &lt;\/rows&gt; &lt;\/template&gt; return( tde:template-insert(concat('\/templates\/', $sql-view-name), $sql-view, xdmp:default-permissions()) )</element><element id="5823c740-2c53-44eb-aa52-3a43ede11b37d7e31">[...] &lt;rows&gt; &lt;row&gt; &lt;schema-name&gt;bestellungen_schema&lt;\/schema-name&gt; &lt;view-name&gt;bestellungen_view&lt;\/view-name&gt; &lt;columns&gt; &lt;column&gt; &lt;name&gt;id&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;b:id&lt;\/val&gt; &lt;\/column&gt; &lt;column&gt; &lt;name&gt;datum&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;b:datum&lt;\/val&gt; &lt;\/column&gt; &lt;column&gt; &lt;name&gt;preis&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;b:preis&lt;\/val&gt; &lt;\/column&gt; &lt;column&gt; &lt;name&gt;kunde_id&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;b:kunde-id&lt;\/val&gt; &lt;\/column&gt; &lt;\/columns&gt; &lt;\/row&gt; [...]</element><element id="60220337-3ad8-4b67-a30f-b35fece3c2b9d7e35">xdmp:sql(\"SELECT name, datum, preis FROM kunden_view k INNER JOIN bestellungen_view b ON k.id = b.kunde_id\")</element><element id="3fffbea5-1754-4e59-94da-4966d29b7f34d7e39">xquery version\"1.0-ml\"; declare namespace k = 'http:\/\/www.tekturcms.de\/kunden'; declare namespace b = 'http:\/\/www.tekturcms.de\/bestellungen'; import module namespace tde =\"http:\/\/marklogic.com\/xdmp\/tde\"at\"\/MarkLogic\/tde.xqy\"; declare function local:loadKunde($id, $name, $eMail) { let $root := &lt;k:kunde&gt; &lt;k:id&gt;{ $id }&lt;\/k:id&gt; &lt;k:name&gt;{ $name }&lt;\/k:name&gt; &lt;k:eMail&gt;{ $eMail }&lt;\/k:eMail&gt; &lt;\/k:kunde&gt;, $options := &lt;options xmlns=\"xdmp:document-insert\"&gt; &lt;permissions&gt;{ xdmp:default-permissions() }&lt;\/permissions&gt; &lt;collections&gt; &lt;collection&gt;\/kunden&lt;\/collection&gt; &lt;\/collections&gt; &lt;\/options&gt;, $fname := concat('\/kunden\/',$id,\".xml\") return xdmp:document-insert($fname,$root,$options) }; declare function local:loadBestellung($id, $datum, $preis, $kunde-id) { let $root := &lt;b:bestellung&gt; &lt;b:id&gt;{ $id }&lt;\/b:id&gt; &lt;b:datum&gt;{ $datum }&lt;\/b:datum&gt; &lt;b:preis&gt;{ $preis }&lt;\/b:preis&gt; &lt;b:kunde-id&gt;{ $kunde-id }&lt;\/b:kunde-id&gt; &lt;\/b:bestellung&gt;, $options := &lt;options xmlns=\"xdmp:document-insert\"&gt; &lt;permissions&gt;{ xdmp:default-permissions() }&lt;\/permissions&gt; &lt;collections&gt; &lt;collection&gt;\/bestellungen&lt;\/collection&gt; &lt;\/collections&gt; &lt;\/options&gt;, $fname := concat('\/bestellungen\/',$id,\".xml\") return xdmp:document-insert($fname,$root,$options) }; declare function local:insertKundenSchema() { let $sql-view-name := 'kunden-view.xml', $sql-view := &lt;template xmlns=\"http:\/\/marklogic.com\/xdmp\/tde\"&gt; &lt;path-namespaces&gt; &lt;path-namespace&gt; &lt;prefix&gt;k&lt;\/prefix&gt; &lt;namespace-uri&gt;http:\/\/www.tekturcms.de\/kunden&lt;\/namespace-uri&gt; &lt;\/path-namespace&gt; &lt;\/path-namespaces&gt; &lt;context&gt;\/k:kunde&lt;\/context&gt; &lt;collections&gt; &lt;collections-and&gt; &lt;collection&gt;\/kunden&lt;\/collection&gt; &lt;\/collections-and&gt; &lt;\/collections&gt; &lt;rows&gt; &lt;row&gt; &lt;schema-name&gt;kunden_schema&lt;\/schema-name&gt; &lt;view-name&gt;kunden_view&lt;\/view-name&gt; &lt;columns&gt; &lt;column&gt; &lt;name&gt;id&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;k:id&lt;\/val&gt; &lt;\/column&gt; &lt;column&gt; &lt;name&gt;name&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;k:name&lt;\/val&gt; &lt;\/column&gt; &lt;column&gt; &lt;name&gt;eMail&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;k:eMail&lt;\/val&gt; &lt;\/column&gt; &lt;\/columns&gt; &lt;\/row&gt; &lt;\/rows&gt; &lt;\/template&gt; return tde:template-insert(concat('\/templates\/', $sql-view-name), $sql-view, xdmp:default-permissions()) }; declare function local:insertBestellungenSchema() { let $sql-view-name := 'bestellungen-view.xml', $sql-view := &lt;template xmlns=\"http:\/\/marklogic.com\/xdmp\/tde\"&gt; &lt;path-namespaces&gt; &lt;path-namespace&gt; &lt;prefix&gt;b&lt;\/prefix&gt; &lt;namespace-uri&gt;http:\/\/www.tekturcms.de\/bestellungen&lt;\/namespace-uri&gt; &lt;\/path-namespace&gt; &lt;\/path-namespaces&gt; &lt;context&gt;\/b:bestellung&lt;\/context&gt; &lt;collections&gt; &lt;collections-and&gt; &lt;collection&gt;\/bestellungen&lt;\/collection&gt; &lt;\/collections-and&gt; &lt;\/collections&gt; &lt;rows&gt; &lt;row&gt; &lt;schema-name&gt;bestellungen_schema&lt;\/schema-name&gt; &lt;view-name&gt;bestellungen_view&lt;\/view-name&gt; &lt;columns&gt; &lt;column&gt; &lt;name&gt;id&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;b:id&lt;\/val&gt; &lt;\/column&gt; &lt;column&gt; &lt;name&gt;datum&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;b:datum&lt;\/val&gt; &lt;\/column&gt; &lt;column&gt; &lt;name&gt;preis&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;b:preis&lt;\/val&gt; &lt;\/column&gt; &lt;column&gt; &lt;name&gt;kunde_id&lt;\/name&gt; &lt;scalar-type&gt;string&lt;\/scalar-type&gt; &lt;val&gt;b:kunde-id&lt;\/val&gt; &lt;\/column&gt; &lt;\/columns&gt; &lt;\/row&gt; &lt;\/rows&gt; &lt;\/template&gt; return tde:template-insert(concat('\/templates\/', $sql-view-name), $sql-view, xdmp:default-permissions()) }; local:loadKunde(\"1\",\"Alex\",\"tekturcms@gmail.com\"), local:loadKunde(\"2\",\"Horst\",\"horst@horst.de\"), local:loadKunde(\"3\",\"Gundula\",\"gundl@gundula.de\"), local:loadBestellung(\"1\",\"02.01.2019\",\"99.90\",\"2\"), local:loadBestellung(\"2\",\"03.01.2019\",\"68.90\",\"1\"), local:insertKundenSchema(), local:insertBestellungenSchema(), xdmp:sql(\"SELECT name, datum, preis FROM kunden_view k INNER JOIN bestellungen_view b ON k.id = b.kunde_id\")</element><element id="f7ec99d6-e569-499a-9a59-046539f33bc8d7e43">[ [\"k.name\",\"b.datum\",\"b.preis\"], [\"Alex\",\"03.01.2019\",\"68.90\"], [\"Horst\",\"02.01.2019\",\"99.90\"] ]</element></elements>