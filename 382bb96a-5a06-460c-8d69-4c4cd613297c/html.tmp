<div data-attribute-id="4e59c114-46a9-4292-8c91-b346f9cde93f" class="topic show_menu tags" data-element="topic" data-deletable="false" data-tektur-editor-id="9261ad6f-1c6e-413d-9a49-9aecab510273"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div data-attribute-id="6dc3be8f-5b8c-407c-9853-0533fdbf8267" class="title pmarker tags" data-element="title" data-tektur-editor-id="a69953f3-6c4a-40e6-9b83-fbdb244f9f1c" contenteditable="true">SQL Views in MarkLogic</div><div class="abstract optional show_menu tags" data-element="abstract" data-excluding="shortdesc" style="display:none" data-tektur-editor-id="60ea88b4-0fff-44ff-982f-cb013cd0c491"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="d67df511-97b8-4ed2-8c41-c37e22f4fbf6" contenteditable="true"></div></div><div data-attribute-id="7f34fad8-1a7e-4e87-b393-2a47e817e2da" class="body show_menu tags" data-element="body" data-deletable="false" data-tektur-editor-id="c342a56c-275a-4ec7-94bb-d9cc7811d76b"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="section tektur-wrapper tags" data-element="section" data-tektur-editor-id="dbb9eb49-0798-42b0-b3fc-04661e9f14a7"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="51cd2348-5ac3-401f-bfec-d6669662af27" class="p pmarker tags" data-element="p" data-tektur-editor-id="efef5a92-db3c-470c-979c-31c8bcac8ff1" contenteditable="true">Es macht nicht immer Sinn über eine Baumstruktur zu suchen. Obwohl das in einer 
XML Datenbank rasend schnell geht, weil jeder Knoten des Baums initial in einen Index
aufgenommen wird. So gibt es doch Anwendungsfälle bei denen man lieber eine relationale
Sicht auf die Daten hätte.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="fa6fb1a1-78b4-4a46-9b1e-ba2328fdd2f3d6e6" class="p pmarker tags" data-element="p" data-tektur-editor-id="4711d164-f9b1-4f81-9f04-c320a1793ee9" contenteditable="true">In MarkLogic heisst die Lösung dazu SQL Views.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="8029ae2f-5b5a-4df5-97c1-aad92ac65df2d6e8" class="p pmarker tags" data-element="p" data-tektur-editor-id="059d3607-8fd5-4113-b80d-95cd2d712722" contenteditable="true">Bspw. benötigt man eine relationale Sicht auf die Daten,
wenn über verschiedene Datensätze ein Report generiert werden soll.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="93e04ead-905f-488b-a0bc-d024c912fc35d6e10" class="p pmarker tags" data-element="p" data-tektur-editor-id="6bf27e9b-aff3-4fb2-b3f8-dd0e953793ed" contenteditable="true">Nehmen wir an es gibt im Datenbestand die folgenden Dokumente:</div><div class="pre"><div data-attribute-id="db2cbd11-15f0-426c-b988-4c0c50758dc2d6e12" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="c50ba00b-96a3-4a80-b8e7-06d6acb7d672" contenteditable="true">&#x3C;k:kunde&#x3E;
  &#x3C;k:id&#x3E;1&#x3C;/k:id&#x3E;
  &#x3C;k:name&#x3E;Alex&#x3C;/k:name&#x3E;
  &#x3C;k:eMail&#x3E;tekturcms@gmail.com&#x3C;/k:eMail&#x3E;
&#x3C;/k:kunde&#x3E;

&#x3C;k:kunde&#x3E;
  &#x3C;k:id&#x3E;2&#x3C;/k:id&#x3E;
  &#x3C;k:name&#x3E;Horst&#x3C;/k:name&#x3E;
  &#x3C;k:eMail&#x3E;horst@horst.de&#x3C;/k:eMail&#x3E;
&#x3C;/k:kunde&#x3E;

&#x3C;k:kunde&#x3E;
  &#x3C;k:id&#x3E;3&#x3C;/k:id&#x3E;
  &#x3C;k:name&#x3E;Gundula&#x3C;/k:name&#x3E;
  &#x3C;k:eMail&#x3E;gundl@gundula.de&#x3C;/k:eMail&#x3E;
&#x3C;/k:kunde&#x3E;

&#x3C;b:bestellung&#x3E;
  &#x3C;b:id&#x3E;1&#x3C;/b:id&#x3E;
  &#x3C;b:datum&#x3E;02.01.2019&#x3C;/b:datum&#x3E;
  &#x3C;b:preis&#x3E;99.90&#x3C;/b:preis&#x3E;
  &#x3C;kunde-id&#x3E;2&#x3C;/kunde-id&#x3E;
&#x3C;/b:bestellung&#x3E;

&#x3C;b:bestellung&#x3E;
  &#x3C;b:id&#x3E;2&#x3C;/b:id&#x3E;
  &#x3C;b:datum&#x3E;03.01.2019&#x3C;/b:datum&#x3E;
  &#x3C;b:preis&#x3E;68.90&#x3C;/b:preis&#x3E;
  &#x3C;b:kunde-id&#x3E;1&#x3C;/b:kunde-id&#x3E;
&#x3C;/b:bestellung&#x3E;</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="2328ace1-a84c-4d9b-839c-e81962bff15ed6e14" class="p pmarker tags" data-element="p" data-tektur-editor-id="0a0da13c-886e-4659-9e6d-18ed07e888fd" contenteditable="true">Will man sich alle Kunden anzeigen lassen, die eine Bestellung 
abgegeben haben - das sind Alex und Horst - so würde man bei
einem relationalen Ansatz einen JOIN verwenden, so wie:</div><div class="pre"><div data-attribute-id="4358925a-d7c3-450d-961c-bcdf0fc83317d6e16" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="20ce57ab-ec02-4fcb-9bb8-288a7a024799" contenteditable="true">SELECT name, datum, preis
FROM kunden k
INNER JOIN bestellungen b
ON k.id = b.kunde_id</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="634aa470-0b4d-4ef9-ad31-e23e72e82857d6e18" class="p pmarker tags" data-element="p" data-tektur-editor-id="88e8fba9-ad50-44ae-b91a-dbcb4b631854" contenteditable="true">In einer relationalen Sicht würde uns das dann die folgende Tabelle liefern:</div><div class="pre"><div data-attribute-id="5864b6d5-3fa5-4698-a8b7-5d5a4613c7a2d6e20" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="77498772-5ea2-4681-b928-651d8375b6c7" contenteditable="true">name, datum, preis
Alex, 03.01.2019, 68.90
Horst, 02.01.2019, 99.90</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="32221bf5-8e13-4057-90ab-06577e278a90d6e22" class="p pmarker tags" data-element="p" data-tektur-editor-id="0abed09c-62a2-424b-880c-57c88a142ed6" contenteditable="true">Um für MarkLogic eine SQL View zu definieren verwendet man einen Mechanismus,
der da heisst: <span class="bracket-tags-marker" id="41166a76-42f5-487f-a03a-d42f7bfdb4c4">[[<span class="bracket-tags">link</span>]]</span>Template Driven Extraction<span class="bracket-tags-marker" id="2c000284-8dba-4056-928a-530929abd661">[[<span class="bracket-tags">fn:https://docs.marklogic.com/guide/app-dev/TDE*Template Driven Extraction wird verwendet um in MarkLogic eine relationale Sicht auf die baumstrukturierten Daten zu setzen</span>]]</span></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="300d1425-14e5-4fe0-b486-327254ed8cf0d6e24" class="p pmarker tags" data-element="p" data-tektur-editor-id="18e34313-80a4-4d1b-b8c1-b985690d7b4e" contenteditable="true">Dazu werden Templates in XML deklariert und in die Template Collection eingefügt. Für unser obiges Beispiel
würden wir zwei Templates brauchen, die so aussehen:</div><div class="pre"><div data-attribute-id="6dedb087-2cd7-49e7-a198-ecd283d33673d6e27" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="efb5bf17-c933-4d99-af10-b49463b7691d" contenteditable="true">xquery version "1.0-ml";

import module namespace tde = "http://marklogic.com/xdmp/tde" 
                            at "/MarkLogic/tde.xqy";

let $sql-view-name := 'kunden-view.xml'
let $sql-view := &#x3C;template xmlns="http://marklogic.com/xdmp/tde"&#x3E;
   &#x3C;path-namespaces&#x3E;
      &#x3C;path-namespace&#x3E;
         &#x3C;prefix&#x3E;k&#x3C;/prefix&#x3E;
         &#x3C;namespace-uri&#x3E;https://tekturcms.de/schema/kunde/1.0&#x3C;/namespace-uri&#x3E;
      &#x3C;/path-namespace&#x3E;
   &#x3C;/path-namespaces&#x3E;
   &#x3C;context&#x3E;/k:kunde&#x3C;/context&#x3E;
   &#x3C;collections&#x3E;
      &#x3C;collections-and&#x3E;
         &#x3C;collection&#x3E;/kunden&#x3C;/collection&#x3E;
      &#x3C;/collections-and&#x3E;
   &#x3C;/collections&#x3E;
   &#x3C;rows&#x3E;
      &#x3C;row&#x3E;
         &#x3C;schema-name&#x3E;kunden_schema&#x3C;/schema-name&#x3E;
         &#x3C;view-name&#x3E;kunden_view&#x3C;/view-name&#x3E;
         &#x3C;columns&#x3E;
            &#x3C;column&#x3E;
               &#x3C;name&#x3E;id&#x3C;/name&#x3E;
               &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
               &#x3C;val&#x3E;k:id&#x3C;/val&#x3E;
               &#x3C;nullable&#x3E;true&#x3C;/nullable&#x3E;
            &#x3C;/column&#x3E;
            &#x3C;column&#x3E;
               &#x3C;name&#x3E;datum&#x3C;/name&#x3E;
               &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
               &#x3C;val&#x3E;k:datum&#x3C;/val&#x3E;
               &#x3C;nullable&#x3E;true&#x3C;/nullable&#x3E;
            &#x3C;/column&#x3E;
            &#x3C;column&#x3E;
               &#x3C;name&#x3E;eMail&#x3C;/name&#x3E;
               &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
               &#x3C;val&#x3E;k:eMail&#x3C;/val&#x3E;
               &#x3C;nullable&#x3E;true&#x3C;/nullable&#x3E;
            &#x3C;/column&#x3E;
         &#x3C;/columns&#x3E;
      &#x3C;/row&#x3E;
   &#x3C;/rows&#x3E;
&#x3C;/template&#x3E;
return(
  tde:template-insert(concat('/templates/', $sql-view-name), 
                      $sql-view, xdmp:default-permissions())
)</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="1b5ad441-b64a-48a5-beaf-fcb03b693c17d6e29" class="p pmarker tags" data-element="p" data-tektur-editor-id="5a1a454e-c822-4085-b438-a852fd7fdd20" contenteditable="true">und analog für die Bestellungen:</div><div class="pre"><div data-attribute-id="b9a8a6a8-4448-4ee6-8237-95a74bea8ae1d6e31" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="8fddf380-d6e2-4cf4-9261-6d1ddba3ce51" contenteditable="true">[...]
   &#x3C;rows&#x3E;
      &#x3C;row&#x3E;
         &#x3C;schema-name&#x3E;bestellungen_schema&#x3C;/schema-name&#x3E;
         &#x3C;view-name&#x3E;bestellungen_view&#x3C;/view-name&#x3E;
         &#x3C;columns&#x3E;
            &#x3C;column&#x3E;
               &#x3C;name&#x3E;id&#x3C;/name&#x3E;
               &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
               &#x3C;val&#x3E;b:id&#x3C;/val&#x3E;
            &#x3C;/column&#x3E;
            &#x3C;column&#x3E;
               &#x3C;name&#x3E;datum&#x3C;/name&#x3E;
               &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
               &#x3C;val&#x3E;b:datum&#x3C;/val&#x3E;
            &#x3C;/column&#x3E;
            &#x3C;column&#x3E;
               &#x3C;name&#x3E;preis&#x3C;/name&#x3E;
               &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
               &#x3C;val&#x3E;b:preis&#x3C;/val&#x3E;
            &#x3C;/column&#x3E;
            &#x3C;column&#x3E;
               &#x3C;name&#x3E;kunde_id&#x3C;/name&#x3E;
               &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
               &#x3C;val&#x3E;b:kunde-id&#x3C;/val&#x3E;
            &#x3C;/column&#x3E;
         &#x3C;/columns&#x3E;
      &#x3C;/row&#x3E;
[...]</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="beda4ca5-f41c-4fbd-834a-6a375127725dd6e33" class="p pmarker tags" data-element="p" data-tektur-editor-id="aafb253e-967f-4f5e-9909-f53b2d9e31ad" contenteditable="true">In XQuery eingebunden könnte man dann die definierten SQL Views mit dem folgenden Befehl abfragen:</div><div class="pre"><div data-attribute-id="2485bc4a-a3af-492b-8f37-7b728803160ed6e35" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="341ce017-b77d-44d1-bfb8-6cd7bf650e68" contenteditable="true">xdmp:sql("SELECT name, datum, preis FROM kunden_view k 
          INNER JOIN bestellungen_view b ON k.id = b.kunde_id")</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="30ca1f15-55f4-4eba-9f9f-eff3c661f764d6e37" class="p pmarker tags" data-element="p" data-tektur-editor-id="c04b2040-31c2-4ee9-80de-0e637948bcb9" contenteditable="true">Folgende ist das komplette Beispiel für eine MarkLogic XQuery Konsolensitzung abgebildet ...</div><div class="pre"><div data-attribute-id="d3116afd-80a8-48f6-9034-17e42c7d9de5d6e39" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="92741b6d-b32d-4bcd-831c-e8b771a98a3d" contenteditable="true">xquery version "1.0-ml";

declare namespace k = 'http://www.tekturcms.de/kunden';
declare namespace b = 'http://www.tekturcms.de/bestellungen';

import module namespace tde = "http://marklogic.com/xdmp/tde" at "/MarkLogic/tde.xqy";

declare function local:loadKunde($id, $name, $eMail)
{
  let $root :=
  &#x3C;k:kunde&#x3E;
    &#x3C;k:id&#x3E;{ $id }&#x3C;/k:id&#x3E;
    &#x3C;k:name&#x3E;{ $name }&#x3C;/k:name&#x3E;
    &#x3C;k:eMail&#x3E;{ $eMail }&#x3C;/k:eMail&#x3E;
  &#x3C;/k:kunde&#x3E;,
  $options :=
  &#x3C;options xmlns="xdmp:document-insert"&#x3E;  
    &#x3C;permissions&#x3E;{ xdmp:default-permissions() }&#x3C;/permissions&#x3E;
    &#x3C;collections&#x3E;
      &#x3C;collection&#x3E;/kunden&#x3C;/collection&#x3E;
    &#x3C;/collections&#x3E;
  &#x3C;/options&#x3E;,
  $fname := concat('/kunden/',$id,".xml")
  return xdmp:document-insert($fname,$root,$options)
};

declare function local:loadBestellung($id, $datum, $preis, $kunde-id)
{
  let $root :=
  &#x3C;b:bestellung&#x3E;
    &#x3C;b:id&#x3E;{ $id }&#x3C;/b:id&#x3E;
    &#x3C;b:datum&#x3E;{ $datum }&#x3C;/b:datum&#x3E;
    &#x3C;b:preis&#x3E;{ $preis }&#x3C;/b:preis&#x3E;
    &#x3C;b:kunde-id&#x3E;{ $kunde-id }&#x3C;/b:kunde-id&#x3E;
  &#x3C;/b:bestellung&#x3E;,
  $options :=
  &#x3C;options xmlns="xdmp:document-insert"&#x3E;  
    &#x3C;permissions&#x3E;{ xdmp:default-permissions() }&#x3C;/permissions&#x3E;
    &#x3C;collections&#x3E;
      &#x3C;collection&#x3E;/bestellungen&#x3C;/collection&#x3E;
    &#x3C;/collections&#x3E;
  &#x3C;/options&#x3E;,
  $fname := concat('/bestellungen/',$id,".xml")
  return xdmp:document-insert($fname,$root,$options)
};

declare function local:insertKundenSchema()
{
  let $sql-view-name := 'kunden-view.xml',
      $sql-view := &#x3C;template xmlns="http://marklogic.com/xdmp/tde"&#x3E;
    &#x3C;path-namespaces&#x3E;
      &#x3C;path-namespace&#x3E;
        &#x3C;prefix&#x3E;k&#x3C;/prefix&#x3E;
        &#x3C;namespace-uri&#x3E;http://www.tekturcms.de/kunden&#x3C;/namespace-uri&#x3E;
       &#x3C;/path-namespace&#x3E;
    &#x3C;/path-namespaces&#x3E;
    &#x3C;context&#x3E;/k:kunde&#x3C;/context&#x3E;
     &#x3C;collections&#x3E;
       &#x3C;collections-and&#x3E;
         &#x3C;collection&#x3E;/kunden&#x3C;/collection&#x3E;
      &#x3C;/collections-and&#x3E;
     &#x3C;/collections&#x3E;
     &#x3C;rows&#x3E;
       &#x3C;row&#x3E;
         &#x3C;schema-name&#x3E;kunden_schema&#x3C;/schema-name&#x3E;
         &#x3C;view-name&#x3E;kunden_view&#x3C;/view-name&#x3E;
         &#x3C;columns&#x3E;
            &#x3C;column&#x3E;
               &#x3C;name&#x3E;id&#x3C;/name&#x3E;
               &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
               &#x3C;val&#x3E;k:id&#x3C;/val&#x3E;
            &#x3C;/column&#x3E;
            &#x3C;column&#x3E;
               &#x3C;name&#x3E;name&#x3C;/name&#x3E;
               &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
               &#x3C;val&#x3E;k:name&#x3C;/val&#x3E;
            &#x3C;/column&#x3E;
          &#x3C;column&#x3E;
             &#x3C;name&#x3E;eMail&#x3C;/name&#x3E;
             &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
             &#x3C;val&#x3E;k:eMail&#x3C;/val&#x3E;
          &#x3C;/column&#x3E;
        &#x3C;/columns&#x3E;
      &#x3C;/row&#x3E;
    &#x3C;/rows&#x3E;
  &#x3C;/template&#x3E;
  return
    tde:template-insert(concat('/templates/', 
                        $sql-view-name), $sql-view, xdmp:default-permissions())
};

declare function local:insertBestellungenSchema()
{
  let $sql-view-name := 'bestellungen-view.xml',
      $sql-view := &#x3C;template xmlns="http://marklogic.com/xdmp/tde"&#x3E;
    &#x3C;path-namespaces&#x3E;
      &#x3C;path-namespace&#x3E;
        &#x3C;prefix&#x3E;b&#x3C;/prefix&#x3E;
        &#x3C;namespace-uri&#x3E;http://www.tekturcms.de/bestellungen&#x3C;/namespace-uri&#x3E;
       &#x3C;/path-namespace&#x3E;
    &#x3C;/path-namespaces&#x3E;
    &#x3C;context&#x3E;/b:bestellung&#x3C;/context&#x3E;
     &#x3C;collections&#x3E;
       &#x3C;collections-and&#x3E;
         &#x3C;collection&#x3E;/bestellungen&#x3C;/collection&#x3E;
      &#x3C;/collections-and&#x3E;
     &#x3C;/collections&#x3E;
     &#x3C;rows&#x3E;
       &#x3C;row&#x3E;
         &#x3C;schema-name&#x3E;bestellungen_schema&#x3C;/schema-name&#x3E;
         &#x3C;view-name&#x3E;bestellungen_view&#x3C;/view-name&#x3E;
         &#x3C;columns&#x3E;
            &#x3C;column&#x3E;
               &#x3C;name&#x3E;id&#x3C;/name&#x3E;
               &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
               &#x3C;val&#x3E;b:id&#x3C;/val&#x3E;
            &#x3C;/column&#x3E;
            &#x3C;column&#x3E;
               &#x3C;name&#x3E;datum&#x3C;/name&#x3E;
               &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
               &#x3C;val&#x3E;b:datum&#x3C;/val&#x3E;
            &#x3C;/column&#x3E;
          &#x3C;column&#x3E;
             &#x3C;name&#x3E;preis&#x3C;/name&#x3E;
             &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
             &#x3C;val&#x3E;b:preis&#x3C;/val&#x3E;
          &#x3C;/column&#x3E;
          &#x3C;column&#x3E;
             &#x3C;name&#x3E;kunde_id&#x3C;/name&#x3E;
             &#x3C;scalar-type&#x3E;string&#x3C;/scalar-type&#x3E;
             &#x3C;val&#x3E;b:kunde-id&#x3C;/val&#x3E;
          &#x3C;/column&#x3E;
        &#x3C;/columns&#x3E;
      &#x3C;/row&#x3E;
    &#x3C;/rows&#x3E;
  &#x3C;/template&#x3E;
  return
    tde:template-insert(concat('/templates/', 
                        $sql-view-name), $sql-view, xdmp:default-permissions())
};


local:loadKunde("1","Alex","tekturcms@gmail.com"),

local:loadKunde("2","Horst","horst@horst.de"),

local:loadKunde("3","Gundula","gundl@gundula.de"),

local:loadBestellung("1","02.01.2019","99.90","2"),

local:loadBestellung("2","03.01.2019","68.90","1"),

local:insertKundenSchema(),

local:insertBestellungenSchema(),

xdmp:sql("SELECT name, datum, preis FROM kunden_view k INNER JOIN 
          bestellungen_view b ON k.id = b.kunde_id")</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="af0bb509-8735-46fb-8e48-918f1d3f8f15d6e41" class="p pmarker tags" data-element="p" data-tektur-editor-id="473e818a-353e-4a7d-b36b-ddf722977b26" contenteditable="true">... mit einer schönen tabellarischen Ausgabe im unteren Panel der Query Konsole - oder als JSON:</div><div class="pre"><div data-attribute-id="4adb998b-bb00-4916-91b3-f9e4d1c61023d6e43" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="8a4038b6-7cba-4e8a-9add-ebeed29252b2" contenteditable="true">[
  [
    "k.name", 
    "b.datum", 
    "b.preis"
  ], 
  [
    "Alex", 
    "03.01.2019", 
    "68.90"
  ], 
  [
    "Horst", 
    "02.01.2019", 
    "99.90"
  ]
]</div></div><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="9e83f428-cf34-4a75-97a1-bcfaa93664b3" contenteditable="true"></div></div></div></div>