<?xml version="1.0" encoding="UTF-8"?><elements><element id="b7fcfd8d-540e-41ff-88df-409e5d465680d7e15">declare function common:wrap-response($json) { xdmp:add-response-header(\"Pragma\",\"no-cache\"), xdmp:add-response-header(\"Cache-Control\",\"no-cache\"), xdmp:add-response-header(\"Expires\",\"0\"), xdmp:set-response-content-type('text\/json; charset=utf-8'), $json };</element><element id="461dc77f-4392-41bf-8805-cce701f39660d7e19">let $name := xdmp:get-request-field('name'), $is-afternoon := xs:time(current-dateTime()) gt xs:time('12:00:00') return if ($is-afternoon) then common:wrap-response(xdmp:unquote(concat('{\"greeting\":\"Good Afternoon! ',$name,'!\"}'))) else common:wrap-response(xdmp:unquote(concat('{\"greeting\":\"Good Morning! ',$name,'!\"}')))</element><element id="e7eecafb-f11b-4891-b8c7-e9a7c267328ad7e25">ommon:wrap-response(xdmp:unquote( let $is-afternoon := xs:time(current-dateTime()) gt xs:time('12:00:00') return if ($is-afternoon) then concat('{\"greeting\":\"Good Afternoon! ',$name,'!\"}') else concat('{\"greeting\":\"Good Morning! ',$name,'!\"}') )</element><element id="150e3b72-142f-4b2f-acf4-4c46bc843071d7e31">declare function common:render-response($json) { xdmp:add-response-header(\"Pragma\",\"no-cache\"), xdmp:add-response-header(\"Cache-Control\",\"no-cache\"), xdmp:add-response-header(\"Expires\",\"0\"), xdmp:set-response-content-type('text\/json; charset=utf-8'), xdmp:unquote($json) }; common:render-response( let $is-afternoon := xs:time(current-dateTime()) gt xs:time('12:00:00') return if ($is-afternoon) then concat('{\"greeting\":\"Good Afternoon! ',$name,'!\"}') else concat('{\"greeting\":\"Good Morning! ',$name,'!\"}') )</element></elements>