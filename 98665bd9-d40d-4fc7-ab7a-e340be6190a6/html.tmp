<div data-attribute-id="06abe1b7-21be-4794-bec6-c28732cf6cbf" class="topic show_menu tags" data-element="topic" data-deletable="false" data-tektur-editor-id="9d635213-6a2f-434f-a916-c5103c1c57c4"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div data-attribute-id="8c5a4500-d080-4910-b4cd-529caeb12ae3" class="title pmarker tags" data-element="title" data-tektur-editor-id="7fbf9426-aee3-4056-8198-b9861d20ca59" contenteditable="true">XQuery als Programmiersprache</div><div class="abstract optional show_menu tags" data-element="abstract" data-excluding="shortdesc" style="display:none" data-tektur-editor-id="c6878da0-eb84-4356-9d95-e305a38e4536"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="4c8bbc47-db95-478a-813c-7836f9e03b0b" contenteditable="true"></div></div><div data-attribute-id="ae4f3c4a-54be-4671-bba8-047bdf24b1d7" class="body show_menu tags" data-element="body" data-deletable="false" data-tektur-editor-id="0c8bd38e-b126-4415-aa1e-798815aa8c33"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="section tektur-wrapper tags" data-element="section" data-tektur-editor-id="cee2982c-6967-4a50-81e0-54cf7c61ca13"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="1e9a3c95-15bd-4eb0-89b8-59c8784a5425" class="p pmarker tags" data-element="p" data-tektur-editor-id="59d6ced1-78d8-4a6c-a7b9-64386829e8f6" contenteditable="true">Erste Schritte in XQuery gehen sehr sch√∂n  
mit der Query Konsole auf dem Marklogic Server (Port 8000).
Hat man parallel auch noch oXygen offen, kann man die Testergb</div><div class="p tags pmarker" data-element="p" contenteditable="true" data-tektur-editor-id="2a02cc51-cbec-4333-9649-8b9f49e5239d">nisse
aus der Konsole direkt in ein XQuery Server Skript packen.dwawqdqd</div><ul data-element="ul" style="" data-tektur-editor-id="01f4e8bd-56e1-4b39-b358-6380f1c35d47" class="show_menu tags"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><li class="li show_menu tags" data-element="li" data-tektur-editor-id="7ba29043-b9cc-4242-b8c3-42d9b324acac"><div class="p pmarker tags" data-element="p" contenteditable="true" data-tektur-editor-id="6c64addc-0258-47d1-a440-7c51ef56aa7e">ewwqeqe</div></li><li class="li tags" data-element="li" data-tektur-editor-id="e6eb53e5-4ce4-4d5f-8200-5f5f86fb7769"><div class="p  pmarker tags" data-element="p" contenteditable="true" data-tektur-editor-id="106abe9f-be28-4382-9125-3c0cff6ca657">qweqwe</div></li><li class="li tags" data-element="li" data-tektur-editor-id="31a4dafb-6731-4a8b-bd2b-e87a9d56686e"><div class="p  pmarker tags" data-element="p" contenteditable="true" data-tektur-editor-id="366690f1-4ebd-497c-ad1e-e162c8dd83eb">qweqeq</div></li></ul><div class="p pmarker tags" data-element="p" contenteditable="true" data-tektur-editor-id="d07fbb2d-766f-43fa-a33f-14cb0c806c19">wqdqwd</div><div data-element="hazardstatement" data-attribute-type="notice" data-ommited="messagepanel" style="" class="show_menu tags" data-tektur-editor-id="3c3b8747-86f2-4ab0-817f-0d6bd81d86c3" data-attribute-status="changed"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="container Note" data-tektur-editor-id="3fdba6f3-bcfb-4f67-b33c-05b5ce703864"><div class="signal-word" data-tektur-editor-id="7428b130-5143-4171-abd0-fb23b9d15434">NOTICE</div><div class="hcontent" data-tektur-editor-id="b4067b97-2643-42a4-830f-c81785ff0d9e"><div class="typeofhazard show_menu tags" data-element="typeofhazard" data-tektur-editor-id="38bcdfe9-2206-48b0-a0a0-cf711cdd4429"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="pmarker p tektur-wrapper text tags" data-element="p" contenteditable="true" data-tektur-editor-id="a6fe6a43-5c77-4ea6-b57e-71724207ee93">qwqw</div></div><div class="consequence multiple optional tags" data-element="consequence" style="display:none" data-tektur-editor-id="e9729134-40c4-48b2-80c1-ab1c7efd0a22"><div class="gui-multiple-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="pmarker p tektur-wrapper placeholder text tags" data-element="p" contenteditable="true" data-tektur-editor-id="818fa46d-c9f1-4055-a158-1cdf930c6b09"></div></div><div class="howtoavoid multiple tags" data-element="howtoavoid" data-tektur-editor-id="56c1fa1d-004b-4823-9f27-fdbac3e272ab"><div class="gui-multiple-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="pmarker p tektur-wrapper text tags" data-element="p" contenteditable="true" data-tektur-editor-id="273d8d50-f5f8-4807-8d4d-b99dd0d358e3">qwqw</div></div><div class="howtoavoid multiple tags" data-element="howtoavoid" data-tektur-editor-id="1a2b2204-13cb-459f-a17a-f856f5ac5914" style=""><div class="gui-multiple-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="pmarker p tektur-wrapper text tags" data-element="p" contenteditable="true" data-tektur-editor-id="3fd0fccd-1e5d-4169-9c34-6cec23ea8a1c">qwqwqw</div></div><div class="howtoavoid multiple tags" data-element="howtoavoid" data-tektur-editor-id="b4201ffc-fcf8-497c-915a-ba0a927113b9" style=""><div class="gui-multiple-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="pmarker p tektur-wrapper text tags" data-element="p" contenteditable="true" data-tektur-editor-id="9835bb36-1c87-4ee2-b8ab-88e039d36871">wq</div></div></div></div></div><div class="placeholder text pmarker tags" data-element="p" contenteditable="true" data-tektur-editor-id="e2ea2146-c738-4eef-81ad-e21a328c789c"></div></div><div data-element="section" class="section optional show_menu tags" data-tektur-editor-id="0bf7a127-7c94-494f-a94d-c46f27bde37e"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div data-attribute-id="fa1956ff-e468-4fb8-99dc-1a7a8f773707d6e7" class="title pmarker tags" data-element="title" data-tektur-editor-id="fe051c3d-0037-44ed-8ec1-0021c53f0625" contenteditable="true">Schleifen</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="5fdff6dd-6c8a-467c-880d-33c88f7de0ded6e9" class="p pmarker tags" data-element="p" data-tektur-editor-id="e392f6da-0d86-413c-8c09-01d05fe34d63" contenteditable="true">Die ersten 10 Dokumente auf dem Server bekommt man z.B. mit:[[xe1:Programmierkonstrukte;xe2:Schleifen - for]]</div><div class="pre"><div data-attribute-id="add91f3a-09f6-4049-8eb7-23bbf3d87053d6e11" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="07aab507-dc55-4a42-a6de-f5899292f3f1" contenteditable="true">(doc())[position() lt 11]</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="b3785b18-f654-4483-85a6-bdbb21caa0e1d6e13" class="p pmarker tags" data-element="p" data-tektur-editor-id="643ba43f-c33d-43b8-b609-5eb22e23c18a" contenteditable="true">Die Zahlen von 1 bis 100 mit:</div><div class="pre"><div data-attribute-id="faddf79c-86fb-40b3-8559-2cffccb482a4d6e15" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="bc906ad1-0fb4-4ce5-b0a2-680cf5b92f10" contenteditable="true">(for $i in (1 to 100) return $i)</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="7558c943-b4af-4b14-acf0-fc84efcebb90d6e17" class="p pmarker tags" data-element="p" data-tektur-editor-id="63fe5fb2-5236-49f6-a8be-28ab16709922" contenteditable="true">Wenn man diese beide Anweisungen untereinander in die Konsole
schreibt bekommt man einen Fehler. Trennt man sie mit einem 
Komma - ein Tupel wird erzeugt - dann klappt es.</div></div><div data-element="section" class="section optional show_menu tags" data-tektur-editor-id="d2d936d7-8fef-4d79-9506-3bd05ee67f22"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div data-attribute-id="0bbb962d-b38e-431a-855a-294425a5a016d6e20" class="title pmarker tags" data-element="title" data-tektur-editor-id="91c98de9-1823-4f9a-a71a-afe2e1dc6667" contenteditable="true">Dokumente in der DB anlegen</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="68e15e0c-efc5-472f-87fe-4d2dd4352485d6e22" class="p pmarker tags" data-element="p" data-tektur-editor-id="01cdf779-9787-4d60-b5ed-3ebc68227cae" contenteditable="true">Der Befehl zum Anlegen eines Dokuments in der Marklogic DB sieht
folgendermassen aus[[fn:https://docs.marklogic.com/xdmp:document-insert]]:[[xe1:Programmierkonstrukte;xe2:DB insert]]</div><div class="pre"><div data-attribute-id="07ddf63a-e489-4602-91fc-dff963e94ba9d6e24" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="faa3ef1c-db78-4728-8ab0-1510715fe7ef" contenteditable="true">xdmp:document-insert(
  "/alex-test/example-alex.xml",
  &#x3C;root&#x3E;Hier steht der Content&#x3C;/root&#x3E;, 
  &#x3C;options xmlns="xdmp:document-insert"&#x3E;  
    &#x3C;metadata&#x3E;{
      map:map() =&#x3E; map:with("valid-start", "2014-06-03T14:13:05.472585-07:00")
      =&#x3E; map:with("valid-end", "9999-12-31T11:59:59Z")
      }&#x3C;/metadata&#x3E;
  &#x3C;/options&#x3E;)</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="0db3e46f-54fa-4858-b85d-ad36ded2bf2ad6e26" class="p pmarker tags" data-element="p" data-tektur-editor-id="453f178c-0614-4263-a5de-b2a5c87d64d8" contenteditable="true">Packt man diese Instruktion in die for-Schleife oben, dann sieht das Konstrukt so aus:</div><div class="pre"><div data-attribute-id="38b39728-b4ea-49a2-b0ce-7441caf555fed6e28" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="3955784d-d2bb-4a11-b0d3-c6238f029805" contenteditable="true">(for $i in (1 to 10) return 
  xdmp:document-insert(
  concat("/alex-test/example-alex-",$i,".xml"),
  &#x3C;root&#x3E;Hier steht der Content {$i}&#x3C;/root&#x3E;, 
  &#x3C;options xmlns="xdmp:document-insert"&#x3E;  
    &#x3C;metadata&#x3E;{
      map:map() =&#x3E; map:with("valid-start", "2014-06-03T14:13:05.472585-07:00")
      =&#x3E; map:with("valid-end", "9999-12-31T11:59:59Z")
      }&#x3C;/metadata&#x3E;
  &#x3C;/options&#x3E;)
)</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="ccd162ef-82c4-45f2-8a4d-a72e51647514d6e30" class="p pmarker tags" data-element="p" data-tektur-editor-id="19c516a8-5b3c-41fe-bbf8-6dd755dc14e0" contenteditable="true">Dokumente kann man einer Collection[[xe1:Programmierkonstrukte;xe2:DB Collection]] zuweisen, um sie leichter finden und auswerten
zu k√∂nnen. Das geht mit dem folgenden Befehl[[fn:https://docs.marklogic.com/xdmp:document-add-collections]] und diesem Schnippsel:</div><div class="pre"><div data-attribute-id="9780afbe-3673-43d4-b7f8-a93b820730ecd6e32" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="10d4739f-f953-4755-b42c-0d30969be4f2" contenteditable="true">let $root :=
&#x3C;mein-test&#x3E;
   &#x3C;id&#x3E;{$id}&#x3C;/id&#x3E;
   &#x3C;content&#x3E;Hallo Welt!&#x3C;/content&#x3E;
&#x3C;/mein-test&#x3E;,
$options :=
&#x3C;options xmlns="xdmp:document-insert"&#x3E;  
  &#x3C;permissions&#x3E;{xdmp:default-permissions()}&#x3C;/permissions&#x3E;
  &#x3C;collections&#x3E;
    &#x3C;collection&#x3E;/alex-test&#x3C;/collection&#x3E;
  &#x3C;/collections&#x3E;
&#x3C;/options&#x3E;,
$fname := concat('/',$id,'_','.xml'),
$td := xdmp:document-insert($fname,$root,$options)
return 
  [...]</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="089d273b-a358-45a2-857e-181948135159d6e34" class="p pmarker tags" data-element="p" data-tektur-editor-id="df13847d-e000-412d-a49d-aea35513999f" contenteditable="true">Die Dokumente, die mit der Collection alex-test getaggt wurden, kann man sich mit der folgenden Schleife ausgeben lassen:</div><div class="pre"><div data-attribute-id="6e87f71c-227d-405e-975d-1ae487c9710bd6e36" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="a1bdfedb-1932-4fca-8684-cf3304d7a500" contenteditable="true">for $x in collection("/alex-test")
  return
    fn:document-uri($x)</div></div><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="2ef71eeb-0526-474c-8459-f8f580fa1627" contenteditable="true"></div></div></div></div>