<div data-attribute-id="06abe1b7-21be-4794-bec6-c28732cf6cbf" class="topic show_menu tags" data-element="topic" data-deletable="false" data-tektur-editor-id="bd62ebad-80e3-4ae6-b261-ac9e9775cca4"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div data-attribute-id="8c5a4500-d080-4910-b4cd-529caeb12ae3" class="title pmarker tags" data-element="title" data-tektur-editor-id="cfb5061a-bdab-4eb6-b134-2c656605722b" contenteditable="true">XQuery als Programmiersprache</div><div class="abstract optional show_menu tags" data-element="abstract" data-excluding="shortdesc" style="display:none" data-tektur-editor-id="df1f26d7-d4eb-4fa5-bd4b-bd185a55f557"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="0f4bbb2d-1384-4864-a237-cb8c367c68c0" contenteditable="true"></div></div><div data-attribute-id="ae4f3c4a-54be-4671-bba8-047bdf24b1d7" class="body show_menu tags" data-element="body" data-deletable="false" data-tektur-editor-id="c3c07590-c793-44eb-9734-a4d8b6c17ecc"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="section tektur-wrapper tags" data-element="section" data-tektur-editor-id="6c1b512f-aad0-451e-8645-0a9e3f9f0984"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="1e9a3c95-15bd-4eb0-89b8-59c8784a5425" class="p pmarker tags" data-element="p" data-tektur-editor-id="912ec1ac-e2cc-45cd-8f84-bf25b4ca734e" contenteditable="true">Erste Schritte in XQuery gehen sehr schön  
mit der Query Konsole auf dem Marklogic Server (Port 8000).
Hat man parallel auch noch oXygen offen, kann man die Testergb</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="66dfae66-ebc6-49c6-bf7a-a85664100f56d6e6" class="p pmarker tags" data-element="p" data-tektur-editor-id="68a4b7ba-3b83-458e-934f-82a3679c2079" contenteditable="true">nisse
aus der Konsole direkt in ein XQuery Server Skript packen.dwawqdqd</div><ul data-attribute-id="1e0a0cf2-e74e-411c-8458-29d8e7611d2ad6e8" class="ul tags" data-element="ul" data-tektur-editor-id="238707e4-1d98-45e9-966d-d5c27c369e09"><li data-attribute-id="eaf90f61-7ae4-43a7-b3fa-2d07bd675854d6e9" class="li tags" data-element="li" data-tektur-editor-id="5c31d1de-fadc-4cec-87d3-14efbdec79dd"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="e2e7007e-a048-42e0-8ac1-7b8dd8384cf4d6e10" class="p pmarker tags" data-element="p" data-tektur-editor-id="4c32d057-f61b-499a-94ed-904772c44572" contenteditable="true">ewwqeqe</div></li><li data-attribute-id="024e6e0c-cfc0-4e77-8414-35ffde4257add6e12" class="li tags" data-element="li" data-tektur-editor-id="0f0f8cb1-f2b5-42ff-9c22-5a190ab9eef7"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="4b891b85-6b50-4aec-b1f2-4e0e084af6e3d6e13" class="p pmarker tags" data-element="p" data-tektur-editor-id="ce931030-bcbb-4306-841d-0527b79a1b9e" contenteditable="true">qweqwe</div></li><li data-attribute-id="22dbe7ec-f3d8-47ac-bd16-bd771b414d03d6e15" class="li tags" data-element="li" data-tektur-editor-id="a2b19914-e839-4081-a11f-aa9a60e0b4b2"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="72aa1fb8-3b73-4976-abf5-770fef2535a7d6e16" class="p pmarker tags" data-element="p" data-tektur-editor-id="c8e4f75f-dde9-472b-8e63-8cabbd6ca5c8" contenteditable="true">qweqeq</div></li></ul><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="8d8cb926-923a-458c-909f-85a071780f3bd6e18" class="p pmarker tags" data-element="p" data-tektur-editor-id="b19cf490-e80f-4b3a-b340-5dd7e0d5f30a" contenteditable="true">wqdqwd</div></div><div data-element="section" class="section optional show_menu tags" data-tektur-editor-id="9aa61014-28cf-405a-ae3d-3c240ce3a115"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div data-attribute-id="fa1956ff-e468-4fb8-99dc-1a7a8f773707d6e7" class="title pmarker tags" data-element="title" data-tektur-editor-id="a3a426d7-8cc7-42b4-9787-47030c7e68f6" contenteditable="true">Schleifen</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="5fdff6dd-6c8a-467c-880d-33c88f7de0ded6e9" class="p pmarker tags" data-element="p" data-tektur-editor-id="6983daba-3f00-4958-adb3-23aaa0bd1b2f" contenteditable="true">Die ersten 10 Dokumente auf dem Server bekommt man z.B. mit:[[xe1:Programmierkonstrukte;xe2:Schleifen - for]]</div><div class="pre"><div data-attribute-id="17476a89-1a6d-4a17-a27e-a00ece2f4c95d6e25" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="161b3981-715b-4671-95d9-fbf6285d0e9c" contenteditable="true">(doc())[position() lt 11]</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="b3785b18-f654-4483-85a6-bdbb21caa0e1d6e13" class="p pmarker tags" data-element="p" data-tektur-editor-id="65f9bf4d-bf25-4ec4-92d8-40de2b3825d1" contenteditable="true">Die Zahlen von 1 bis 100 mit:</div><div class="pre"><div data-attribute-id="bb124584-50fa-4ac7-aeb5-2b8eb2b9342cd6e29" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="df369038-92cb-4277-949c-502458f44deb" contenteditable="true">(for $i in (1 to 100) return $i)</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="7558c943-b4af-4b14-acf0-fc84efcebb90d6e17" class="p pmarker tags" data-element="p" data-tektur-editor-id="92ca4112-a9c8-4035-9792-0046cd513359" contenteditable="true">Wenn man diese beide Anweisungen untereinander in die Konsole
schreibt bekommt man einen Fehler. Trennt man sie mit einem 
Komma - ein Tupel wird erzeugt - dann klappt es.</div></div><div data-element="section" class="section optional show_menu tags" data-tektur-editor-id="12771d77-7365-44a0-bbfd-9bd9f6283151"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div data-attribute-id="0bbb962d-b38e-431a-855a-294425a5a016d6e20" class="title pmarker tags" data-element="title" data-tektur-editor-id="7cbaae30-065d-4fcc-b37e-7380f62df370" contenteditable="true">Dokumente in der DB anlegen</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="68e15e0c-efc5-472f-87fe-4d2dd4352485d6e22" class="p pmarker tags" data-element="p" data-tektur-editor-id="3ed9c304-f181-4797-ad29-3e8a81101db3" contenteditable="true">Der Befehl zum Anlegen eines Dokuments in der Marklogic DB sieht
folgendermassen aus[[fn:https://docs.marklogic.com/xdmp:document-insert*Doku zu xdmp:documen-insert Funktion auf den MarkLogic Webseiten]]:[[xe1:Programmierkonstrukte;xe2:DB insert]]</div><div class="pre"><div data-attribute-id="4224a0b9-d026-40c2-9e8a-0c072ac683e1d6e38" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="8a052771-8f58-4870-83c5-177363f0577e" contenteditable="true">xdmp:document-insert(
  "/alex-test/example-alex.xml",
  &#x3C;root&#x3E;Hier steht der Content&#x3C;/root&#x3E;, 
  &#x3C;options xmlns="xdmp:document-insert"&#x3E;  
    &#x3C;metadata&#x3E;{
      map:map() =&#x3E; map:with("valid-start", "2014-06-03T14:13:05.472585-07:00")
      =&#x3E; map:with("valid-end", "9999-12-31T11:59:59Z")
      }&#x3C;/metadata&#x3E;
  &#x3C;/options&#x3E;)</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="0db3e46f-54fa-4858-b85d-ad36ded2bf2ad6e26" class="p pmarker tags" data-element="p" data-tektur-editor-id="5e76e7f8-d6af-43b8-a1f5-be7203df0911" contenteditable="true">Packt man diese Instruktion in die for-Schleife oben, dann sieht das Konstrukt so aus:</div><div class="pre"><div data-attribute-id="29c37393-6206-4b1d-bb68-8a635c2d313bd6e42" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="791cd817-e715-494a-b458-76f1cbc7a439" contenteditable="true">(for $i in (1 to 10) return 
  xdmp:document-insert(
  concat("/alex-test/example-alex-",$i,".xml"),
  &#x3C;root&#x3E;Hier steht der Content {$i}&#x3C;/root&#x3E;, 
  &#x3C;options xmlns="xdmp:document-insert"&#x3E;  
    &#x3C;metadata&#x3E;{
      map:map() =&#x3E; map:with("valid-start", "2014-06-03T14:13:05.472585-07:00")
      =&#x3E; map:with("valid-end", "9999-12-31T11:59:59Z")
      }&#x3C;/metadata&#x3E;
  &#x3C;/options&#x3E;)
)</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="ccd162ef-82c4-45f2-8a4d-a72e51647514d6e30" class="p pmarker tags" data-element="p" data-tektur-editor-id="4007d036-c9bd-46f3-8db8-527ed1651ce2" contenteditable="true">Dokumente kann man einer Collection[[xe1:Programmierkonstrukte;xe2:DB Collection]] zuweisen, um sie leichter finden und auswerten
zu können. Das geht mit dem folgenden Befehl[[fn:https://docs.marklogic.com/xdmp:document-add-collections*Dokumentation zur xdmp:document-add-collections Funktion auf den MarkLogic Webseiten]] und diesem Schnippsel:</div><div class="pre"><div data-attribute-id="73a09d21-0ace-4086-b1a0-dc3e9a204263d6e46" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="ac53111b-b13b-4a2e-a661-6ddab7dcbc11" contenteditable="true">let $root :=
&#x3C;mein-test&#x3E;
   &#x3C;id&#x3E;{$id}&#x3C;/id&#x3E;
   &#x3C;content&#x3E;Hallo Welt!&#x3C;/content&#x3E;
&#x3C;/mein-test&#x3E;,
$options :=
&#x3C;options xmlns="xdmp:document-insert"&#x3E;  
  &#x3C;permissions&#x3E;{xdmp:default-permissions()}&#x3C;/permissions&#x3E;
  &#x3C;collections&#x3E;
    &#x3C;collection&#x3E;/alex-test&#x3C;/collection&#x3E;
  &#x3C;/collections&#x3E;
&#x3C;/options&#x3E;,
$fname := concat('/',$id,'_','.xml'),
$td := xdmp:document-insert($fname,$root,$options)
return 
  [...]</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="089d273b-a358-45a2-857e-181948135159d6e34" class="p pmarker tags" data-element="p" data-tektur-editor-id="1c310d65-38cc-42bc-be3e-b3e5bd42bd05" contenteditable="true">Die Dokumente, die mit der Collection alex-test getaggt wurden, kann man sich mit der folgenden Schleife ausgeben lassen:</div><div class="pre"><div data-attribute-id="43b0caa8-91f3-4d9e-bd3a-e199cf3eccf6d6e50" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="060a107d-273b-4f5a-91bd-428b8d7c9ce7" contenteditable="true">for $x in collection("/alex-test")
  return
    fn:document-uri($x)</div></div><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="5f69101b-773a-4559-ac49-bfedaf55b7c1" contenteditable="true"></div></div></div></div>