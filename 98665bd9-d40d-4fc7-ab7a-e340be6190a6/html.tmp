<div data-attribute-id="06abe1b7-21be-4794-bec6-c28732cf6cbf" class="topic show_menu tags" data-element="topic" data-deletable="false" data-tektur-editor-id="c4b49598-271a-45a6-acdc-847d4d6e4b18"><div class="gui-optional-elements-button" contenteditable="false" data-tektur-editor-id="cc30ba4f-e81d-457f-ac6d-2abcb09f3965" style="display: block;"><div class="menu-icon" style="display:none" data-tektur-editor-id="627dd79d-7005-4fc1-b68b-25834a66ae47">+</div></div><div data-attribute-id="8c5a4500-d080-4910-b4cd-529caeb12ae3" class="title pmarker tags show_menu" data-element="title" data-tektur-editor-id="3ae121c6-1825-46a6-ac0a-c4e1b424e233" contenteditable="true">XQuery als Programmiersprache</div><div class="abstract optional show_menu tags" data-element="abstract" data-excluding="shortdesc" style="display:none" data-tektur-editor-id="f07e4f5d-255c-4ef9-a8ad-17f2d8acde99"><div class="gui-optional-elements-button" contenteditable="false" data-tektur-editor-id="e3040d03-897b-48d3-bc5b-42e4c78475a1" style="display: block;"><div class="menu-icon" style="display:none" data-tektur-editor-id="59bdc9f1-4e46-4028-8e58-0e33efa2f1e3">+</div></div><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="28693e6b-1ae9-4139-ab2e-f95f147f44d4" contenteditable="true"></div></div><div data-attribute-id="ae4f3c4a-54be-4671-bba8-047bdf24b1d7" class="body show_menu tags" data-element="body" data-deletable="false" data-tektur-editor-id="bddc8bff-0c07-4c2d-82ef-2d8e16a5e2b3"><div class="gui-optional-elements-button" contenteditable="false" data-tektur-editor-id="c7d78248-54e3-43cb-988f-976fe4061f06" style="display: block;"><div class="menu-icon" style="display:none" data-tektur-editor-id="a3e321b5-dd6d-48fd-9406-5790318a6b45">+</div></div><div class="section tektur-wrapper tags" data-element="section" data-tektur-editor-id="5249c736-dab8-4b86-a6e5-33b09b38b19e"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="1e9a3c95-15bd-4eb0-89b8-59c8784a5425" class="p pmarker tags" data-element="p" data-tektur-editor-id="62f237f2-8ffe-4aa1-b5b4-0d7632664b77" contenteditable="true">Erste Schritte in XQuery gehen sehr schön  
mit der Query Konsole auf dem Marklogic Server (Port 8000).
Hat man parallel auch noch oXygen offen, kann man die Testergbnisse
aus der Konsole direkt in ein XQuery Server Skript packen.</div></div><div class="section optional show_menu tags" data-element="section" data-tektur-editor-id="5e913030-9738-4cf3-b2c3-4fcefddc9a49"><div class="gui-optional-elements-button" contenteditable="false" data-tektur-editor-id="6c62c864-a7b7-4d1b-9795-e9d67b3ed2eb" style="display: block;"><div class="menu-icon" style="display:none" data-tektur-editor-id="2699626c-57a2-4c92-9960-ac8c32e9129b">+</div></div><div data-element="title" class="pmarker title tags show_menu" contenteditable="true" data-tektur-editor-id="e1cd77de-4c24-42e0-ac1f-0762ef7cb676">Schleifen</div><div class="pmarker text tags" data-element="p" contenteditable="true" data-tektur-editor-id="f772149a-99f6-4f8a-ac3d-6f59cd4851f2">Die ersten 10 Dokumente auf dem Server bekommt man z.B. mit:</div><div class="pre tags" data-tektur-editor-id="383cce35-dfe1-4627-ab7c-360da609ef53"><div class="pre-content pmarker show_menu tags placeholder" data-element="pre" contenteditable="true" data-tektur-editor-id="e146f701-ab99-4886-8037-f972a4c35c3b">(doc())[position() lt 11]</div></div><div class="text pmarker tags" data-element="p" contenteditable="true" data-tektur-editor-id="b473cf1a-7658-4060-9fa1-3410def02757">Die Zahlen von 1 bis 100 mit:</div><div class="pre tags" data-tektur-editor-id="477d75ec-4d34-49cb-aa27-a2fccb625f67"><div class="pre-content pmarker show_menu tags" data-element="pre" contenteditable="true" data-tektur-editor-id="e722784f-6ea5-4d55-89f5-03cbcec743aa">(for $i in (1 to 100) return $i)</div></div><div class="text pmarker tags" data-element="p" contenteditable="true" data-tektur-editor-id="b680b81a-6bac-438a-8bf3-9bad124f3f42">Wenn man diese beide Anweisungen untereinander in die Konsole
schreibt bekommt man einen Fehler. Trennt man sie mit einem 
Komma - ein Tupel wird erzeugt - dann klappt es.</div></div><div class="section optional show_menu tags" data-element="section" data-tektur-editor-id="0d3caa89-8293-4c68-8241-78659c62eb1a"><div class="gui-optional-elements-button" contenteditable="false" data-tektur-editor-id="64c27370-5da9-43de-9192-6d7410162e1e" style="display: block;"><div class="menu-icon" style="display:none" data-tektur-editor-id="7eb52734-0071-4c4f-a71d-5f76441cee81">+</div></div><div data-element="title" class="pmarker title tags show_menu" contenteditable="true" data-tektur-editor-id="a9a7979d-70ff-4795-a260-bce9ce260073">Dokumente in der DB anlegen</div><div class="pmarker text tags" data-element="p" contenteditable="true" data-tektur-editor-id="c10bf1fc-5838-4bb9-8940-d1786d3966ee">Der Befehl zum Anlegen eines Dokuments in der Marklogic DB sieht
folgendermassen aus[[fn:https://docs.marklogic.com/xdmp:document-insert]]:</div><div class="pre tags" data-tektur-editor-id="151746dd-1019-41db-bf78-b8ca53d7b376"><div class="pre-content pmarker show_menu tags placeholder" data-element="pre" contenteditable="true" data-tektur-editor-id="01625afd-23a0-49ae-a827-9e07b03ba16d">xdmp:document-insert(
  "/alex-test/example-alex.xml",
  &#x3C;root&#x3E;Hier steht der Content&#x3C;/root&#x3E;, 
  &#x3C;options xmlns="xdmp:document-insert"&#x3E;  
    &#x3C;metadata&#x3E;{
      map:map() =&#x3E; map:with("valid-start", "2014-06-03T14:13:05.472585-07:00")
      =&#x3E; map:with("valid-end", "9999-12-31T11:59:59Z")
      }&#x3C;/metadata&#x3E;
  &#x3C;/options&#x3E;)</div></div><div class="text pmarker tags" data-element="p" contenteditable="true" data-tektur-editor-id="b3b2ba69-1c59-4af0-bb2c-9cc3ec45c130">Packt man diese Instruktion in die for-Schleife oben, dann sieht das Konstrukt so aus:</div><div class="pre tags" data-tektur-editor-id="aa7f24f7-da5b-4f34-b21d-38d47da36e71"><div class="pre-content pmarker show_menu tags placeholder" data-element="pre" contenteditable="true" data-tektur-editor-id="f33393e0-2413-468d-acb1-bae4d0d3af27">(for $i in (1 to 10) return 
  xdmp:document-insert(
  concat("/alex-test/example-alex-",$i,".xml"),
  &#x3C;root&#x3E;Hier steht der Content {$i}&#x3C;/root&#x3E;, 
  &#x3C;options xmlns="xdmp:document-insert"&#x3E;  
    &#x3C;metadata&#x3E;{
      map:map() =&#x3E; map:with("valid-start", "2014-06-03T14:13:05.472585-07:00")
      =&#x3E; map:with("valid-end", "9999-12-31T11:59:59Z")
      }&#x3C;/metadata&#x3E;
  &#x3C;/options&#x3E;)
)</div></div><div class="text pmarker tags" data-element="p" contenteditable="true" data-tektur-editor-id="783d9249-c4fc-402e-b6f1-3f7690e96b75">Dokumente kann man einer Collection zuweisen, um sie leichter finden und auswerten
zu können. Das geht mit dem folgenden Befehl[[fn:https://docs.marklogic.com/xdmp:document-add-collections]]:</div><div class="pre tags" data-tektur-editor-id="40704fc5-608e-43e7-9111-9b01fc2ca035"><div class="pre-content pmarker show_menu tags placeholder" data-element="pre" contenteditable="true" data-tektur-editor-id="66a6e06c-d8e6-4841-b59d-3be02821fcb0">for $x in collection("http://www.tekturcms.de/alex-test")
  return
    fn:document-uri($x)</div></div><div class="placeholder text pmarker tags" data-element="p" contenteditable="true" data-tektur-editor-id="4fb212a1-3dd0-42d9-8539-a792752e219e"></div></div></div></div>