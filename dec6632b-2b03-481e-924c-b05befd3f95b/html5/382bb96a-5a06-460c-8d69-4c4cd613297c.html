<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//DE" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html data-tektur-document-version="0">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>XML Hands On</title>
      <link>
         <link rel="stylesheet" type="text/css" href="/html5/css/site.css">
         <link rel="stylesheet" type="text/css" href="/html5/css/elements.css">
         <link rel="stylesheet" type="text/css" href="/html5/css/prettify.css"><script type="text/javascript" src="/html5/js/jquery.js"></script><script type="text/javascript" src="/html5/js/jquery.cookie.js"></script><script type="text/javascript" src="/html5/js/jquery.treeview.js"></script><script type="text/javascript" src="/html5/js/jquery.mark.min.js"></script><script type="text/javascript" src="/html5/js/prettify.js"></script><script type="text/javascript" src="/dist/site.js"></script>
   </head>
   <body>
      <div id="bar"></div>
      <div id="header">
         <h1>
            <div id="header-text">XML Hands On</div>
         </h1>
      </div>
      <div id="nav">
         <div class="buttons" style="width:100%">
            <ul>
               <li><a href="#" class="info menu"><img id="tocbutton" src="/images/toc_open.png" border="0"><span>hide sidebar</span></a></li>
               <li><a href="../result.pdf" target="_blank" class="info menu"><img id="pdfbutton" style="margin-top:3px" src="/images/pdficon.png" border="0"><span>Show PDF</span></a></li>
            </ul>
         </div>
      </div>
      <div id="sidebar"><a href="/tektur.html" title="Go to Tektur CCMS"><img id="logo-image" src="../logo.png"></a><div id="scrollarea">
            <div id="toc-panel"><a class="cover-link" href="book.html">Cover</a><ul id="navigation" class="treeview-gray">
                  <li class="toc-level-1"><a href="c15a8d5c-03bc-4ee9-a04a-a123e0ce5d88.html" class="toc-entry" id="chapter-link_c15a8d5c-03bc-4ee9-a04a-a123e0ce5d88" data-level="1"><span class="chapter-link1">1&nbsp;&nbsp;
                           Intro
                           </span></a></li>
                  <li class="toc-level-1"><a href="792c9845-7c63-4a18-8aee-1878763200b5.html" class="toc-entry" id="chapter-link_792c9845-7c63-4a18-8aee-1878763200b5" data-level="1"><span class="chapter-link1">2&nbsp;&nbsp;
                           Anwendungsgebiete
                           </span></a><ul>
                        <li class="toc-level-2"><a href="a264856d-c5d5-4d7b-993f-421bf222db76.html" class="toc-entry" id="chapter-link_a264856d-c5d5-4d7b-993f-421bf222db76" data-level="2"><span class="chapter-link2">2.1&nbsp;&nbsp;
                                 Führende Technologie XSLT
                                 </span></a></li>
                        <li class="toc-level-2"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" class="toc-entry" id="chapter-link_3c090c4b-2d46-459c-87ba-60a824bf5aa5" data-level="2"><span class="chapter-link2">2.2&nbsp;&nbsp;
                                 Einige aktuelle und vergangene Szenarien
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_6de19f8a-d057-4328-8fdd-1d2f7aa0162fd6e6" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.1</span>&nbsp;&nbsp;<span class="text">
                                          XML Webseiten
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_9434d120-e2ed-464a-82c6-9372b56df404d6e25" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.2</span>&nbsp;&nbsp;<span class="text">
                                          Serverseitige Konvertierung
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_e29cac40-a83c-4768-9165-debd6b5dc004d6e40" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.3</span>&nbsp;&nbsp;<span class="text">
                                          Ausgabeformate
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_a14faa96-d86b-4432-8291-e619da8989a8d6e47" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.4</span>&nbsp;&nbsp;<span class="text">
                                          Menschenlesbar machen
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_6c2ad096-d310-41a1-9648-cf267b4a601bd6e60" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.5</span>&nbsp;&nbsp;<span class="text">
                                          Diagramme
                                          </span></span></a></li>
                           </ul>
                        </li>
                        <li class="toc-level-2"><a href="151a9719-a32a-4fca-a55c-769b47a73b34.html" class="toc-entry" id="chapter-link_151a9719-a32a-4fca-a55c-769b47a73b34" data-level="2"><span class="chapter-link2">2.3&nbsp;&nbsp;
                                 Professionelle XML Verarbeitung
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="151a9719-a32a-4fca-a55c-769b47a73b34.html" id="chapter-link_c4d4986c-7f5d-4c75-992d-f21d9f94f1ded6e6" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.3.1</span>&nbsp;&nbsp;<span class="text">
                                          Single Source Publishing
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="151a9719-a32a-4fca-a55c-769b47a73b34.html" id="chapter-link_85f16122-2344-43fa-b01e-f7990ceda6c7d6e38" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.3.2</span>&nbsp;&nbsp;<span class="text">
                                          Code Generierung
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="151a9719-a32a-4fca-a55c-769b47a73b34.html" id="chapter-link_df844c85-cf67-4bb4-aab3-60c95620e160d6e55" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.3.3</span>&nbsp;&nbsp;<span class="text">
                                          Migrationen und Konvertierungen
                                          </span></span></a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="toc-level-1"><a href="31a92dc0-959c-49a1-b06e-01e2369e050e.html" class="toc-entry" id="chapter-link_31a92dc0-959c-49a1-b06e-01e2369e050e" data-level="1"><span class="chapter-link1">3&nbsp;&nbsp;
                           Wichtige Konzepte
                           </span></a><ul>
                        <li class="toc-level-2"><a href="5b73f348-0058-45e0-82f7-c3de72ec5d41.html" class="toc-entry" id="chapter-link_5b73f348-0058-45e0-82f7-c3de72ec5d41" data-level="2"><span class="chapter-link2">3.1&nbsp;&nbsp;
                                 Push vs. Pull Stylesheets 
                                 </span></a></li>
                        <li class="toc-level-2"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" class="toc-entry" id="chapter-link_db988919-f71e-437e-b699-b6fdd2a32cb9" data-level="2"><span class="chapter-link2">3.2&nbsp;&nbsp;
                                 Eindeutigkeit der Regelbasis
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_1290e2d3-36b1-47c7-9ea9-1231cbd21822d6e8" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.2.1</span>&nbsp;&nbsp;<span class="text">
                                          Reihenfolge der Match-Regeln
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_f41bdb30-3ad1-4288-883e-f6538b6c7fbfd6e15" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.2.2</span>&nbsp;&nbsp;<span class="text">
                                          Präzedenz der Auswertung
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_a2a2dd57-e7a9-4a19-b402-70930a54ce3ad6e76" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.2.3</span>&nbsp;&nbsp;<span class="text">
                                          Import Präzendenz und Default-Regel
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_91eff378-b652-470d-b4e7-2b1f6fcd0711d6e89" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.2.4</span>&nbsp;&nbsp;<span class="text">
                                          Prioritäten
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_1b656433-c943-45fa-9eb0-2c9069f72295d6e118" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.2.5</span>&nbsp;&nbsp;<span class="text">
                                          Modus Attribute
                                          </span></span></a></li>
                           </ul>
                        </li>
                        <li class="toc-level-2"><a href="3e443c28-8698-470b-b443-f286ff7ed2d5.html" class="toc-entry" id="chapter-link_3e443c28-8698-470b-b443-f286ff7ed2d5" data-level="2"><span class="chapter-link2">3.3&nbsp;&nbsp;
                                 Namespaces
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="3e443c28-8698-470b-b443-f286ff7ed2d5.html" id="chapter-link_2fa1eb5e-4f82-4dac-94e3-fa258d4f1703d6e82" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.3.1</span>&nbsp;&nbsp;<span class="text">
                                          Namespaces in XQuery
                                          </span></span></a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="toc-level-1"><a href="f838f9be-97bf-44a4-ac63-2e813a87f2ea.html" class="toc-entry" id="chapter-link_f838f9be-97bf-44a4-ac63-2e813a87f2ea" data-level="1"><span class="chapter-link1">4&nbsp;&nbsp;
                           Ausgewählte Themen
                           </span></a><ul>
                        <li class="toc-level-2"><a href="c20c1e01-1175-4664-a26a-71317760930f.html" class="toc-entry" id="chapter-link_c20c1e01-1175-4664-a26a-71317760930f" data-level="2"><span class="chapter-link2">4.1&nbsp;&nbsp;
                                 XSLT Uses Cases und Lösung
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="ceed4546-a60b-4d5f-a625-6e79c180cc13.html" class="toc-entry" id="chapter-link_ceed4546-a60b-4d5f-a625-6e79c180cc13" data-level="3"><span class="chapter-link3">4.1.1&nbsp;&nbsp;
                                       Vortransformationen 
                                       </span></a></li>
                              <li class="toc-level-3"><a href="888d37da-0dbe-4fae-bec9-2ad1e99f7818.html" class="toc-entry" id="chapter-link_888d37da-0dbe-4fae-bec9-2ad1e99f7818" data-level="3"><span class="chapter-link3">4.1.2&nbsp;&nbsp;
                                       Vererbung 
                                       </span></a><ul>
                                    <li class="toc-level-4"><a href="888d37da-0dbe-4fae-bec9-2ad1e99f7818.html" id="chapter-link_944c84ea-be4e-4206-9063-472e32bee149d6e8" data-level="4" data-is-section="true" class="toc-entry"><span class="chapter-link4"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.1.2.1</span>&nbsp;&nbsp;<span class="text">
                                                Beispiel: Parameterisierung
                                                </span></span></a></li>
                                 </ul>
                              </li>
                              <li class="toc-level-3"><a href="1f8595d0-4ed9-4070-8cff-c5c59f690093.html" class="toc-entry" id="chapter-link_1f8595d0-4ed9-4070-8cff-c5c59f690093" data-level="3"><span class="chapter-link3">4.1.3&nbsp;&nbsp;
                                       XSLT Streaming
                                       </span></a><ul>
                                    <li class="toc-level-4"><a href="51bec5b9-1207-45cc-9bf2-b6ce3e300547.html" class="toc-entry" id="chapter-link_51bec5b9-1207-45cc-9bf2-b6ce3e300547" data-level="4"><span class="chapter-link4">4.1.3.1&nbsp;&nbsp;
                                             XSLT Akkumulator
                                             </span></a></li>
                                    <li class="toc-level-4"><a href="b308e60a-c7f3-4143-8e04-6c0d3bd4df01.html" class="toc-entry" id="chapter-link_b308e60a-c7f3-4143-8e04-6c0d3bd4df01" data-level="4"><span class="chapter-link4">4.1.3.2&nbsp;&nbsp;
                                             XSLT Iterator
                                             </span></a></li>
                                 </ul>
                              </li>
                              <li class="toc-level-3"><a href="e3ccdc75-56e4-45b3-a2be-07a61a2dcd51.html" class="toc-entry" id="chapter-link_e3ccdc75-56e4-45b3-a2be-07a61a2dcd51" data-level="3"><span class="chapter-link3">4.1.4&nbsp;&nbsp;
                                       Identifikation mit generate-id() 
                                       </span></a><ul>
                                    <li class="toc-level-4"><a href="e3ccdc75-56e4-45b3-a2be-07a61a2dcd51.html" id="chapter-link_30ab40c1-2d1d-48de-9e33-8880b5750454d6e8" data-level="4" data-is-section="true" class="toc-entry"><span class="chapter-link4"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.1.4.1</span>&nbsp;&nbsp;<span class="text">
                                                Beispiel Stückliste
                                                </span></span></a></li>
                                    <li class="toc-level-4"><a href="e3ccdc75-56e4-45b3-a2be-07a61a2dcd51.html" id="chapter-link_daa30a46-0eb1-4ab7-a061-d547aa976702d6e17" data-level="4" data-is-section="true" class="toc-entry"><span class="chapter-link4"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.1.4.2</span>&nbsp;&nbsp;<span class="text">
                                                Beispiel Mantel Dokument
                                                </span></span></a></li>
                                 </ul>
                              </li>
                              <li class="toc-level-3"><a href="12f4b667-2093-456b-8986-d269a6375d60.html" class="toc-entry" id="chapter-link_12f4b667-2093-456b-8986-d269a6375d60" data-level="3"><span class="chapter-link3">4.1.5&nbsp;&nbsp;
                                       Reguläre Ausdrücke
                                       </span></a><ul>
                                    <li class="toc-level-4"><a href="12f4b667-2093-456b-8986-d269a6375d60.html" id="chapter-link_808c545a-34b0-4fd5-8e3e-0ced0738f3a5d6e20" data-level="4" data-is-section="true" class="toc-entry"><span class="chapter-link4"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.1.5.1</span>&nbsp;&nbsp;<span class="text">
                                                XSLT Analyze String
                                                </span></span></a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="toc-level-2"><a href="8969a5d0-6c34-4bc8-8b60-3a070bc123d7.html" class="toc-entry" id="chapter-link_8969a5d0-6c34-4bc8-8b60-3a070bc123d7" data-level="2"><span class="chapter-link2">4.2&nbsp;&nbsp;
                                 XQuery Use Cases und Lösung
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="0846d6a2-6999-42ab-9e83-55bc197fc11c.html" class="toc-entry" id="chapter-link_0846d6a2-6999-42ab-9e83-55bc197fc11c" data-level="3"><span class="chapter-link3">4.2.1&nbsp;&nbsp;
                                       Abfragen mit XQuery
                                       </span></a><ul>
                                    <li class="toc-level-4"><a href="0846d6a2-6999-42ab-9e83-55bc197fc11c.html" id="chapter-link_d54b3687-4800-456d-8153-f0b83aa927d5d6e19" data-level="4" data-is-section="true" class="toc-entry"><span class="chapter-link4"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.1.1</span>&nbsp;&nbsp;<span class="text">
                                                XQuery Builder
                                                </span></span></a></li>
                                    <li class="toc-level-4"><a href="0846d6a2-6999-42ab-9e83-55bc197fc11c.html" id="chapter-link_95511190-85d0-4745-ac2f-c3ab6125cd3ed6e34" data-level="4" data-is-section="true" class="toc-entry"><span class="chapter-link4"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.1.2</span>&nbsp;&nbsp;<span class="text">
                                                FLOWR Expression
                                                </span></span></a></li>
                                    <li class="toc-level-4"><a href="0846d6a2-6999-42ab-9e83-55bc197fc11c.html" id="chapter-link_d80239d8-d644-4cb8-9fb2-daef10ea125cd6e46" data-level="4" data-is-section="true" class="toc-entry"><span class="chapter-link4"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.1.3</span>&nbsp;&nbsp;<span class="text">
                                                XML per XQuery
                                                </span></span></a></li>
                                    <li class="toc-level-4"><a href="0846d6a2-6999-42ab-9e83-55bc197fc11c.html" id="chapter-link_2a4b6466-60af-4bca-b0a9-df9ec213d4fed6e57" data-level="4" data-is-section="true" class="toc-entry"><span class="chapter-link4"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.1.4</span>&nbsp;&nbsp;<span class="text">
                                                Document Projection
                                                </span></span></a></li>
                                 </ul>
                              </li>
                              <li class="toc-level-3"><a href="38f7a676-cbef-4a69-9ae9-d89bddde2719.html" class="toc-entry" id="chapter-link_38f7a676-cbef-4a69-9ae9-d89bddde2719" data-level="3"><span class="chapter-link3">4.2.2&nbsp;&nbsp;
                                       Connector zu Marklogic in Oxygen
                                       </span></a></li>
                              <li class="toc-level-3"><a href="98665bd9-d40d-4fc7-ab7a-e340be6190a6.html" class="toc-entry" id="chapter-link_98665bd9-d40d-4fc7-ab7a-e340be6190a6" data-level="3"><span class="chapter-link3">4.2.3&nbsp;&nbsp;
                                       XQuery als Programmiersprache
                                       </span></a><ul>
                                    <li class="toc-level-4"><a href="98665bd9-d40d-4fc7-ab7a-e340be6190a6.html" id="chapter-link_8535b0cd-9b72-43e4-8899-ef673e35f57bd6e8" data-level="4" data-is-section="true" class="toc-entry"><span class="chapter-link4"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.3.1</span>&nbsp;&nbsp;<span class="text">
                                                Schleifen
                                                </span></span></a></li>
                                    <li class="toc-level-4"><a href="98665bd9-d40d-4fc7-ab7a-e340be6190a6.html" id="chapter-link_ca6dd787-a16a-4366-b361-3d1272261e82d6e21" data-level="4" data-is-section="true" class="toc-entry"><span class="chapter-link4"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.3.2</span>&nbsp;&nbsp;<span class="text">
                                                Dokumente in der DB anlegen
                                                </span></span></a></li>
                                    <li class="toc-level-4"><a href="3630ee02-616b-4bbc-8655-9064d57bf945.html" class="toc-entry" id="chapter-link_3630ee02-616b-4bbc-8655-9064d57bf945" data-level="4"><span class="chapter-link4">4.2.3.3&nbsp;&nbsp;
                                             Funktionen und Module
                                             </span></a><ul>
                                          <li class="toc-level-5"><a href="3630ee02-616b-4bbc-8655-9064d57bf945.html" id="chapter-link_1c4b477f-6013-406a-8319-1a6ff8194606d6e4" data-level="5" data-is-section="true" class="toc-entry"><span class="chapter-link5"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.3.3.1</span>&nbsp;&nbsp;<span class="text">
                                                      Funktionen
                                                      </span></span></a></li>
                                          <li class="toc-level-5"><a href="3630ee02-616b-4bbc-8655-9064d57bf945.html" id="chapter-link_68184ae0-c86e-40b4-b562-b920095a0693d6e25" data-level="5" data-is-section="true" class="toc-entry"><span class="chapter-link5"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.3.3.2</span>&nbsp;&nbsp;<span class="text">
                                                      Module
                                                      </span></span></a></li>
                                       </ul>
                                    </li>
                                    <li class="toc-level-4"><a href="d9cd641f-29f4-485d-8e67-32519d422b08.html" class="toc-entry" id="chapter-link_d9cd641f-29f4-485d-8e67-32519d422b08" data-level="4"><span class="chapter-link4">4.2.3.4&nbsp;&nbsp;
                                             If..then..else Ausdrücke
                                             </span></a><ul>
                                          <li class="toc-level-5"><a href="d9cd641f-29f4-485d-8e67-32519d422b08.html" id="chapter-link_e184e1a1-8101-4b64-ab06-694e46ddb96fd6e10" data-level="5" data-is-section="true" class="toc-entry"><span class="chapter-link5"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.3.4.1</span>&nbsp;&nbsp;<span class="text">
                                                      XQuery Server Application
                                                      </span></span></a></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="toc-level-3"><a href="382bb96a-5a06-460c-8d69-4c4cd613297c.html" class="toc-entry" id="chapter-link_382bb96a-5a06-460c-8d69-4c4cd613297c" data-level="3"><span class="chapter-link3">4.2.4&nbsp;&nbsp;
                                       SQL Views in MarkLogic
                                       </span></a></li>
                           </ul>
                        </li>
                        <li class="toc-level-2"><a href="b3eba8f1-fb04-4ab5-ac92-5f52c80d1936.html" class="toc-entry" id="chapter-link_b3eba8f1-fb04-4ab5-ac92-5f52c80d1936" data-level="2"><span class="chapter-link2">4.3&nbsp;&nbsp;
                                 Testing
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="6fd7b270-9d1f-4f8e-996f-13b5862956a9.html" class="toc-entry" id="chapter-link_6fd7b270-9d1f-4f8e-996f-13b5862956a9" data-level="3"><span class="chapter-link3">4.3.1&nbsp;&nbsp;
                                       Validierung mit Schematron
                                       </span></a><ul>
                                    <li class="toc-level-4"><a href="6fd7b270-9d1f-4f8e-996f-13b5862956a9.html" id="chapter-link_068ab39f-539e-4327-8131-08e0aff0c9e9d6e14" data-level="4" data-is-section="true" class="toc-entry"><span class="chapter-link4"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.3.1.1</span>&nbsp;&nbsp;<span class="text">
                                                Schematron ist XSLT
                                                </span></span></a></li>
                                    <li class="toc-level-4"><a href="6fd7b270-9d1f-4f8e-996f-13b5862956a9.html" id="chapter-link_51b05301-481d-49df-b450-c35261dd74ead6e32" data-level="4" data-is-section="true" class="toc-entry"><span class="chapter-link4"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.3.1.2</span>&nbsp;&nbsp;<span class="text">
                                                CLI Verwendung
                                                </span></span></a></li>
                                 </ul>
                              </li>
                              <li class="toc-level-3"><a href="cc183707-5352-4c9c-9c31-68047a882d0f.html" class="toc-entry" id="chapter-link_cc183707-5352-4c9c-9c31-68047a882d0f" data-level="3"><span class="chapter-link3">4.3.2&nbsp;&nbsp;
                                       Erste Schritte mit Xspec
                                       </span></a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="toc-level-1"><a href="f606e9c6-3d46-48f3-8de4-46e13dc7d055.html" class="toc-entry" id="chapter-link_f606e9c6-3d46-48f3-8de4-46e13dc7d055" data-level="1"><span class="chapter-link1">5&nbsp;&nbsp;
                           Zusätzliches Know-How
                           </span></a><ul>
                        <li class="toc-level-2"><a href="7dbb15ce-bbc5-4d91-b977-ed7e8117730e.html" class="toc-entry" id="chapter-link_7dbb15ce-bbc5-4d91-b977-ed7e8117730e" data-level="2"><span class="chapter-link2">5.1&nbsp;&nbsp;
                                 GIT Einmaleins 
                                 </span></a></li>
                        <li class="toc-level-2"><a href="4100d43a-5b71-43ba-a05f-1063fcee8679.html" class="toc-entry" id="chapter-link_4100d43a-5b71-43ba-a05f-1063fcee8679" data-level="2"><span class="chapter-link2">5.2&nbsp;&nbsp;
                                 XML Editoren 
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="4100d43a-5b71-43ba-a05f-1063fcee8679.html" id="chapter-link_b2ac33a7-6665-4277-94ee-3b4b6d16b05ed6e52" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">5.2.1</span>&nbsp;&nbsp;<span class="text">
                                          WYSIWYM Desktop
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="4100d43a-5b71-43ba-a05f-1063fcee8679.html" id="chapter-link_d4f04983-9878-4f20-b17c-b1ee20eb483bd6e73" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">5.2.2</span>&nbsp;&nbsp;<span class="text">
                                          WYSIWYG Desktop
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="4100d43a-5b71-43ba-a05f-1063fcee8679.html" id="chapter-link_dd5f7966-0927-4a5f-be22-c6a868a3b153d6e78" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">5.2.3</span>&nbsp;&nbsp;<span class="text">
                                          WYSIWYM Online
                                          </span></span></a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="toc-level-1"><a href="3dfad2c2-2299-461a-9d80-42237bbb5e89.html" class="toc-entry" id="chapter-link_3dfad2c2-2299-461a-9d80-42237bbb5e89" data-level="1"><span class="chapter-link1">6&nbsp;&nbsp;
                           Glossar
                           </span></a></li>
                  <li class="toc-level-1"><a href="dac12b19-ef37-4e41-b88c-6f0ce7becbb8.html" class="toc-entry" id="chapter-link_dac12b19-ef37-4e41-b88c-6f0ce7becbb8" data-level="1"><span class="chapter-link1">7&nbsp;&nbsp;
                           Tektur CCMS
                           </span></a></li>
               </ul>
            </div>
         </div>
      </div>
      <div id="main">
         <div id="content-wrapper">
            <div id="382bb96a-5a06-460c-8d69-4c4cd613297c-target" class="chapter first" data-element-name="chapter">
               <h2 id="" data-element-name="title"><span class="number">4.2.4&nbsp;&nbsp;</span><span class="text"><span class="first-chapter-title">
                        
                        <div class="title" data-tektur-reviewer-number="" id="6dc3be8f-5b8c-407c-9853-0533fdbf8267" data-element-name="title">SQL Views in MarkLogic</div>
                        </span></span></h2>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Es macht nicht immer Sinn über eine Baumstruktur zu suchen. Obwohl das in einer 
                     XML Datenbank rasend schnell geht, weil jeder Knoten des Baums initial in einen Index
                     aufgenommen wird. So gibt es doch Anwendungsfälle bei denen man lieber eine relationale
                     Sicht auf die Daten hätte.
                  </div>
               </div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">In MarkLogic heisst die Lösung dazu SQL Views.</div>
               </div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Bspw. benötigt man eine relationale Sicht auf die Daten,
                     wenn über verschiedene Datensätze ein Report generiert werden soll.
                  </div>
               </div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Nehmen wir an es gibt im Datenbestand die folgenden Dokumente:</div>
               </div>
               <div class="no-margin"><pre class="prettyprint">&lt;k:kunde&gt;
  &lt;k:id&gt;1&lt;/k:id&gt;
  &lt;k:name&gt;Alex&lt;/k:name&gt;
  &lt;k:eMail&gt;tekturcms@gmail.com&lt;/k:eMail&gt;
&lt;/k:kunde&gt;

&lt;k:kunde&gt;
  &lt;k:id&gt;2&lt;/k:id&gt;
  &lt;k:name&gt;Horst&lt;/k:name&gt;
  &lt;k:eMail&gt;horst@horst.de&lt;/k:eMail&gt;
&lt;/k:kunde&gt;

&lt;k:kunde&gt;
  &lt;k:id&gt;3&lt;/k:id&gt;
  &lt;k:name&gt;Gundula&lt;/k:name&gt;
  &lt;k:eMail&gt;gundl@gundula.de&lt;/k:eMail&gt;
&lt;/k:kunde&gt;

&lt;b:bestellung&gt;
  &lt;b:id&gt;1&lt;/b:id&gt;
  &lt;b:datum&gt;02.01.2019&lt;/b:datum&gt;
  &lt;b:preis&gt;99.90&lt;/b:preis&gt;
  &lt;kunde-id&gt;2&lt;/kunde-id&gt;
&lt;/b:bestellung&gt;

&lt;b:bestellung&gt;
  &lt;b:id&gt;2&lt;/b:id&gt;
  &lt;b:datum&gt;03.01.2019&lt;/b:datum&gt;
  &lt;b:preis&gt;68.90&lt;/b:preis&gt;
  &lt;b:kunde-id&gt;1&lt;/b:kunde-id&gt;
&lt;/b:bestellung&gt;</pre></div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Will man sich alle Kunden anzeigen lassen, die eine Bestellung 
                     abgegeben haben - das sind Alex und Horst - so würde man bei
                     einem relationalen Ansatz einen JOIN verwenden, so wie:
                  </div>
               </div>
               <div class="no-margin"><pre class="prettyprint">SELECT name, datum, preis
FROM kunden k
INNER JOIN bestellungen b
ON k.id = b.kunde_id</pre></div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">In einer relationalen Sicht würde uns das dann die folgende Tabelle liefern:</div>
               </div>
               <div class="no-margin"><pre class="prettyprint">name, datum, preis
Alex, 03.01.2019, 68.90
Horst, 02.01.2019, 99.90</pre></div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Um für MarkLogic eine SQL View zu definieren verwendet man einen Mechanismus,
                     der da heisst: Template Driven Extraction<a href="https://docs.marklogic.com/guide/app-dev/TDE*Template Driven Extraction wird verwendet um in MarkLogic eine relationale Sicht auf die baumstrukturierten Daten zu setzen" title="https://docs.marklogic.com/guide/app-dev/TDE*Template Driven Extraction wird verwendet um in MarkLogic eine relationale Sicht auf die baumstrukturierten Daten zu setzen" target="_blank">
                        <sup id="" data-element-name="sup">↗↗</sup>
                        </a>
                     
                  </div>
               </div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Dazu werden Templates in XML deklariert und in die Template Collection eingefügt. Für unser obiges Beispiel
                     würden wir zwei Templates brauchen, die so aussehen:
                  </div>
               </div>
               <div class="no-margin"><pre class="prettyprint">xquery version "1.0-ml";

import module namespace tde = "http://marklogic.com/xdmp/tde" 
                            at "/MarkLogic/tde.xqy";

let $sql-view-name := 'kunden-view.xml'
let $sql-view := &lt;template xmlns="http://marklogic.com/xdmp/tde"&gt;
   &lt;path-namespaces&gt;
      &lt;path-namespace&gt;
         &lt;prefix&gt;k&lt;/prefix&gt;
         &lt;namespace-uri&gt;https://tekturcms.de/schema/kunde/1.0&lt;/namespace-uri&gt;
      &lt;/path-namespace&gt;
   &lt;/path-namespaces&gt;
   &lt;context&gt;/k:kunde&lt;/context&gt;
   &lt;collections&gt;
      &lt;collections-and&gt;
         &lt;collection&gt;/kunden&lt;/collection&gt;
      &lt;/collections-and&gt;
   &lt;/collections&gt;
   &lt;rows&gt;
      &lt;row&gt;
         &lt;schema-name&gt;kunden_schema&lt;/schema-name&gt;
         &lt;view-name&gt;kunden_view&lt;/view-name&gt;
         &lt;columns&gt;
            &lt;column&gt;
               &lt;name&gt;id&lt;/name&gt;
               &lt;scalar-type&gt;string&lt;/scalar-type&gt;
               &lt;val&gt;k:id&lt;/val&gt;
               &lt;nullable&gt;true&lt;/nullable&gt;
            &lt;/column&gt;
            &lt;column&gt;
               &lt;name&gt;datum&lt;/name&gt;
               &lt;scalar-type&gt;string&lt;/scalar-type&gt;
               &lt;val&gt;k:datum&lt;/val&gt;
               &lt;nullable&gt;true&lt;/nullable&gt;
            &lt;/column&gt;
            &lt;column&gt;
               &lt;name&gt;eMail&lt;/name&gt;
               &lt;scalar-type&gt;string&lt;/scalar-type&gt;
               &lt;val&gt;k:eMail&lt;/val&gt;
               &lt;nullable&gt;true&lt;/nullable&gt;
            &lt;/column&gt;
         &lt;/columns&gt;
      &lt;/row&gt;
   &lt;/rows&gt;
&lt;/template&gt;
return(
  tde:template-insert(concat('/templates/', $sql-view-name), 
                      $sql-view, xdmp:default-permissions())
)</pre></div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">und analog für die Bestellungen:</div>
               </div>
               <div class="no-margin"><pre class="prettyprint">[...]
   &lt;rows&gt;
      &lt;row&gt;
         &lt;schema-name&gt;bestellungen_schema&lt;/schema-name&gt;
         &lt;view-name&gt;bestellungen_view&lt;/view-name&gt;
         &lt;columns&gt;
            &lt;column&gt;
               &lt;name&gt;id&lt;/name&gt;
               &lt;scalar-type&gt;string&lt;/scalar-type&gt;
               &lt;val&gt;b:id&lt;/val&gt;
            &lt;/column&gt;
            &lt;column&gt;
               &lt;name&gt;datum&lt;/name&gt;
               &lt;scalar-type&gt;string&lt;/scalar-type&gt;
               &lt;val&gt;b:datum&lt;/val&gt;
            &lt;/column&gt;
            &lt;column&gt;
               &lt;name&gt;preis&lt;/name&gt;
               &lt;scalar-type&gt;string&lt;/scalar-type&gt;
               &lt;val&gt;b:preis&lt;/val&gt;
            &lt;/column&gt;
            &lt;column&gt;
               &lt;name&gt;kunde_id&lt;/name&gt;
               &lt;scalar-type&gt;string&lt;/scalar-type&gt;
               &lt;val&gt;b:kunde-id&lt;/val&gt;
            &lt;/column&gt;
         &lt;/columns&gt;
      &lt;/row&gt;
[...]</pre></div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">In XQuery eingebunden könnte man dann die definierten SQL Views mit dem folgenden Befehl abfragen:</div>
               </div>
               <div class="no-margin"><pre class="prettyprint">xdmp:sql("SELECT name, datum, preis FROM kunden_view k 
          INNER JOIN bestellungen_view b ON k.id = b.kunde_id")</pre></div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Folgende ist das komplette Beispiel für eine MarkLogic XQuery Konsolensitzung abgebildet ...</div>
               </div>
               <div class="no-margin"><pre class="prettyprint">xquery version "1.0-ml";

declare namespace k = 'http://www.tekturcms.de/kunden';
declare namespace b = 'http://www.tekturcms.de/bestellungen';

import module namespace tde = "http://marklogic.com/xdmp/tde" at "/MarkLogic/tde.xqy";

declare function local:loadKunde($id, $name, $eMail)
{
  let $root :=
  &lt;k:kunde&gt;
    &lt;k:id&gt;{ $id }&lt;/k:id&gt;
    &lt;k:name&gt;{ $name }&lt;/k:name&gt;
    &lt;k:eMail&gt;{ $eMail }&lt;/k:eMail&gt;
  &lt;/k:kunde&gt;,
  $options :=
  &lt;options xmlns="xdmp:document-insert"&gt;  
    &lt;permissions&gt;{ xdmp:default-permissions() }&lt;/permissions&gt;
    &lt;collections&gt;
      &lt;collection&gt;/kunden&lt;/collection&gt;
    &lt;/collections&gt;
  &lt;/options&gt;,
  $fname := concat('/kunden/',$id,".xml")
  return xdmp:document-insert($fname,$root,$options)
};

declare function local:loadBestellung($id, $datum, $preis, $kunde-id)
{
  let $root :=
  &lt;b:bestellung&gt;
    &lt;b:id&gt;{ $id }&lt;/b:id&gt;
    &lt;b:datum&gt;{ $datum }&lt;/b:datum&gt;
    &lt;b:preis&gt;{ $preis }&lt;/b:preis&gt;
    &lt;b:kunde-id&gt;{ $kunde-id }&lt;/b:kunde-id&gt;
  &lt;/b:bestellung&gt;,
  $options :=
  &lt;options xmlns="xdmp:document-insert"&gt;  
    &lt;permissions&gt;{ xdmp:default-permissions() }&lt;/permissions&gt;
    &lt;collections&gt;
      &lt;collection&gt;/bestellungen&lt;/collection&gt;
    &lt;/collections&gt;
  &lt;/options&gt;,
  $fname := concat('/bestellungen/',$id,".xml")
  return xdmp:document-insert($fname,$root,$options)
};

declare function local:insertKundenSchema()
{
  let $sql-view-name := 'kunden-view.xml',
      $sql-view := &lt;template xmlns="http://marklogic.com/xdmp/tde"&gt;
    &lt;path-namespaces&gt;
      &lt;path-namespace&gt;
        &lt;prefix&gt;k&lt;/prefix&gt;
        &lt;namespace-uri&gt;http://www.tekturcms.de/kunden&lt;/namespace-uri&gt;
       &lt;/path-namespace&gt;
    &lt;/path-namespaces&gt;
    &lt;context&gt;/k:kunde&lt;/context&gt;
     &lt;collections&gt;
       &lt;collections-and&gt;
         &lt;collection&gt;/kunden&lt;/collection&gt;
      &lt;/collections-and&gt;
     &lt;/collections&gt;
     &lt;rows&gt;
       &lt;row&gt;
         &lt;schema-name&gt;kunden_schema&lt;/schema-name&gt;
         &lt;view-name&gt;kunden_view&lt;/view-name&gt;
         &lt;columns&gt;
            &lt;column&gt;
               &lt;name&gt;id&lt;/name&gt;
               &lt;scalar-type&gt;string&lt;/scalar-type&gt;
               &lt;val&gt;k:id&lt;/val&gt;
            &lt;/column&gt;
            &lt;column&gt;
               &lt;name&gt;name&lt;/name&gt;
               &lt;scalar-type&gt;string&lt;/scalar-type&gt;
               &lt;val&gt;k:name&lt;/val&gt;
            &lt;/column&gt;
          &lt;column&gt;
             &lt;name&gt;eMail&lt;/name&gt;
             &lt;scalar-type&gt;string&lt;/scalar-type&gt;
             &lt;val&gt;k:eMail&lt;/val&gt;
          &lt;/column&gt;
        &lt;/columns&gt;
      &lt;/row&gt;
    &lt;/rows&gt;
  &lt;/template&gt;
  return
    tde:template-insert(concat('/templates/', 
                        $sql-view-name), $sql-view, xdmp:default-permissions())
};

declare function local:insertBestellungenSchema()
{
  let $sql-view-name := 'bestellungen-view.xml',
      $sql-view := &lt;template xmlns="http://marklogic.com/xdmp/tde"&gt;
    &lt;path-namespaces&gt;
      &lt;path-namespace&gt;
        &lt;prefix&gt;b&lt;/prefix&gt;
        &lt;namespace-uri&gt;http://www.tekturcms.de/bestellungen&lt;/namespace-uri&gt;
       &lt;/path-namespace&gt;
    &lt;/path-namespaces&gt;
    &lt;context&gt;/b:bestellung&lt;/context&gt;
     &lt;collections&gt;
       &lt;collections-and&gt;
         &lt;collection&gt;/bestellungen&lt;/collection&gt;
      &lt;/collections-and&gt;
     &lt;/collections&gt;
     &lt;rows&gt;
       &lt;row&gt;
         &lt;schema-name&gt;bestellungen_schema&lt;/schema-name&gt;
         &lt;view-name&gt;bestellungen_view&lt;/view-name&gt;
         &lt;columns&gt;
            &lt;column&gt;
               &lt;name&gt;id&lt;/name&gt;
               &lt;scalar-type&gt;string&lt;/scalar-type&gt;
               &lt;val&gt;b:id&lt;/val&gt;
            &lt;/column&gt;
            &lt;column&gt;
               &lt;name&gt;datum&lt;/name&gt;
               &lt;scalar-type&gt;string&lt;/scalar-type&gt;
               &lt;val&gt;b:datum&lt;/val&gt;
            &lt;/column&gt;
          &lt;column&gt;
             &lt;name&gt;preis&lt;/name&gt;
             &lt;scalar-type&gt;string&lt;/scalar-type&gt;
             &lt;val&gt;b:preis&lt;/val&gt;
          &lt;/column&gt;
          &lt;column&gt;
             &lt;name&gt;kunde_id&lt;/name&gt;
             &lt;scalar-type&gt;string&lt;/scalar-type&gt;
             &lt;val&gt;b:kunde-id&lt;/val&gt;
          &lt;/column&gt;
        &lt;/columns&gt;
      &lt;/row&gt;
    &lt;/rows&gt;
  &lt;/template&gt;
  return
    tde:template-insert(concat('/templates/', 
                        $sql-view-name), $sql-view, xdmp:default-permissions())
};
local:loadKunde("1","Alex","tekturcms@gmail.com"),
local:loadKunde("2","Horst","horst@horst.de"),
local:loadKunde("3","Gundula","gundl@gundula.de"),
local:loadBestellung("1","02.01.2019","99.90","2"),
local:loadBestellung("2","03.01.2019","68.90","1"),
local:insertKundenSchema(),
local:insertBestellungenSchema(),

xdmp:sql("SELECT name, datum, preis FROM kunden_view k INNER JOIN 
          bestellungen_view b ON k.id = b.kunde_id")</pre></div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">... mit einer schönen tabellarischen Ausgabe im unteren Panel der Query Konsole - oder als JSON:</div>
               </div>
               <div class="no-margin"><pre class="prettyprint">[
  [
    "k.name", 
    "b.datum", 
    "b.preis"
  ], 
  [
    "Alex", 
    "03.01.2019", 
    "68.90"
  ], 
  [
    "Horst", 
    "02.01.2019", 
    "99.90"
  ]
]</pre></div>
            </div>
         </div>
      </div>
      <div id="date-version">Version: 116<br>Mar 05 2019
      </div>
   </body>
</html>