<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//DE" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html data-tektur-document-version="0">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>XSLT Hands-On</title>
      <link>
         <link rel="stylesheet" type="text/css" href="/html5/css/site.css">
         <link rel="stylesheet" type="text/css" href="/html5/css/elements.css">
         <link rel="stylesheet" type="text/css" href="/html5/css/prettify.css"><script type="text/javascript" src="/html5/js/jquery.js"></script><script type="text/javascript" src="/html5/js/jquery.cookie.js"></script><script type="text/javascript" src="/html5/js/jquery.treeview.js"></script><script type="text/javascript" src="/html5/js/jquery.mark.min.js"></script><script type="text/javascript" src="/html5/js/prettify.js"></script><script type="text/javascript" src="/dist/site.js"></script>
   </head>
   <body>
      <div id="bar"></div>
      <div id="header">
         <h1>
            <div id="header-text">XSLT Hands-On</div>
         </h1>
      </div>
      <div id="nav">
         <div class="buttons" style="width:100%">
            <ul>
               <li><a href="#" class="info menu"><img id="tocbutton" src="/images/toc_open.png" border="0"><span>hide sidebar</span></a></li>
               <li><a href="../result.pdf" target="_blank" class="info menu"><img id="pdfbutton" style="margin-top:3px" src="/images/pdficon.png" border="0"><span>Show PDF</span></a></li>
            </ul>
         </div>
      </div>
      <div id="sidebar"><a href="/tektur.html" title="Go to Tektur CCMS"><img id="logo-image" src="../logo.png"></a><div id="scrollarea">
            <div id="toc-panel"><a class="cover-link" href="book.html">Cover</a><ul id="navigation" class="treeview-gray">
                  <li class="toc-level-1"><a href="c15a8d5c-03bc-4ee9-a04a-a123e0ce5d88.html" class="toc-entry" id="chapter-link_c15a8d5c-03bc-4ee9-a04a-a123e0ce5d88" data-level="1"><span class="chapter-link1">1&nbsp;&nbsp;
                           Intro
                           </span></a></li>
                  <li class="toc-level-1"><a href="31a92dc0-959c-49a1-b06e-01e2369e050e.html" class="toc-entry" id="chapter-link_31a92dc0-959c-49a1-b06e-01e2369e050e" data-level="1"><span class="chapter-link1">2&nbsp;&nbsp;
                           Theorie 
                           </span></a><ul>
                        <li class="toc-level-2"><a href="5b73f348-0058-45e0-82f7-c3de72ec5d41.html" class="toc-entry" id="chapter-link_5b73f348-0058-45e0-82f7-c3de72ec5d41" data-level="2"><span class="chapter-link2">2.1&nbsp;&nbsp;
                                 Push vs. Pull Stylesheets 
                                 </span></a></li>
                        <li class="toc-level-2"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" class="toc-entry" id="chapter-link_db988919-f71e-437e-b699-b6fdd2a32cb9" data-level="2"><span class="chapter-link2">2.2&nbsp;&nbsp;
                                 Eindeutigkeit der Regelbasis
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_4e789913-7860-4c4e-b618-01dced6b6b2ed6e8" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.1</span>&nbsp;&nbsp;<span class="text">
                                          Reihenfolge der Match-Regeln
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_5f870821-8ca8-44f0-b676-57793dedc2c6d6e15" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.2</span>&nbsp;&nbsp;<span class="text">
                                          Präzedenz der Auswertung
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_ea722739-d975-4b73-b56c-f72818cd84c4d6e76" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.3</span>&nbsp;&nbsp;<span class="text">
                                          Import Präzendenz und Default-Regel
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_c5374863-4a57-4e82-bd14-1ba9cbc97c0fd6e89" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.4</span>&nbsp;&nbsp;<span class="text">
                                          Prioritäten
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_8b11fd3b-f9f9-446d-a9a5-a799dc909169d6e118" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.5</span>&nbsp;&nbsp;<span class="text">
                                          Modus Attribute
                                          </span></span></a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="toc-level-1"><a href="f838f9be-97bf-44a4-ac63-2e813a87f2ea.html" class="toc-entry" id="chapter-link_f838f9be-97bf-44a4-ac63-2e813a87f2ea" data-level="1"><span class="chapter-link1">3&nbsp;&nbsp;
                           Praxis 
                           </span></a><ul>
                        <li class="toc-level-2"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" class="toc-entry" id="chapter-link_3c090c4b-2d46-459c-87ba-60a824bf5aa5" data-level="2"><span class="chapter-link2">3.1&nbsp;&nbsp;
                                 Anwendungsbeispiele
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_4bf2b25f-e483-4835-b734-2668331d5b0bd6e6" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.1.1</span>&nbsp;&nbsp;<span class="text">
                                          XML Webseiten
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_0a5be3cb-7fee-4448-8eaa-33cec9c28221d6e25" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.1.2</span>&nbsp;&nbsp;<span class="text">
                                          Serverseitige Konvertierung
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_d30a54b4-a08c-40b9-b701-91be5bb340cdd6e40" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.1.3</span>&nbsp;&nbsp;<span class="text">
                                          Ausgabeformate
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_7c613c35-961e-46a6-af57-6778858a71bcd6e47" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.1.4</span>&nbsp;&nbsp;<span class="text">
                                          Menschenlesbar machen
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_e2d39407-3980-4050-86fa-aa653f737cd2d6e60" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.1.5</span>&nbsp;&nbsp;<span class="text">
                                          Diagramme
                                          </span></span></a></li>
                           </ul>
                        </li>
                        <li class="toc-level-2"><a href="151a9719-a32a-4fca-a55c-769b47a73b34.html" class="toc-entry" id="chapter-link_151a9719-a32a-4fca-a55c-769b47a73b34" data-level="2"><span class="chapter-link2">3.2&nbsp;&nbsp;
                                 Komplexe Anwendung
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="151a9719-a32a-4fca-a55c-769b47a73b34.html" id="chapter-link_0010aab5-f425-4968-bf0b-f22bc59159b1d6e6" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.2.1</span>&nbsp;&nbsp;<span class="text">
                                          Single Source Publishing
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="151a9719-a32a-4fca-a55c-769b47a73b34.html" id="chapter-link_ddc898c3-a0c6-45e4-8470-f04e3ccb9603d6e38" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.2.2</span>&nbsp;&nbsp;<span class="text">
                                          Code Generierung
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="151a9719-a32a-4fca-a55c-769b47a73b34.html" id="chapter-link_30786084-ece7-4b45-a77b-88512e4fe461d6e55" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.2.3</span>&nbsp;&nbsp;<span class="text">
                                          Migrationen und Konvertierungen
                                          </span></span></a></li>
                           </ul>
                        </li>
                        <li class="toc-level-2"><a href="ceed4546-a60b-4d5f-a625-6e79c180cc13.html" class="toc-entry" id="chapter-link_ceed4546-a60b-4d5f-a625-6e79c180cc13" data-level="2"><span class="chapter-link2">3.3&nbsp;&nbsp;
                                 Vortransformationen 
                                 </span></a></li>
                        <li class="toc-level-2"><a href="6fd7b270-9d1f-4f8e-996f-13b5862956a9.html" class="toc-entry" id="chapter-link_6fd7b270-9d1f-4f8e-996f-13b5862956a9" data-level="2"><span class="chapter-link2">3.4&nbsp;&nbsp;
                                 Validierung mit Schematron
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="6fd7b270-9d1f-4f8e-996f-13b5862956a9.html" id="chapter-link_ac6fc705-65f7-4476-b83d-78df36629ccad6e14" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.4.1</span>&nbsp;&nbsp;<span class="text">
                                          Schematron ist XSLT
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="6fd7b270-9d1f-4f8e-996f-13b5862956a9.html" id="chapter-link_5bb03dd6-9311-4d44-822f-d819372c5e67d6e30" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.4.2</span>&nbsp;&nbsp;<span class="text">
                                          CLI Verwendung
                                          </span></span></a></li>
                           </ul>
                        </li>
                        <li class="toc-level-2"><a href="cc183707-5352-4c9c-9c31-68047a882d0f.html" class="toc-entry" id="chapter-link_cc183707-5352-4c9c-9c31-68047a882d0f" data-level="2"><span class="chapter-link2">3.5&nbsp;&nbsp;
                                 Erste Schritte mit Xspec
                                 </span></a></li>
                        <li class="toc-level-2"><a href="888d37da-0dbe-4fae-bec9-2ad1e99f7818.html" class="toc-entry" id="chapter-link_888d37da-0dbe-4fae-bec9-2ad1e99f7818" data-level="2"><span class="chapter-link2">3.6&nbsp;&nbsp;
                                 Vererbung 
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="888d37da-0dbe-4fae-bec9-2ad1e99f7818.html" id="chapter-link_2840fc03-3cdf-4021-93af-6642965cc464d6e8" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.6.1</span>&nbsp;&nbsp;<span class="text">
                                          Beispiel: Parameterisierung
                                          </span></span></a></li>
                           </ul>
                        </li>
                        <li class="toc-level-2"><a href="0846d6a2-6999-42ab-9e83-55bc197fc11c.html" class="toc-entry" id="chapter-link_0846d6a2-6999-42ab-9e83-55bc197fc11c" data-level="2"><span class="chapter-link2">3.7&nbsp;&nbsp;
                                 Abfragen mit XQuery
                                 </span></a></li>
                        <li class="toc-level-2"><a href="51bec5b9-1207-45cc-9bf2-b6ce3e300547.html" class="toc-entry" id="chapter-link_51bec5b9-1207-45cc-9bf2-b6ce3e300547" data-level="2"><span class="chapter-link2">3.8&nbsp;&nbsp;
                                 XSLT Streaming Beispiel
                                 </span></a></li>
                     </ul>
                  </li>
                  <li class="toc-level-1"><a href="f606e9c6-3d46-48f3-8de4-46e13dc7d055.html" class="toc-entry" id="chapter-link_f606e9c6-3d46-48f3-8de4-46e13dc7d055" data-level="1"><span class="chapter-link1">4&nbsp;&nbsp;
                           Sonstiges 
                           </span></a><ul>
                        <li class="toc-level-2"><a href="7dbb15ce-bbc5-4d91-b977-ed7e8117730e.html" class="toc-entry" id="chapter-link_7dbb15ce-bbc5-4d91-b977-ed7e8117730e" data-level="2"><span class="chapter-link2">4.1&nbsp;&nbsp;
                                 GIT Einmaleins 
                                 </span></a></li>
                        <li class="toc-level-2"><a href="4100d43a-5b71-43ba-a05f-1063fcee8679.html" class="toc-entry" id="chapter-link_4100d43a-5b71-43ba-a05f-1063fcee8679" data-level="2"><span class="chapter-link2">4.2&nbsp;&nbsp;
                                 XML Editoren 
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="4100d43a-5b71-43ba-a05f-1063fcee8679.html" id="chapter-link_498cf31b-9271-4bd5-99c3-267338011c2bd6e52" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.1</span>&nbsp;&nbsp;<span class="text">
                                          WYSIWYM Desktop
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="4100d43a-5b71-43ba-a05f-1063fcee8679.html" id="chapter-link_bedf667b-7726-4999-881b-891f147ff923d6e73" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.2</span>&nbsp;&nbsp;<span class="text">
                                          WYSIWYG Desktop
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="4100d43a-5b71-43ba-a05f-1063fcee8679.html" id="chapter-link_eea96007-349a-4143-b26d-aea0617aa994d6e78" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.3</span>&nbsp;&nbsp;<span class="text">
                                          WYSIWYM Online
                                          </span></span></a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="toc-level-1"><a href="3dfad2c2-2299-461a-9d80-42237bbb5e89.html" class="toc-entry" id="chapter-link_3dfad2c2-2299-461a-9d80-42237bbb5e89" data-level="1"><span class="chapter-link1">5&nbsp;&nbsp;
                           Glossar 
                           </span></a></li>
                  <li class="toc-level-1"><a href="dac12b19-ef37-4e41-b88c-6f0ce7becbb8.html" class="toc-entry" id="chapter-link_dac12b19-ef37-4e41-b88c-6f0ce7becbb8" data-level="1"><span class="chapter-link1">6&nbsp;&nbsp;
                           Tektur CCMS
                           </span></a></li>
               </ul>
            </div>
         </div>
      </div>
      <div id="main">
         <div id="content-wrapper">
            <div id="6fd7b270-9d1f-4f8e-996f-13b5862956a9-target" class="chapter first" data-element-name="chapter">
               <h2 id="" data-element-name="title"><span class="number">3.4&nbsp;&nbsp;</span><span class="text"><span class="first-chapter-title">
                        
                        <div class="title" data-tektur-reviewer-number="" id="a693fc99-5e16-4788-95a0-958870aa845a" data-element-name="title">Validierung mit Schematron</div>
                        </span></span></h2>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Um die Korrektheit einer XML Instanz zu prüfen, gib es verschiedene Schemata, wie XSD, RNG oder DTD, welche der Parser beim
                     Aufbau des DOM Baums heranzieht. Eine Validierung mit Apache Xerces könnte beispielsweise als Java Code folgendermaßen angestossen
                     werden:
                  </div>
               </div>
               <div class="margin"><pre class="prettyprint">URL schemaFile = new URL("http://host:port/filename.xsd");
Source xmlFile = new StreamSource(new File("web.xml"));
SchemaFactory schemaFactory = SchemaFactory
    .newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
try {
  Schema schema = schemaFactory.newSchema(schemaFile);
  Validator validator = schema.newValidator();
  validator.validate(xmlFile);
  System.out.println(xmlFile.getSystemId() + " is valid");
} catch (SAXException e) {
  System.out.println(xmlFile.getSystemId() + " is NOT valid reason:" + e);
} catch (IOException e) {</pre></div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Schema Dateien können aber auch in XML Editoren eingebunden werden, um schon während der Eingabe der XML Instanz die Korrektheit
                     zu überprüfen. 
                  </div>
               </div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Das geht einerseits über die Angabe des Doctypes in der XML Instanz, anderseits bieten auch alle Editoren die Möglichkeit
                     ein bestimmtes Schema explizit auszuwählen, um gegen dieses auf Anforderung zu validieren.
                  </div>
               </div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Gilt es komplexere Businessregeln zu überprüfen, die über Syntax-, Konsistenz- und einfache Korrektheitschecks hinausgehen,
                     empfiehlt sich eine Validierung mit Schematron Regeln.
                  </div>
               </div>
               <div id="ac6fc705-65f7-4476-b83d-78df36629ccad6e14-target" class="chapter" data-element-name="chapter">
                  <h2 id="" data-element-name="title"><span class="number">3.4.1&nbsp;&nbsp;</span><span class="text"><span class="first-chapter-title">
                           
                           <div class="title" data-tektur-reviewer-number="" id="c802dd14-5953-4c24-8637-f7552d107e57d6e13" data-element-name="title">Schematron ist XSLT</div>
                           </span></span></h2>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Bei einer Schematron Validierung wird eine XML Instanz mit Hilfe eines automatisch generierten XSLT Stylesheets überprüft.
                        Dieses kontextabhängige Stylesheet wird aus einer in der Schematron Syntax vom Autor verfassten Regelbasis, die wiederum in
                        XML vorliegt, über ein zweites XSLT Stylesheet generiert - Dieses zweite XSLT Stylesheet ist sozusagen das eigentliche Schematron
                        Programm. 
                     </div>
                  </div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Das folgende Diagramm veranschaulicht die Vorgehensweise anhand eines Filter-Szenarios, bei dem ein XML Dokument mit einigen
                        ungültigen Passagen in eine gefilterte Darstellung überführt wird.
                     </div>
                  </div>
                  <div class="no-margin"><img src="../..//6fd7b270-9d1f-4f8e-996f-13b5862956a9/schematron.svg" id="" data-element-name="img"><h5 id="" class="figure-title" data-element-name="subtitle"><br>Fig.&nbsp;4&nbsp;&nbsp;Schematron Validierung mit Filter
                     </h5>
                  </div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Zu finden ist das Schematron Programm auf Github: https://github.com/Schematron/schematron. Dieses Repo ist etwas unübersichtlich.
                        Der relevante Teil des Sourcecodes befindet sich unter: <b id="" data-element-name="b" data-is-inline-element="yes">schematron/code</b>
                        
                     </div>
                  </div>
               </div>
               <div id="5bb03dd6-9311-4d44-822f-d819372c5e67d6e30-target" class="chapter" data-element-name="chapter">
                  <h2 id="" data-element-name="title"><span class="number">3.4.2&nbsp;&nbsp;</span><span class="text"><span class="first-chapter-title">
                           
                           <div class="title" data-tektur-reviewer-number="" id="0cc5ca05-4506-44eb-981b-f74a156e6da0d6e20" data-element-name="title">CLI Verwendung</div>
                           </span></span></h2>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Um die Schematron XSLT Skripte in eine eigene XSLT Anwendung per Kommandozeile einzubinden, könnte man folgendermassen vorgehen:
                        
                     </div>
                  </div>
                  <div class="margin">
                     <ul id="" data-element-name="ul">
                        
                        <li id="" data-element-name="li">
                           
                           <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Im eigenen GIT Projekt das Schematron Projekt als Submodule referenzieren.</div>
                           
                        </li>
                        
                        <li id="" data-element-name="li">
                           
                           <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Eine Regelbasis anlegen, beispielsweise <b id="" data-element-name="b" data-is-inline-element="yes">$project_name.sch</b>.
                           </div>
                           
                        </li>
                        
                        <li id="" data-element-name="li">
                           
                           <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Zwei Batch-Skripte anlegen, beispielsweise <b id="" data-element-name="b" data-is-inline-element="yes">generate_schema.sh</b> und <b id="" data-element-name="b" data-is-inline-element="yes">validate.sh</b>.
                           </div>
                           
                        </li>
                        
                     </ul>
                  </div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Mittels des Skripts <b id="" data-element-name="b" data-is-inline-element="yes">generate_schema.sh</b> wird aus der Schematron Regelbasis das Schematron XSLT Stylesheet generiert. Der Inhalt dieser Batchdatei könnte zum Beispiel
                        so aussehen:
                     </div>
                  </div>
                  <div class="margin"><pre class="prettyprint">saxon $script_dir/$project_name_validation.sch $script_dir/schematron/iso_dsdl_include.xsl
 | \ saxon -s:- $script_dir/schematron/iso_abstract_expand.xsl | \
saxon -s:- $script_dir/schematron/iso_svrl_for_xslt2.xsl \
  <b id="" data-element-name="b" data-is-inline-element="yes">generate-fired-rule</b>=false &gt; $script_dir/$project_name_validation.xsl</pre></div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Der Prozess zum Erzeugen des projektspezifischen Validerungs-XSLT-Skripts ist dreistufig und wird über die folgenden XSLT
                        Schritte abgearbeitet.
                     </div>
                  </div>
                  <div class="margin">
                     <ul id="" data-element-name="ul">
                        
                        <li id="" data-element-name="li">
                           
                           <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">iso_dsdl_include.xsl</div>
                           
                        </li>
                        
                        <li id="" data-element-name="li">
                           
                           <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">iso_abstract_expand.xsl</div>
                           
                        </li>
                        
                        <li id="" data-element-name="li">
                           
                           <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">iso_svrl_for_xslt2.xsl</div>
                           
                        </li>
                        
                     </ul>
                  </div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Herauszufinden, was in diesen Skripten passiert, sei dem geneigten Leser selbst überlassen. Uns interessiert an dieser Stelle
                        nur das Resultat, nämlich das XSLT Stylesheet <b id="" data-element-name="b" data-is-inline-element="yes">$project_name_validation.xsl.</b>
                        
                     </div>
                  </div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Dieses Skript wird in der Batchdatei <b id="" data-element-name="b" data-is-inline-element="yes">validate.sh</b> aufgerufen:
                     </div>
                  </div>
                  <div class="margin"><pre class="prettyprint">saxon $xml_instance_to_check.xml $script_dir/$project_name_validation.xsl \
  &gt; $validation-result.xml</pre></div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Die Ausgabe dieses Prüfprozesses ist eine XML Datei mit den Fehlern in der Eingabe-XML-Instanz, die weiterverarbeitet werden
                        kann, beispielsweise als Filterkriterium für einen nachfolgenden Prozessschritt. Ihr Inhalt dieser Datei sieht z.B. wie folgt
                        aus:
                     </div>
                  </div>
                  <div class="margin"><pre class="prettyprint">&lt;svrl:schematron-output xmlns:svrl="http://purl.oclc.org/dsdl/svrl" [...]
  &lt;svrl:active-pattern document="file:/Users/alex/xml_instance_to_check.xml" 
   id="default" name="default"/&gt;
  &lt;svrl:failed-assert test="count(key('unique-ids', current()))=1"&gt;
    &lt;svrl:text&gt;ID is not unique!&lt;/svrl:text&gt;
    &lt;svrl:diagnostic-reference diagnostic="default"&gt;
      &lt;bk:id xmlns:bk="http://tekturcms/namespaces/book"&gt;1234-5678-9&lt;/my:id&gt;
    &lt;/svrl:diagnostic-reference&gt;
  &lt;/svrl:failed-assert&gt;
  [...]</pre></div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Neben den <b id="" data-element-name="b" data-is-inline-element="yes">svrl:failed-assert</b> Elementen, die angeben, was bei der überprüften XML-Instanz fehlgeschlagen ist, gibt es auch die Möglichkeit sich positive
                        Ergebnisse anzeigen zu lassen - über das Element <b id="" data-element-name="b" data-is-inline-element="yes">svrl:successful-report</b>.
                     </div>
                  </div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Konkret bedeutet das obige XML Schnipsel, dass unsere <b id="" data-element-name="b" data-is-inline-element="yes">id</b> mit dem Wert <b id="" data-element-name="b" data-is-inline-element="yes">1234-5688-9</b> im geprüften XML Dokument nicht eindeutig ist. Die Schematron Regelbasis, die wir zur Überprüfung angegebenen haben, sieht
                        so aus:
                     </div>
                  </div>
                  <div class="margin"><pre class="prettyprint">&lt;schema xmlns:sch="http://purl.oclc.org/dsdl/schematron" [...]
  &lt;xsl:key name="unique-ids" match="bk:id" use="."/&gt;
  &lt;sch:let name="date-regex" value="'^((19|2[0-9])[0-9]{2})-(0[1-9]|1[012])
                                     -(0[1-9]|[12][0-9]|3[01])$'"/&gt;
  &lt;sch:pattern id="default"&gt;
    &lt;sch:rule context="book"&gt;
      &lt;sch:assert id="check-book-id" role="error" test="count(key('unique-ids', bk:id))=1" 
                  diagnostics="default"&gt;ID is not unique!&lt;/sch:assert&gt;
      &lt;sch:assert id="check-book-published" role="error" 
                  test="matches(bk:published,$date-regex)
    &lt;/sch:rule&gt;
    [...]
  &lt;/sch:pattern&gt;
  &lt;sch:diagnostics&gt;
    &lt;sch:diagnostic id="default"&gt;
      &lt;xsl:element name="bk:id"&gt;
        &lt;xsl:value-of select="bk:id"/&gt;
      &lt;/xsl:element&gt;
    &lt;/sch:diagnostic&gt;
  &lt;/sch:diagnostics&gt;</pre></div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Neben der "successful" und "failed" Regeln ist auch die Deklaration von Funktionen und Variablen im Body der Regelbasis erlaubt.
                        Dies ermöglicht komplexe Bedingungen, bespw. durch das Nachschlagen in einer Lookup-Tabelle abzuprüfen. 
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="date-version">Version: 21<br>Jan 15 2019
      </div>
   </body>
</html>