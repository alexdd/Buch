<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//DE" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html data-tektur-document-version="0">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>XSLT Hands-On</title>
      <link>
         <link rel="stylesheet" type="text/css" href="/html5/css/site.css">
         <link rel="stylesheet" type="text/css" href="/html5/css/elements.css">
         <link rel="stylesheet" type="text/css" href="/html5/css/prettify.css"><script type="text/javascript" src="/html5/js/jquery.js"></script><script type="text/javascript" src="/html5/js/jquery.cookie.js"></script><script type="text/javascript" src="/html5/js/jquery.treeview.js"></script><script type="text/javascript" src="/html5/js/jquery.mark.min.js"></script><script type="text/javascript" src="/html5/js/prettify.js"></script><script type="text/javascript" src="/dist/site.js"></script>
   </head>
   <body>
      <div id="bar"></div>
      <div id="header">
         <h1>
            <div id="header-text">XSLT Hands-On</div>
         </h1>
      </div>
      <div id="nav">
         <div class="buttons" style="width:100%">
            <ul>
               <li><a href="#" class="info menu"><img id="tocbutton" src="/images/toc_open.png" border="0"><span>hide sidebar</span></a></li>
               <li><a href="../result.pdf" target="_blank" class="info menu"><img id="pdfbutton" style="margin-top:3px" src="/images/pdficon.png" border="0"><span>Show PDF</span></a></li>
            </ul>
         </div>
      </div>
      <div id="sidebar"><a href="/tektur.html" title="Go to Tektur CCMS"><img id="logo-image" src="../logo.png"></a><div id="scrollarea">
            <div id="toc-panel"><a class="cover-link" href="book.html">Cover</a><ul id="navigation" class="treeview-gray">
                  <li class="toc-level-1"><a href="c15a8d5c-03bc-4ee9-a04a-a123e0ce5d88.html" class="toc-entry" id="chapter-link_c15a8d5c-03bc-4ee9-a04a-a123e0ce5d88" data-level="1"><span class="chapter-link1">1&nbsp;&nbsp;
                           Intro
                           </span></a></li>
                  <li class="toc-level-1"><a href="792c9845-7c63-4a18-8aee-1878763200b5.html" class="toc-entry" id="chapter-link_792c9845-7c63-4a18-8aee-1878763200b5" data-level="1"><span class="chapter-link1">2&nbsp;&nbsp;
                           Anwendungsgebiete
                           </span></a><ul>
                        <li class="toc-level-2"><a href="a264856d-c5d5-4d7b-993f-421bf222db76.html" class="toc-entry" id="chapter-link_a264856d-c5d5-4d7b-993f-421bf222db76" data-level="2"><span class="chapter-link2">2.1&nbsp;&nbsp;
                                 Führende Technologie XSLT
                                 </span></a></li>
                        <li class="toc-level-2"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" class="toc-entry" id="chapter-link_3c090c4b-2d46-459c-87ba-60a824bf5aa5" data-level="2"><span class="chapter-link2">2.2&nbsp;&nbsp;
                                 Einige aktuelle und vergangene Szenarien
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_90390e52-f584-4598-a9fa-3588b6e7d566d6e6" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.1</span>&nbsp;&nbsp;<span class="text">
                                          XML Webseiten
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_dc878b8a-371f-4ae5-a53c-40e2bfc7f980d6e25" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.2</span>&nbsp;&nbsp;<span class="text">
                                          Serverseitige Konvertierung
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_e599f418-9160-473f-975b-42bf81bdcca2d6e40" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.3</span>&nbsp;&nbsp;<span class="text">
                                          Ausgabeformate
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_a621b1ef-5e6a-40fd-aab7-35028eb28013d6e47" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.4</span>&nbsp;&nbsp;<span class="text">
                                          Menschenlesbar machen
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="3c090c4b-2d46-459c-87ba-60a824bf5aa5.html" id="chapter-link_7f07b358-45e4-4ee2-af6d-262591f9b945d6e60" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.2.5</span>&nbsp;&nbsp;<span class="text">
                                          Diagramme
                                          </span></span></a></li>
                           </ul>
                        </li>
                        <li class="toc-level-2"><a href="151a9719-a32a-4fca-a55c-769b47a73b34.html" class="toc-entry" id="chapter-link_151a9719-a32a-4fca-a55c-769b47a73b34" data-level="2"><span class="chapter-link2">2.3&nbsp;&nbsp;
                                 Professionelle XML Verarbeitung
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="151a9719-a32a-4fca-a55c-769b47a73b34.html" id="chapter-link_38e405fd-5315-4c0a-9876-632179869e7dd6e6" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.3.1</span>&nbsp;&nbsp;<span class="text">
                                          Single Source Publishing
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="151a9719-a32a-4fca-a55c-769b47a73b34.html" id="chapter-link_b9424d73-54e3-4f5b-b353-5494435f08b3d6e38" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.3.2</span>&nbsp;&nbsp;<span class="text">
                                          Code Generierung
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="151a9719-a32a-4fca-a55c-769b47a73b34.html" id="chapter-link_5202988f-8547-4e61-a585-654d8a111018d6e55" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">2.3.3</span>&nbsp;&nbsp;<span class="text">
                                          Migrationen und Konvertierungen
                                          </span></span></a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="toc-level-1"><a href="31a92dc0-959c-49a1-b06e-01e2369e050e.html" class="toc-entry" id="chapter-link_31a92dc0-959c-49a1-b06e-01e2369e050e" data-level="1"><span class="chapter-link1">3&nbsp;&nbsp;
                           Wichtige Konzepte
                           </span></a><ul>
                        <li class="toc-level-2"><a href="5b73f348-0058-45e0-82f7-c3de72ec5d41.html" class="toc-entry" id="chapter-link_5b73f348-0058-45e0-82f7-c3de72ec5d41" data-level="2"><span class="chapter-link2">3.1&nbsp;&nbsp;
                                 Push vs. Pull Stylesheets 
                                 </span></a></li>
                        <li class="toc-level-2"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" class="toc-entry" id="chapter-link_db988919-f71e-437e-b699-b6fdd2a32cb9" data-level="2"><span class="chapter-link2">3.2&nbsp;&nbsp;
                                 Eindeutigkeit der Regelbasis
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_130ae830-a663-4719-8cf1-57ecddbd49f5d6e8" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.2.1</span>&nbsp;&nbsp;<span class="text">
                                          Reihenfolge der Match-Regeln
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_4ac489ad-a78b-4aa7-8245-bec2013ce7d5d6e15" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.2.2</span>&nbsp;&nbsp;<span class="text">
                                          Präzedenz der Auswertung
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_7b982db3-d105-4be2-b306-349397ebccecd6e76" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.2.3</span>&nbsp;&nbsp;<span class="text">
                                          Import Präzendenz und Default-Regel
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_b4f1ab16-ab78-435d-a9f4-8ac566145bedd6e89" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.2.4</span>&nbsp;&nbsp;<span class="text">
                                          Prioritäten
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="db988919-f71e-437e-b699-b6fdd2a32cb9.html" id="chapter-link_d81fef69-304b-4f38-962c-ceeef34defced6e118" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">3.2.5</span>&nbsp;&nbsp;<span class="text">
                                          Modus Attribute
                                          </span></span></a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="toc-level-1"><a href="f838f9be-97bf-44a4-ac63-2e813a87f2ea.html" class="toc-entry" id="chapter-link_f838f9be-97bf-44a4-ac63-2e813a87f2ea" data-level="1"><span class="chapter-link1">4&nbsp;&nbsp;
                           Ausgewählte Themen
                           </span></a><ul>
                        <li class="toc-level-2"><a href="ceed4546-a60b-4d5f-a625-6e79c180cc13.html" class="toc-entry" id="chapter-link_ceed4546-a60b-4d5f-a625-6e79c180cc13" data-level="2"><span class="chapter-link2">4.1&nbsp;&nbsp;
                                 Vortransformationen 
                                 </span></a></li>
                        <li class="toc-level-2"><a href="6fd7b270-9d1f-4f8e-996f-13b5862956a9.html" class="toc-entry" id="chapter-link_6fd7b270-9d1f-4f8e-996f-13b5862956a9" data-level="2"><span class="chapter-link2">4.2&nbsp;&nbsp;
                                 Validierung mit Schematron
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="6fd7b270-9d1f-4f8e-996f-13b5862956a9.html" id="chapter-link_21e887d9-7aeb-43cc-a506-ed4ebb9b66d8d6e14" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.1</span>&nbsp;&nbsp;<span class="text">
                                          Schematron ist XSLT
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="6fd7b270-9d1f-4f8e-996f-13b5862956a9.html" id="chapter-link_f3496d06-b1ea-4959-8e31-db0afc948b52d6e30" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.2.2</span>&nbsp;&nbsp;<span class="text">
                                          CLI Verwendung
                                          </span></span></a></li>
                           </ul>
                        </li>
                        <li class="toc-level-2"><a href="cc183707-5352-4c9c-9c31-68047a882d0f.html" class="toc-entry" id="chapter-link_cc183707-5352-4c9c-9c31-68047a882d0f" data-level="2"><span class="chapter-link2">4.3&nbsp;&nbsp;
                                 Erste Schritte mit Xspec
                                 </span></a></li>
                        <li class="toc-level-2"><a href="888d37da-0dbe-4fae-bec9-2ad1e99f7818.html" class="toc-entry" id="chapter-link_888d37da-0dbe-4fae-bec9-2ad1e99f7818" data-level="2"><span class="chapter-link2">4.4&nbsp;&nbsp;
                                 Vererbung 
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="888d37da-0dbe-4fae-bec9-2ad1e99f7818.html" id="chapter-link_8fab78d2-ad49-4d07-91a1-a757172fbe25d6e8" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.4.1</span>&nbsp;&nbsp;<span class="text">
                                          Beispiel: Parameterisierung
                                          </span></span></a></li>
                           </ul>
                        </li>
                        <li class="toc-level-2"><a href="0846d6a2-6999-42ab-9e83-55bc197fc11c.html" class="toc-entry" id="chapter-link_0846d6a2-6999-42ab-9e83-55bc197fc11c" data-level="2"><span class="chapter-link2">4.5&nbsp;&nbsp;
                                 Abfragen mit XQuery
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="0846d6a2-6999-42ab-9e83-55bc197fc11c.html" id="chapter-link_dbd25cc4-675f-4327-bec1-f80457cd9986d6e19" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.5.1</span>&nbsp;&nbsp;<span class="text">
                                          XQuery Builder
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="0846d6a2-6999-42ab-9e83-55bc197fc11c.html" id="chapter-link_7955ea5d-939e-47ca-8b87-de752d45673dd6e32" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.5.2</span>&nbsp;&nbsp;<span class="text">
                                          FLOWR Expression
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="0846d6a2-6999-42ab-9e83-55bc197fc11c.html" id="chapter-link_d4cc18f7-ad32-40d9-b0ed-abc2fe654b98d6e44" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.5.3</span>&nbsp;&nbsp;<span class="text">
                                          XML per XQuery
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="0846d6a2-6999-42ab-9e83-55bc197fc11c.html" id="chapter-link_05c40eea-5e6f-4a74-9e6b-fb569fc33d29d6e55" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.5.4</span>&nbsp;&nbsp;<span class="text">
                                          Document Projection
                                          </span></span></a></li>
                           </ul>
                        </li>
                        <li class="toc-level-2"><a href="51bec5b9-1207-45cc-9bf2-b6ce3e300547.html" class="toc-entry" id="chapter-link_51bec5b9-1207-45cc-9bf2-b6ce3e300547" data-level="2"><span class="chapter-link2">4.6&nbsp;&nbsp;
                                 XSLT Streaming
                                 </span></a></li>
                        <li class="toc-level-2"><a href="3e443c28-8698-470b-b443-f286ff7ed2d5.html" class="toc-entry" id="chapter-link_3e443c28-8698-470b-b443-f286ff7ed2d5" data-level="2"><span class="chapter-link2">4.7&nbsp;&nbsp;
                                 Namespaces
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="3e443c28-8698-470b-b443-f286ff7ed2d5.html" id="chapter-link_0087e948-91f4-4a6f-a7a5-27cc1593d170d6e73" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">4.7.1</span>&nbsp;&nbsp;<span class="text">
                                          Namespaces in XQuery
                                          </span></span></a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="toc-level-1"><a href="f606e9c6-3d46-48f3-8de4-46e13dc7d055.html" class="toc-entry" id="chapter-link_f606e9c6-3d46-48f3-8de4-46e13dc7d055" data-level="1"><span class="chapter-link1">5&nbsp;&nbsp;
                           Zusätzliches Know-How
                           </span></a><ul>
                        <li class="toc-level-2"><a href="7dbb15ce-bbc5-4d91-b977-ed7e8117730e.html" class="toc-entry" id="chapter-link_7dbb15ce-bbc5-4d91-b977-ed7e8117730e" data-level="2"><span class="chapter-link2">5.1&nbsp;&nbsp;
                                 GIT Einmaleins 
                                 </span></a></li>
                        <li class="toc-level-2"><a href="4100d43a-5b71-43ba-a05f-1063fcee8679.html" class="toc-entry" id="chapter-link_4100d43a-5b71-43ba-a05f-1063fcee8679" data-level="2"><span class="chapter-link2">5.2&nbsp;&nbsp;
                                 XML Editoren 
                                 </span></a><ul>
                              <li class="toc-level-3"><a href="4100d43a-5b71-43ba-a05f-1063fcee8679.html" id="chapter-link_146278ce-5d82-46ad-ab61-19641f9ee295d6e52" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">5.2.1</span>&nbsp;&nbsp;<span class="text">
                                          WYSIWYM Desktop
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="4100d43a-5b71-43ba-a05f-1063fcee8679.html" id="chapter-link_9d364446-9b6b-4349-a9c2-729bf53407a7d6e73" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">5.2.2</span>&nbsp;&nbsp;<span class="text">
                                          WYSIWYG Desktop
                                          </span></span></a></li>
                              <li class="toc-level-3"><a href="4100d43a-5b71-43ba-a05f-1063fcee8679.html" id="chapter-link_afacfd28-5b1c-4b2e-a050-5c6fd6d37d28d6e78" data-level="3" data-is-section="true" class="toc-entry"><span class="chapter-link3"><span class="number">└</span>&nbsp;&nbsp;<span class="number">5.2.3</span>&nbsp;&nbsp;<span class="text">
                                          WYSIWYM Online
                                          </span></span></a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="toc-level-1"><a href="3dfad2c2-2299-461a-9d80-42237bbb5e89.html" class="toc-entry" id="chapter-link_3dfad2c2-2299-461a-9d80-42237bbb5e89" data-level="1"><span class="chapter-link1">6&nbsp;&nbsp;
                           Glossar 
                           </span></a></li>
                  <li class="toc-level-1"><a href="dac12b19-ef37-4e41-b88c-6f0ce7becbb8.html" class="toc-entry" id="chapter-link_dac12b19-ef37-4e41-b88c-6f0ce7becbb8" data-level="1"><span class="chapter-link1">7&nbsp;&nbsp;
                           Tektur CCMS
                           </span></a></li>
               </ul>
            </div>
         </div>
      </div>
      <div id="main">
         <div id="content-wrapper">
            <div id="0846d6a2-6999-42ab-9e83-55bc197fc11c-target" class="chapter first" data-element-name="chapter">
               <h2 id="" data-element-name="title"><span class="number">4.5&nbsp;&nbsp;</span><span class="text"><span class="first-chapter-title">
                        
                        <div class="title" data-tektur-reviewer-number="" id="0e661463-0259-4d9f-a784-93f4f169bc52" data-element-name="title">Abfragen mit XQuery</div>
                        </span></span></h2>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Xquery führt im Publishing-Bereich ein Schattendasein. In meiner Zeit als XSL Programmierer für zwei Publishing  Firmen hatte
                     ich damit nie zu tun. Erst als ich näher an den eigentlichen Daten war und mit XML Datenbanken zu tun hatte, kam ich mit XQuery
                     in Berührung.
                  </div>
               </div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Während relationale Datenbanken mit SQL abgefragt werden, verwendet man bei XML Datenbanken, wie eXist<a href="http://exist-db.org/exist/apps/homepage/index.html" title="http://exist-db.org/exist/apps/homepage/index.html" target="_blank">
                        <sup id="" data-element-name="sup">↗↗</sup>
                        </a> oder Marklogic<a href="https://de.marklogic.com/" title="https://de.marklogic.com/" target="_blank">
                        <sup id="" data-element-name="sup">↗↗</sup>
                        </a>, XQuery als Abfragesprache.
                  </div>
               </div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Aber auch einzelne XML Dokumente können z.B. in Oxygen XML Editor mit dem XQuery Builder Tool<a href="https://www.oxygenxml.com/xml_editor/xquery_builder.html" title="https://www.oxygenxml.com/xml_editor/xquery_builder.html" target="_blank">
                        <sup id="" data-element-name="sup">↗↗</sup>
                        </a> oder auch per Saxon Kommandozeile abgefragt werden:
                  </div>
               </div>
               <div class="margin"><pre class="prettyprint">java -cp usr/lib/saxon/saxon.jar net.sf.saxon.Query 
     -s:"schulen.xml" 
     -qs:"/schulen/schule[id='6']" 
     -o:"/Users/Alex/Desktop/schule_6.xml"</pre></div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Mit der Option <b id="" data-element-name="b" data-is-inline-element="yes">-qs </b>kann hier der Querystring angebenen werden. 
                  </div>
               </div>
               <div class="margin">
                  <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Wie man an dem einfachen Beispiel schon sieht, ist XQuery mit XPATH verwandt. XQuery umfasst den Sprachumfang von XPATH bietet
                     aber zusätzlich die FLOWR Syntax um mächtigere Abfragen stellen zu können. Mittels weiterer Extensions<a href="http://cs.au.dk/~amoeller/XML/querying/flwrexp.html" title="http://cs.au.dk/~amoeller/XML/querying/flwrexp.html" target="_blank">
                        <sup id="" data-element-name="sup">↗↗</sup>
                        </a> können aber auch ganze Programme erstellt werden, die weit über die Funktionalität einer "Abfragesprache" hinausgehen.
                  </div>
               </div>
               <div id="dbd25cc4-675f-4327-bec1-f80457cd9986d6e19-target" class="chapter" data-element-name="chapter">
                  <h2 id="" data-element-name="title"><span class="number">4.5.1&nbsp;&nbsp;</span><span class="text"><span class="first-chapter-title">
                           
                           <div class="title" data-tektur-reviewer-number="" id="c7e8acb5-6c21-4de1-a88d-8bbd376bbbb4d6e20" data-element-name="title">XQuery Builder</div>
                           </span></span></h2>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Oxygen XML Editor bietet eine schöne Möglichkeit XQuery-Abfragen 
                        auf einem geladenen XML Dokument auszuführen. Dazu kann man 
                        seine Query in das betreffende Eingabefenster schreiben.
                     </div>
                  </div>
                  <div class="no-margin"><img src="../..//0846d6a2-6999-42ab-9e83-55bc197fc11c/xquery-builder.png" id="" data-element-name="img"><h5 id="" class="figure-title" data-element-name="subtitle"><br>Fig.&nbsp;5&nbsp;&nbsp;oXygen XQuery Builder
                     </h5>
                  </div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Mit folgendem Ergebnis:</div>
                  </div>
                  <div class="margin"><pre class="prettyprint">&lt;dates&gt;
  &lt;today&gt;2019-01-16+01:00&lt;/today&gt;
  &lt;formatted&gt;Wednesday, 16th January 2019&lt;/formatted&gt;
&lt;/dates&gt;</pre></div>
               </div>
               <div id="7955ea5d-939e-47ca-8b87-de752d45673dd6e32-target" class="chapter" data-element-name="chapter">
                  <h2 id="" data-element-name="title"><span class="number">4.5.2&nbsp;&nbsp;</span><span class="text"><span class="first-chapter-title">
                           
                           <div class="title" data-tektur-reviewer-number="" id="59f98501-17c8-47d7-a314-8f89c6b7299ed6e33" data-element-name="title">FLOWR Expression</div>
                           </span></span></h2>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">FLOWR steht für for, let, where, order by, return. Das sind die Query-Anweisungen, die in 
                        dem Ausdruck erlaubt sind - in genau dieser Reihenfolge.
                     </div>
                  </div>
                  <div class="margin"><pre class="prettyprint">let $bibliothek := .
for $x in $bibliothek//buecher,
    $y in $bibliothek//autoren/autor
where starts-with($autor, 'Grass')
    and $x/@autorId = $y/@id
return $x/titel</pre></div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">In dieser Query werden die Titel aller Bücher von Grass zurückgeliefert.
                        Bemerkenswert ist hier die Syntax.
                     </div>
                  </div>
                  <div class="no-margin">
                     <div class="note" id="" data-element-name="note">
                        <div class="signal-word">NOTE</div>
                        <div class="content">
                           
                           <div class="consequence" data-tektur-reviewer-number="" id="" data-element-name="consequence">
                              
                              <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Normalerweise würde man zwischen den
                                 einzelnen Anweisungen einen Blockabschluss, wie ein Semikolon erwarten.
                                 Da wir aber hier funtional prorgammieren, ist die Sache etwas anders...
                              </div>
                              
                           </div>
                           
                        </div>
                     </div>
                  </div>
               </div>
               <div id="d4cc18f7-ad32-40d9-b0ed-abc2fe654b98d6e44-target" class="chapter" data-element-name="chapter">
                  <h2 id="" data-element-name="title"><span class="number">4.5.3&nbsp;&nbsp;</span><span class="text"><span class="first-chapter-title">
                           
                           <div class="title" data-tektur-reviewer-number="" id="7dbf0fb3-8421-43c4-b792-0eba61c4bf27d6e44" data-element-name="title">XML per XQuery</div>
                           </span></span></h2>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Es ist aber auch möglich XML zu erzeugen, wobei natürlich für eine Transformation XSLT 
                        vorzuziehen ist. Dazu werden Tags direkt in die Expression geschrieben, wie z.B. hier:
                     </div>
                  </div>
                  <div class="margin"><pre class="prettyprint">declare variable $nachname as xs:string external;
&lt;buecher autor="{$nachname}"&gt;
{
  let $bibliothek := .
  for $x in $bibliothek/buecher//buch,
      $y in $bibliothek/autoren//autor
  where starts-with($y, $nachname)
      and $x/@autorId = $y/@id
  order by $x/ausgabe
  return
  &lt;buch ausgabe="{$x/ausgabe}"&gt;
    {$x/titel}
  &lt;/buch&gt;
}
&lt;/buecher&gt;</pre></div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Speichert man dieses Schnippsel in einer Datei buecher.xquery ab,
                        so kann man mit der folgenden Kommandozeile auf einer buecher.xml
                        Datei als Eingabe suchen:
                     </div>
                  </div>
                  <div class="margin"><pre class="prettyprint">java -cp usr/lib/saxon/saxon.jar net.sf.saxon.Query -t -s:buecher.xml 
                                                       -q:buecher.xquery 
                                                       -o:ergebnis.xml 
                                                       nachname=grass</pre></div>
               </div>
               <div id="05c40eea-5e6f-4a74-9e6b-fb569fc33d29d6e55-target" class="chapter" data-element-name="chapter">
                  <h2 id="" data-element-name="title"><span class="number">4.5.4&nbsp;&nbsp;</span><span class="text"><span class="first-chapter-title">
                           
                           <div class="title" data-tektur-reviewer-number="" id="72199b87-ef45-4bac-93aa-a03892a63e12d6e54" data-element-name="title">Document Projection</div>
                           </span></span></h2>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Document Projection<a href="http://www.saxonica.com/documentation/#!sourcedocs/projection" title="http://www.saxonica.com/documentation/#!sourcedocs/projection" target="_blank">
                           <sup id="" data-element-name="sup">↗↗</sup>
                           </a>  ist ein verstecktes Saxon XQuery Feature. Es funktioniert nur für eine einzige Abfrage.
                        Das kann schon recht hilfreich sein, wenn man ein mehrere 100MB großes Dokument durchsuchen
                        will.
                     </div>
                  </div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Ohne Projection würde das Beispiel von oben so verarbeitet:</div>
                  </div>
                  <div class="margin"><pre class="prettyprint">java -cp usr/lib/saxon/saxon.jar net.sf.saxon.Query -t 
     -s:buecher.xml 
     -q:buecher.xquery 
     -o:ergebnis.xml 
     -projection:off 
     nachname=grass
Saxon-EE 9.7.0.20J from Saxonica
Java version 1.8.0_60
Using license serial number V005095
Analyzing query from Desktop/buecher.xquery
Generating byte code...
Analysis time: 201.10095 milliseconds
Processing file:/Users/Alex/buecher.xml
Using parser com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser
Building tree for file:/Users/Alex/buecher.xml 
using class net.sf.saxon.tree.tiny.TinyBuilder
Tree built in 3.482278ms
Tree size: 46 nodes, 58 characters, 6 attributes
Execution time: 27.137589ms
Memory used: 67031664</pre></div>
                  <div class="margin">
                     <div class="p" id="" data-element-name="p" data-tektur-reviewer-number="">Mit der Option -projection:on verändert sich die Ausführungszeit signifikant:</div>
                  </div>
                  <div class="margin"><pre class="prettyprint">[...]

Document projection for file:/Users/Alex/buecher.xml
-- Input nodes 50; output nodes 27; reduction = 46%
Tree built in 3.80615ms
Tree size: 26 nodes, 58 characters, 3 attributes
Execution time: 15.83463ms
Memory used: 64339064</pre></div>
               </div>
            </div>
         </div>
      </div>
      <div id="date-version">Version: 32<br>Jan 18 2019
      </div>
   </body>
</html>