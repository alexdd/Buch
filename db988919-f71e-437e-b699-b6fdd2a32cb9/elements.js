[{"id":"b8539c31-c176-46bb-b028-e811b2decfbe","type":"para","text":"Eindeutigkeit der Regelbasis","title":" Eindeutigkeit der Regelbasis "},{"id":"9a5b8555-49ef-4d3a-bc72-1640077ef423","type":"para","text":"Die Regelbasis von XSLT kann wahrscheinlich unendlich viele Regeln aufnehmen, wenn man unsere Limitierung bzgl. der Hardware nicht beachtet. Für die Vollständigkeit, Eindeutigkeit und Konsistenz der Regelbasis ist der Programmierer aber selbst verantwortlich.","title":" Eindeutigkeit der Regelbasis "},{"id":"3e087bbf-c0ae-4bd1-95b2-89113fd7f25cd6e6","type":"para","text":"Um die Eindeutigkeit der Regeln zu gewährleisten, gibt es verschiedene Mechanismen.","title":" Eindeutigkeit der Regelbasis "},{"id":"e16576ad-fbf7-41d7-a23e-deb174c6b176d6e9","type":"para","text":"Reihenfolge der Match-Regeln","title":" Eindeutigkeit der Regelbasis "},{"id":"9ef5fc0c-f742-4267-98dc-3a3c4711f7f4d6e11","type":"para","text":"Im Normalfall sollte auf einen bestimmten Knoten in einem bestimmten Szenario genau eine Regel matchen. Falls es einen Konflikt gibt, wird zumindest bei Saxon diejenige Regel herangezogen, die im Stylesheet zuletzt deklariert wurde.","title":" Eindeutigkeit der Regelbasis "},{"id":"ca5b365e-570a-4296-be40-adc228bb4c30d6e13","type":"para","text":"Diesen Umstand zu kennen, ist genau dann wichtig, wenn man einen bestehenden Stylesheet-Code übernehmen muss. Getreu dem Motto \"Never change a running system\" sollte man die Sache diesbzgl. sehr behutsam aufräumen.","title":" Eindeutigkeit der Regelbasis "},{"id":"c35ab440-7d81-4466-a34f-32545cec227ad6e14","type":"para","text":"Präzedenz der Auswertung","title":" Eindeutigkeit der Regelbasis "},{"id":"477f566a-06ea-4716-afc4-5f3fc591ec04d6e16","type":"para","text":"Match-Regeln werden gemäß ihrer Spezifität sortiert und diejenige, die auf einem Knoten in einem bestimmten Szenario am besten zutrifft, wird zur Auswertung herangezogen. Grds. werden die Regeln anhand folgender Kriterien sortiert:","title":" Eindeutigkeit der Regelbasis "},{"id":"12919986-a583-4893-bc7b-bcab6b74558fd6e22","type":"para","text":"Importierte Template Regeln haben immer eine niedrigere Priorität als die Regeln des importierenden Stylesheets.","title":" Eindeutigkeit der Regelbasis "},{"id":"01aededb-d8e1-43b6-92d3-1495e12ce7e5d6e25","type":"para","text":"Templates mit einem höheren Priority Attribut haben Vorrang.","title":" Eindeutigkeit der Regelbasis "},{"id":"70789d26-aaa8-40ca-ab3d-54df68f59d9fd6e28","type":"para","text":"Templates ohne Priorität bekommen automatisch eine Default-Priorität. Die höchste Default-Priorität ist .","title":" Eindeutigkeit der Regelbasis "},{"id":"aafa8f6b-38f7-4076-8d83-4d506d2df6bdd6e31","type":"para","text":"Diese Default Priorität errechnet sich anhand der Bedingungen oder Wildcards, die an einen Match-Regel geknüpft sind:","title":" Eindeutigkeit der Regelbasis "},{"id":"847229ce-7fb1-40e2-89d1-a17200496892d6e35","type":"para","text":"Wenn mehrere Templates matchen, dann wird das am meisten spezifische zur Auswertung herangezogen.","title":" Eindeutigkeit der Regelbasis "},{"id":"1f5826ff-6c21-4694-93bf-ed25bd17e9c1d6e38","type":"para","text":"Das am meisten spezifische Template wird anhand der Prioritäten berechnet.","title":" Eindeutigkeit der Regelbasis "},{"id":"93f78735-9ee8-4a55-b111-db46fa1c0448d6e41","type":"para","text":"Einfache Elementnamen (z.B. \"para\") haben Prio .","title":" Eindeutigkeit der Regelbasis "},{"id":"918bc399-4754-4a49-aba8-e5b5261e25acd6e44","type":"para","text":"Wildcards (z.B. ) haben Priorität","title":" Eindeutigkeit der Regelbasis "},{"id":"26a5a996-f002-4a8d-b4a2-d2bd6d0e0723d6e47","type":"para","text":"Knoten-Tests für andere Knoten (e.g. , etc. ) haben Priorität","title":" Eindeutigkeit der Regelbasis "},{"id":"75eeb424-e904-4ba4-aae1-ca1bbf270491d6e50","type":"para","text":"In allen anderen Fällen ist die Prio .","title":" Eindeutigkeit der Regelbasis "},{"id":"787a2108-8ab3-4f1a-a6fd-7f1e4ec490f4d6e52","type":"para","text":"Beispiele:","title":" Eindeutigkeit der Regelbasis "},{"id":"57a536cb-b2a8-4d4f-b093-065406abc1b4d6e56","type":"para","text":"","title":" Eindeutigkeit der Regelbasis "},{"id":"4d8707a6-e174-42ea-a461-18f77c90df5dd6e59","type":"para","text":"","title":" Eindeutigkeit der Regelbasis "},{"id":"d7d5606d-df29-4c0f-847a-cac5c4e462e5d6e62","type":"para","text":"","title":" Eindeutigkeit der Regelbasis "},{"id":"154c565b-e5a8-41ef-a166-4c0af8877454d6e65","type":"para","text":"","title":" Eindeutigkeit der Regelbasis "},{"id":"9ec834a7-6f28-4075-910b-a00e9e51c8cbd6e68","type":"para","text":"","title":" Eindeutigkeit der Regelbasis "},{"id":"2b566d41-a710-4f86-89dd-52131d8c7c87d6e71","type":"para","text":"","title":" Eindeutigkeit der Regelbasis "},{"id":"9c338e96-d097-4e31-a5a2-1768d5aa639dd6e34","type":"para","text":"Mit einer Kommandozeilen-Option kann bei Saxon festgelegt werden, dass die Transformation abbricht, sobald es einen Konflikt bei der Regelauswertung gibt.","title":" Eindeutigkeit der Regelbasis "},{"id":"5b4364ca-516c-4edb-a9e8-3de574a18cc2d6e19","type":"para","text":"Import Präzendenz und Default-Regel","title":" Eindeutigkeit der Regelbasis "},{"id":"69c293ea-97d3-42a9-a6f4-a6f8bdcfa0edd6e21","type":"para","text":"Wie in der obigen Sektion unter Punkt 1. angegeben, haben alle Regeln in einem importierten Stylesheet eine geringere Priorität als im importierenden Stylesheet. Diesen Umstand kann man sich zunutze machen, um eine Default-Regel einzubinden, bspw:","title":" Eindeutigkeit der Regelbasis "},{"id":"d66bad0f-2412-417a-b36e-eab2f6bdd177d7e87","type":"code","text":"<xsl:template match=\"*\" mode=\"#all\"\/>","title":" Eindeutigkeit der Regelbasis "},{"id":"ee1dbc33-8d3b-4a4d-8fff-0f3d31f87f4bd6e83","type":"para","text":"Da sie sich in einem importierten Stylesheet befindet, hat sie geringere Priorität als alle anderen Regeln und greift nur dann, wenn für einen betretenen Knoten keine andere Match-Regel definiert ist.","title":" Eindeutigkeit der Regelbasis "},{"id":"c1b40cca-19d7-4c6e-9be7-d77ad779951bd6e85","type":"para","text":"Das ist z.B. praktisch, um nicht \"gehandelte\" Element zu identifizieren - dazu wäre die obige Regel nicht leer, sondern würde bspw. einen gelb markierten Warntext direkt in das Ausgabeformat schreiben.","title":" Eindeutigkeit der Regelbasis "},{"id":"daffa816-57a9-4f65-b1c3-b5266bc0c41bd6e87","type":"para","text":"Eine leere Default-Regel ist dagegen gut, wenn bspw. in einer XML-2-XML Migration automatisch Knoten im XML Baum abgetrennt werden sollen, da es für diese keine Match-Regel gibt.","title":" Eindeutigkeit der Regelbasis "},{"id":"be710deb-554e-4962-beb9-9de58d386c7fd6e24","type":"para","text":"Prioritäten","title":" Eindeutigkeit der Regelbasis "},{"id":"d9a24ef4-9b36-4aa8-ae9b-371cfe8120c2d6e26","type":"para","text":"Alle Match-Regeln werden mit einer Priorität ausgestattet. Der Stylesheet-Entwickler hat die Möglichkeit diese Priorität zu überschreiben. Dazu wird das Attribut an der Match-Regel verwendet. Ein Use-Case für die Prioritäten wäre bspw. folgendes Filter-Szenario","title":" Eindeutigkeit der Regelbasis "},{"id":"0730151b-4814-4b18-a8af-5c049148a6a9d7e114","type":"para","text":"","title":" Eindeutigkeit der Regelbasis "},{"id":"2ad7f812-2b73-49a6-a5f7-36638003d62ed6e96","type":"para","text":"Die Eingabeinstanz soll in einer Vorprozessierung gefiltert werden.","title":" Eindeutigkeit der Regelbasis "},{"id":"95feaac6-9c99-45e3-afc6-5d662d429984d6e99","type":"para","text":"Dabei sollen Seminar-Elemente markiert werden, die nicht besonderen Bedingungen entsprechen:","title":" Eindeutigkeit der Regelbasis "},{"id":"e7dfbd53-0177-4c4c-b997-f05acf05a6d9d6e103","type":"para","text":"Das Seminar-Element hat ein Feld \"Ende-Datum\" das abgelaufen ist.","title":" Eindeutigkeit der Regelbasis "},{"id":"e4c707c1-e72a-4973-bfd7-8daf6c6f8caed6e106","type":"para","text":"Am Seminar-Element sind mehrere Dozenten angestellt, obwohl das Seminar-Element vom Typ \"Single\" ist.","title":" Eindeutigkeit der Regelbasis "},{"id":"d2a692e7-0a1c-4f95-af44-4dc456ceb645d6e109","type":"para","text":"Einem Seminar-Element ist kein Dozent zugeordnet.","title":" Eindeutigkeit der Regelbasis "},{"id":"d467b740-3e8b-4bac-949c-b94f3c9dc174d6e112","type":"para","text":"Sicherlich kann es Seminar-Elemente geben, die alle drei Bedingungen erfüllen. Um das Error-Log aber nicht zu überfüllen, sollen die Filter nach ihren Prioritäten ausgeführt werden.","title":" Eindeutigkeit der Regelbasis "},{"id":"3f9a7a12-fa87-47eb-9874-4d8f275ed427d6e114","type":"para","text":"In XSLT Templates überführt, könnte diese Anforderung so umgsetzt werden:","title":" Eindeutigkeit der Regelbasis "},{"id":"cba8cb9a-d83c-4adf-8e25-7d12d064aff1d7e132","type":"code","text":"<xsl:template match=\"Seminar[Ende-Datum\/xs:date(.) le current-date()]\" priority=\"30\" mode=\"filter-seminare\"> <xsl:element name=\"Filtered-Seminar\" namespace=\"{namespace-uri()}\"> <xsl:attribute name=\"reason\">termed-seminar<\/xsl:attribute> <xsl:apply-templates select=\"node()|@*\" mode=\"filter-seminare\"\/> <\/xsl:element> <\/xsl:template> <xsl:template match=\"Seminar[Type eq 'SINGLE' and count(dozenten\/dozent) gt 1]\" priority=\"20\" mode=\"filter-seminare\"> <xsl:element name=\"filtered-Seminar\" namespace=\"{namespace-uri()}\"> <xsl:attribute name=\"reason\">dozenten-count<\/xsl:attribute> <xsl:apply-templates select=\"node()|@*\" mode=\"filter-seminare\"\/> <\/xsl:element> <\/xsl:template> <xsl:template match=\"Seminar[not(dozenten\/dozent)]\" mode=\"filter-seminare\"> <xsl:element name=\"filtered-Seminar\" namespace=\"{namespace-uri()}\"> <xsl:attribute name=\"reason\">dozenten-missing<\/xsl:attribute> <xsl:apply-templates select=\"node()|@*\" mode=\"filter-seminare\"\/> <\/xsl:element> <\/xsl:template>","title":" Eindeutigkeit der Regelbasis "},{"id":"7f67f7d4-dff7-4a4a-95ed-b7dc00a7b185d7e143","type":"para","text":"Neben des Einsatzes des Attributs und des nachfolgend beschriebenen Attributs ist sicherlich auch noch interessant, dass die gefilterten Seminar-Elemente hier nicht gelöscht werden, sondern umbenannt werden. Auf diese Weise können sie in einem nachfolgenden Transformationsschritt (Stichwort: Vortransformationen ) weiterbehandelt werden, stören aber in der regulären Verarbeitung nicht.","title":" Eindeutigkeit der Regelbasis "},{"id":"8950e48f-85c8-4fc8-98f7-e1f7e42ed7d5d6e29","type":"para","text":"Modus Attribute","title":" Eindeutigkeit der Regelbasis "},{"id":"bc053ce1-34d6-4565-8b3a-f2fe65d21f1cd6e31","type":"para","text":"An allen Templates hat man die Möglichkeit einen selbst deklarierten Modus anzugeben. Wenn dann der XSLT Prozessor in eine bestimmte Richtung gepusht, vgl. Push vs. Pull Stylesheets , wird, werden nur diejenigen Regeln zur Auswertung herangezogen, die im selben Modus sind, wie der Call selbst.","title":" Eindeutigkeit der Regelbasis "},{"id":"f26823af-acb5-4314-8aca-25e62527371dd6e126","type":"para","text":"Beispielsweise möchte man die Titel im Kapitel anders behandeln als die Kapitel im Inhaltsverzeichnis, denn im TOC sollen z.B. keine Fussnoten-Marker angezeigt werden.","title":" Eindeutigkeit der Regelbasis "},{"id":"12bc5735-95b8-4bb2-99e7-a2979c3d031ad6e128","type":"para","text":"In Templates formuliert würde so eine Anweisung folgendermassen aussehen:","title":" Eindeutigkeit der Regelbasis "},{"id":"73be1668-2eb8-4bfd-a902-4b2c8c2c9da8d7e151","type":"code","text":"<xsl:template match=\"title\" mode=\"toc\"> <div class=\"toc-entry\"> <xsl:apply-templates select=\"*[not(self::footnote)]\"\/> <\/div> <\/xsl:template> <xsl:template match=\"title\"> <h1> <xsl:apply-templates\/> <\/h1> <\/xsl:template>","title":" Eindeutigkeit der Regelbasis "},{"id":"b11eef8a-04dc-4c3e-b189-3d8d6b78444ad6e132","type":"para","text":"Die Generierung des TOC könnte dann so ablaufen:","title":" Eindeutigkeit der Regelbasis "},{"id":"31cb6673-7fc8-4564-8c09-5a09f1dc41d9d7e155","type":"code","text":"<xsl:for-each select=\"chapter\"> <xsl:apply-templates select=\"title\" mode=\"toc\"> <\/xsl:for-each>","title":" Eindeutigkeit der Regelbasis "},{"id":"2cb80884-bdd3-4b2d-a4ae-4d1c7ed04a67d6e136","type":"para","text":"Bzgl. der Eindeutigkeit der Regelbasis kann man so anhand des Mode-Attributes Ausführungsgruppen bilden.","title":" Eindeutigkeit der Regelbasis "}]