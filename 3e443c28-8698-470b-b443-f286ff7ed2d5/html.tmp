<div data-attribute-id="309017d9-9fd7-4a34-b13a-4bf8ecea4556" class="topic show_menu tags" data-element="topic" data-deletable="false" data-tektur-editor-id="ac6ecb4d-eaa0-433d-84c9-df233d6c5cc8"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div data-attribute-id="743f34bc-c83e-49d3-9a2e-2c38d1c384c9" class="title pmarker tags" data-element="title" data-tektur-editor-id="b9425cb3-15e0-461c-b59f-9188d1b43760" contenteditable="true">Namespaces</div><div class="abstract optional show_menu tags" data-element="abstract" data-excluding="shortdesc" style="display:none" data-tektur-editor-id="8bdc8dbb-9b69-4730-b25b-df1cfa0da02f"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="e14c8648-b4da-4b67-964d-064dd43bbcc5" contenteditable="true"></div></div><div data-attribute-id="2e9a9f57-c540-4349-b553-b3ff06af8175" class="body show_menu tags" data-element="body" data-deletable="false" data-tektur-editor-id="db65a197-af34-44ed-bdd8-d559667768dd"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="section tektur-wrapper tags" data-element="section" data-tektur-editor-id="099445c0-23ef-4370-8bb7-628d09d7e5dc"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="6f3e2556-a8a9-4c91-bf51-cc4b05ba29c9" class="p pmarker tags" data-element="p" data-tektur-editor-id="c3925d23-5407-414b-b74f-d72842ec4ccd" contenteditable="true">Wenn man XML Instanzen aus unterschiedlichen Quellen mit XSLT verarbeiten will, wird man sich wohl
oder übel mit dem Thema Namespaces (NS) auseinander setzen müssen, um Konflikte in den 
Elementselektoren zu vermeiden.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="408f70f7-e541-4c17-bc75-16db61b71e87d6e6" class="p pmarker tags" data-element="p" data-tektur-editor-id="d229f5af-1330-4fb0-bd39-3781ee717129" contenteditable="true">Gerade bei hintereinandergeschalteten Transformationen kann es auch passieren, 
dass unerwartet ein Namespace in die Ausgabe generiert wird,
den der folgende Prozesschritt nicht versteht, weil er dort nicht deklariert wurde.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="7b6e758e-d962-425a-86cf-30fc852bda81d6e8" class="p pmarker tags" data-element="p" data-tektur-editor-id="270dc34e-67b8-4b27-9df7-a728ddde9bef" contenteditable="true">Es gibt meherere Möglichkeiten einen Namespace im Stylesheet zu deklarieren. Gehen wir davon aus,
dass in einem Transformationsschritt genau eine Quelle und max. eine Konfigurationsdatei verarbeitet 
wird, dann kann das Stylsheet-Element bspw. so aussehen:</div><div class="pre"><div data-attribute-id="a177c51d-aac1-4cec-8f8c-18af2e2eb568d6e10" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="9a71d68a-465a-4323-a2ad-5a9b0440991c" contenteditable="true">&#x3C;xsl:stylesheet version="2.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  xmlns:tektur="https://namespace-eigener-xslt-funktionen"
  xmlns="http://namespace-in-der-xml-eingabe.com/"
  xpath-default-namespace="https://namespace-der-konfigdatei.com/"
  exclude-result-prefixes="#all"&#x3E;</div></div><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="149bd027-ef7b-427c-8d88-cc6df63fcef1" contenteditable="true"></div><ul data-attribute-id="f50cf486-fec3-4aca-a510-4347a0fffe51d6e12" class="ul tags" data-element="ul" data-tektur-editor-id="bc9fad60-5e0b-41bc-988a-17a9742c7574"><li data-attribute-id="a71c0a9a-d856-483b-a102-bace566e0c04d6e13" class="li tags" data-element="li" data-tektur-editor-id="cc396786-a60c-47c0-bf04-380dd5241c80"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="3bc26fb9-3d57-4990-9cb6-bdeea4a490d5d6e14" class="p pmarker tags" data-element="p" data-tektur-editor-id="c1b19152-457f-4ff2-a33b-3ac6311e3d11" contenteditable="true">Der <span data-attribute-id="9a07e583-5f81-4c4e-aa52-bb2beff4b80bd6e16" data-attribute-href="undefined" class="b tags" data-element="b" data-tektur-editor-id="e99e34b1-fa79-4a6a-be8c-3c1365db9a67">xsl</span> Namespace ist klar</div></li><li data-attribute-id="b2fa04fc-e0d0-4a22-868d-6de15f9536f0d6e19" class="li tags" data-element="li" data-tektur-editor-id="f72013f9-7638-4242-a165-8c09396baca0"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="9f37a0f6-0e32-4d52-a2df-26c8b92c584bd6e20" class="p pmarker tags" data-element="p" data-tektur-editor-id="55088f30-b9d1-4f86-9765-849b5f49cb35" contenteditable="true">Der <span data-attribute-id="967eaa3e-516f-4649-a41d-9d21b12df84ed6e22" class="b tags" data-element="b" data-tektur-editor-id="004d521d-20e4-4731-bc67-d78a38a11b6c">xs</span> Namespace ist notwendig, wenn man typisiert arbeiten will. Er erlaubt das Einbinden von Datentypen
nach der XML Schema Spezifikation[[fn:https://de.wikipedia.org/wiki/XML_Schema]] und somit die 
bessere Validierung des Stylesheets zur Compile-Zeit.</div></li><li data-attribute-id="40b70b85-31dd-4109-882f-aa19e8e2b1b8d6e25" class="li tags" data-element="li" data-tektur-editor-id="2d2755ae-a919-4b4e-ae9d-ad28c4ea0aa0"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="effc0d73-d115-4f50-99c0-bd16960d52f6d6e26" class="p pmarker tags" data-element="p" data-tektur-editor-id="a0e5e2f5-f2e1-4e9b-910a-ca228e378c55" contenteditable="true">Die Deklaration eines eigenen geprefixten Namespaces erlaubt das Einbinden von eigenen XSLT Funktionen, 
wie z.B. auch das Einbinden der FunctX Bibliothek[[fn:http://www.xsltfunctions.com/]]</div></li><li data-attribute-id="0a804e4e-1e9c-4033-b79e-78fddeb0f809d6e28" class="li tags" data-element="li" data-tektur-editor-id="8a284c7f-36d6-46d0-b32b-294883d22479"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="985f02e1-ff86-49cd-9f9c-d285261fb6bed6e29" class="p pmarker tags" data-element="p" data-tektur-editor-id="4a6cdf52-41c2-418c-ab7f-e0195d3f10e9" contenteditable="true">Der Nicht-geprefixte Namespace ist der Default-Namespace und kann einen NS aus der Eingabe handeln</div></li><li data-attribute-id="77756675-79a9-49ee-a322-2fe357eb505ad6e31" class="li tags" data-element="li" data-tektur-editor-id="d4c9bc25-fdfc-46f3-9124-f0a77e03a95c"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="6f7d075e-efb2-4407-adb3-6b0d46163a1ed6e32" class="p pmarker tags" data-element="p" data-tektur-editor-id="9df63ee8-24ef-4ecb-be0b-b4d279013da8" contenteditable="true">Das Attribut <span data-attribute-id="4eb02d99-4049-43c5-a105-76f286898d2cd6e34" class="b tags" data-element="b" data-tektur-editor-id="020e8fcd-1c57-4d76-bf35-c4062876156d">xpath-default-namespace</span> gibt einen weiteren NS an, der in XPATH Funktionen verwendet werden kann.
In diesem Feld würde ich den NS einer Konfigurations- oder separaten Datendatei angeben.</div></li></ul><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="facda359-d33a-4d29-86cd-1c8ed0c0c37bd6e37" class="p pmarker tags" data-element="p" data-tektur-editor-id="bcc0cb31-a672-4a14-a7f4-73ca8fcae281" contenteditable="true">Mehr als einen NS in der Eingabe sollte man aus meiner Sicht bei der XML Verarbeitung nit XSLT vermeiden wenn es geht.
GGf. empfiehlt es sich, die Eingabe vor der Verabeitung zu normalisieren und Elemente ggf. umzubennen.</div><div data-attribute-id="d4c6a587-757b-4b00-883c-9e5273834a12d6e39" data-attribute-type="danger" data-attribute-status="changed" class="hazardstatement show_menu tags" data-element="hazardstatement" data-ommited="messagepanel" data-tektur-editor-id="28bce2c6-16c1-4faa-b7d5-47688bd31b97"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="Danger container"><div class="signal-word">DANGER</div><div class="hcontent"><div data-attribute-id="6a0d517a-4a6c-48b2-b637-699ec79f42a7d6e41" class="typeofhazard tags" data-element="typeofhazard" data-tektur-editor-id="183570a6-ee06-43f6-93f4-77d34c09d0e4"><div class="p tektur-wrapper pmarker tags" data-element="p" data-tektur-editor-id="0ab80741-93d3-420b-9d99-a6a58bf3f6c0" contenteditable="true">Befinden sich in den Eingabedaten Namespaces, die man in den XSLT Stylesheets nicht handelt - der Namespace kann auch nur
an einem ganz bestimmten Element hängen - so kannp bei der Transformation - ohne Fehlermeldung - zu unerwarteten Ergebnissen kommen.</div></div><div class="consequence optional multiple tags" data-element="consequence" style="display:none" data-tektur-editor-id="3a7ede0d-a534-438b-aa12-76585d79c3e9"><div class="gui-multiple-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="p tektur-wrapper placeholder text pmarker tags" data-element="p" data-tektur-editor-id="a8d3c798-9bbc-4394-8314-97a73011c4da" contenteditable="true"></div></div><div data-attribute-id="4d47e81a-7a6a-4f2e-9621-45a6535edbb2d6e43" class="howtoavoid multiple tags" data-element="howtoavoid" data-tektur-editor-id="56ca55bb-c2f3-4523-880f-a7850ec1a23f"><div class="gui-multiple-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div class="p tektur-wrapper pmarker tags" data-element="p" data-tektur-editor-id="0cc8ff43-a30f-4de4-bf64-ff9a8945aa1c" contenteditable="true">Deshalb sollte man die Daten im Vorfeld bzgl. Namespaces sehr genau analysieren.</div></div></div></div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="b714b258-69e2-40ef-9d70-582d27bbfc6cd6e45" class="p pmarker tags" data-element="p" data-tektur-editor-id="2bccce2a-ad15-4867-b027-4346d160a3a1" contenteditable="true">Namespaces in der Eingabe werden über die Kopfdeklaration in der Stylesheetdatei gehandelt, welcher Namspace
schliesslich in die Ausgabe geschrieben wird, hängt vom aktuell verarbeiteten Kontextknoten ab:</div><ul data-attribute-id="4fd51183-cb5c-454e-88a2-af0392a44343d6e47" class="ul tags" data-element="ul" data-tektur-editor-id="c98bcb5a-777c-4113-9b21-50a117bcef3e"><li data-attribute-id="83a93052-ddd0-4ca8-a440-e11cae99f4e2d6e48" class="li tags" data-element="li" data-tektur-editor-id="41fc9fd1-01cd-44a8-9303-cfaac0f5b726"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="93df2752-2e39-44f2-8306-bc4014ec566ad6e49" class="p pmarker tags" data-element="p" data-tektur-editor-id="38a4b93c-06d8-4384-9f38-3220355d4e06" contenteditable="true">Elemente, die man erzeugt, erhalten automatisch den Default-Namespace, wenn man nicht explizit einen NS angibt.</div></li><li data-attribute-id="35a0b8ce-4224-4958-8bb7-9e65ce516d68d6e51" class="li tags" data-element="li" data-tektur-editor-id="145f0a37-3bd3-45bc-a08f-5f8b39e2e832"><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="dd1681a1-b730-4864-9fc6-3b85c7d428c2d6e52" class="p pmarker tags" data-element="p" data-tektur-editor-id="f5ef774c-0c2f-4c4f-b5c7-3f382bbb245c" contenteditable="true">Elemente, die man kopiert, transportieren den Namespace, den sie in der Eingabe hatten, wenn man dies nicht explizit verhindert.</div></li></ul><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="b7e9f54a-5c0b-48de-abf2-80f917c915acd6e54" class="p pmarker tags" data-element="p" data-tektur-editor-id="39abfc8d-49e4-4f82-8447-d6519c931269" contenteditable="true">Um diese beiden Default Einstellungen zu steuern (bzw. zu überschreiben) gibt es mehrere Möglichkeiten:</div><div class="pre"><div data-attribute-id="fc8bd25a-ed6b-4a37-9bec-122c70eaf462d6e56" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="abbc15f9-4ef8-4397-a958-ef50171a93e1" contenteditable="true">&#x3C;xsl:element name="{local-name()}" namespace="{namespace-uri()}"&#x3E;</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="e38c1750-4914-402d-a6c8-1189f6f96106d6e59" class="p pmarker tags" data-element="p" data-tektur-editor-id="4a9506b7-1b85-4c85-979d-62dbb6d0c51e" contenteditable="true">Hier wird ein Element mit dem un-geprefixten Namespace des Kontextknotens deklariert.
Wenn der Kontextknoten keinen anderen Namespace hat, so wird hierdurch sichergestellt,
dass der Default NAmespace auch tatsächlich in die Ausgabe kommt.</div><div class="pre"><div data-attribute-id="c2eea43a-fd04-49fa-a878-44c4dece4d35d6e61" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="551358ff-ce62-4b6d-a25a-191d364c60c2" contenteditable="true">&#x3C;xsl:element name="meinelement" namespace=""&#x3E;</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="ff135156-7c5f-461a-aa39-03acbbfc2164d6e63" class="p pmarker tags" data-element="p" data-tektur-editor-id="0a4a0695-18be-4d39-a016-c33a664c472d" contenteditable="true">Hier wird ein Element ohne Namespace Angabe in die Ausgabe geschrieben. Es würde dann
den Default-Namespace der Ausgabe erben. Es gibt auch ein Attribut am xsl:copy Element,
das den Vorgang des Namespace-Kopierens steuern kann:</div><div class="pre"><div data-attribute-id="1e6c65ac-e018-4dae-9a4b-57bc7d19bc56d6e65" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="8d89facf-3003-4caa-a577-489bc22fa353" contenteditable="true">&#x3C;xsl:template match="p"&#x3E;
  &#x3C;xsl:copy copy-namespaces="no"&#x3E;
     &#x3C;xsl:apply-templates/&#x3E;
   &#x3C;/xsl:copy&#x3E;
&#x3C;/xsl:template&#x3E;</div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="1f87506c-b5f5-4f11-9ff3-4932938dea95d6e67" class="p pmarker tags" data-element="p" data-tektur-editor-id="849803b7-2d3d-46b4-975e-3ff9c0b0aa43" contenteditable="true">Hier wird der Namespace am p Element nicht in die Ausgabe geschrieben. Ggf. funktiniert diese
Funktion aber mit unerwarteten Ergebnissen, deshalb sollte man sich nicht darauf verlassen.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="526b542d-9aaa-4181-bb81-9990f3f9940bd6e69" class="p pmarker tags" data-element="p" data-tektur-editor-id="efb27a98-63d8-44de-bb92-ca39eeb4ec70" contenteditable="true">Ebenso kann eine Default-Kopierregel verwendet werden, die es verbietet einen Namespace
weiterzuvererben:</div><div class="pre"><div data-attribute-id="030cd26d-7697-4353-bbb4-04a33871cba7d6e71" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="6d4a62d4-4b89-418e-83b7-a91e08a90ec1" contenteditable="true">&#x3C;xsl:template match="@* | node()"&#x3E;
   &#x3C;xsl:copy inherit-namespaces="no"&#x3E;
     &#x3C;xsl:apply-templates select="@* | node()"/&#x3E;
   &#x3C;/xsl:copy&#x3E;
&#x3C;/xsl:template&#x3E;</div></div><div class="placeholder text pmarker tags" data-element="p" data-tektur-editor-id="f6eae807-eb35-40bc-bdb7-eb92e79adb2d" contenteditable="true"></div></div><div data-element="section" class="section optional show_menu tags" data-tektur-editor-id="6a2f09fe-57ea-41ae-809a-97fb62f5438d"><div class="gui-optional-elements-button" contenteditable="false"><div class="menu-icon" style="display:none">+</div></div><div data-attribute-id="ad139a27-9649-4c97-8f05-a62edd570cb7d6e74" class="title pmarker tags" data-element="title" data-tektur-editor-id="2aac9645-89de-4645-b509-c4ff4f9347fd" contenteditable="true">Namespaces in XQuery</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="6a862358-2454-4cb0-a7c5-854c9d4cf899d6e75" class="p pmarker tags" data-element="p" data-tektur-editor-id="111e0c6e-df5c-4143-959a-d1bb7b668ef3" contenteditable="true">Während XSLT dazu dienen sollte, XML Daten in andere (XML-) Formate zu transformieren, dient XQuery 
z.B. dazu auf einer NoSQL Datenbank Daten aus unterschiedlichen Quellen
zu selektieren, zu harmonisieren und an verarbeitende Prozesse weiterzugeben.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="56fd4141-0088-4fdb-bf10-930e2d5d028ed6e77" class="p pmarker tags" data-element="p" data-tektur-editor-id="58e148a4-d2cf-4139-bc6e-8f9b59eabdd6" contenteditable="true">Deshalb ist es für mich nicht so erstaunlich, dass das Namespace Konzept in XQuery irgendwie besser
funktioniert.</div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="baa93854-b02c-41f2-a553-bb6701a8925ed6e79" class="p pmarker tags" data-element="p" data-tektur-editor-id="90244084-6542-4069-a447-eb777d18af2b" contenteditable="true">Damit man überhaupt Daten auf einem mit Namespaces versehenen XML Dokument selektieren
kann, müssen alle Namspaces am Anfang des XQuery Ausdrucks angegeben werden, das sieht so aus:</div><div class="pre"><div data-attribute-id="718ba1d7-e9d9-4452-8a32-2689f37022e4d6e81" data-attribute-xml_space="preserve" class="pre-content pmarker tags" data-element="pre" data-tektur-editor-id="f2736246-1a9c-43db-833a-11c4c66273f2" contenteditable="true">xquery version "1.0-ml";

import module namespace tektur = "http://www.teturcms.de/xquery/common" 
                                  at "common.xqy";
import module namespace mem = "http://xqdev.com/in-mem-update" 
                                  at '/MarkLogic/appservices/utils/in-mem-update.xqy';
declare namespace local = "https://lambdawerk.com/code/alex-sandbox/1.0";
declare namespace weiredns = "https://weired-ns-in-input-data.com/weired/ns";
declare namespace xs = "http://www.w3.org/2001/XMLSchema"; </div></div><div xmlns:xr="http://www.tekturcms.de/2012/xr/common" xmlns:xlink="http://www.w3.org/1999/xlink" data-attribute-id="d6bb0949-b9fa-4770-ba36-3acf2056e934d6e83" class="p pmarker tags" data-element="p" data-tektur-editor-id="f6a3c60f-b0de-4d05-9303-58317982e9d0" contenteditable="true">Hier werden zuerst Funktionen aus anderen Modulen eingebunden, nämlich die in einer Datei common.xqy
im selben Verzeichnis aus der eigenen Entwicklung, sowie die Bibliothek mem aus der MArklogic
Umgebung. Danach wird ein NS local deklariert, den man verwenden wird, wenn im weiteren Verlauf
eigene XQuery Funktionen verwendet werden sollen, sowie der NS weiredns, der in den Eingabedaten
vorhanden ist. Der NS xs ist analog zum XSLT Beispiel gesetzt.</div></div></div></div>