<?xml version="1.0" encoding="UTF-8"?><topic id="6f1d988d-2a6f-4ce7-82ab-8d7857e00610"><title id="8ab127a1-f7fa-4113-8ab7-9e0d00b2ccdd">mlcp - MarkLogic Content Pump</title><body id="c0ff5619-8a20-494b-acf6-5434b7154503"><p id="0bfad7a9-ed2d-4700-bf0f-dc1618b6fe0a">Die Content Pump f端r MarkLogic ist ein Java Tool, das den Bulk-Import von Daten 端ber die Kommadozeile realisiert.</p><p id="18eb8e60-9aa7-4995-a990-b2e35c3eb0f5d7e6">Das betreffende GitHub Projekt befindet sich [[link]]hier[[fn:https://github.com/marklogic/marklogic-contentpump*GitHub Projekt zur MarkLogic Content Pump]].</p><p id="36942ea0-9a85-4e60-a4a4-b1840d913432d7e8">Zur einfachen Installation kann man sich aber auch die Binaries auf den <undefined id="4a8a6f60-fb15-413a-a876-eb4f0d862e0fd7e10" href="undefined">[[link]]</undefined>Developer-Seiten<undefined id="ee281242-8bc9-4b78-8302-27e41a2a5548d7e13" href="undefined">[[fn:https://developer.marklogic.com/products/mlcp*Binaries zur Installation der MarkLogic Content Pump]] von MarkLogic herunterladen. Das Download Paket umfasst dann ein Batch Skript f端r Windows und Unix Systeme.</undefined></p><p id="610445a5-b21f-4c12-b582-6acc8367231cd7e15">Folgendes Bash Skript benutze ich um Daten nach MarkLogic hochzuladen:</p><pre id="52552905-cfdc-4dcb-9682-61c8e7357625d7e17" xml:space="preserve">#!/bin/bash

set -eo pipefail

mlcp_opts="-database alex-test -host localhost -username admin -password admin"

mlcp import $mlcp_opts \
     -input_file_path input-files \
     -input_file_type aggregates \
     -aggregate_record_element chapter \
     -output_collections /chapter \
     -output_uri_prefix /chapter/ \
     -output_uri_suffix .xml</pre><p id="e296ffb3-e4e7-440a-90dc-3870dc33c0d1d7e19">Dabei werden alle Dateien im Ordner [[code:input-files]] importiert. Der Dateityp
der hochzuladenen Daten ist mit [[code:aggregates]] angegeben. Das sind XML Daten. </p><note id="2b33e164-93c4-4340-94b5-548abb305ae4d7e21"><p id="bfaf1f2d-d1c7-43b9-9099-c629f74cc23cd7e22">Mehr Infos zu den Kommandozeilen-Optionen befinden sich auf der 
entsprechenden [[link]]Dokuseite[[fn:https://docs.marklogic.com/guide/mlcp/import*Dokuseite zu den Import Optionen der MarkLogic Content Pump]]
von MarkLogic. </p></note><p id="d6695868-ca0a-418e-91e2-bd91943744b3d7e24">Mit der Option [[code:-aggregate_record_element]] wird definiert, dass die Eingabe bzgl. des Elements [[code:&lt;chapter&gt;]] aufgesplittet werden soll.
D.h. eine Datei mit folgendem Inhalt: </p><pre id="3330803e-c24c-4aba-9e10-5ac8e2920673d7e26" xml:space="preserve">&lt;test&gt;
  &lt;title&gt;Test Datei&lt;/title&gt;
  &lt;chapter&gt;
    &lt;title&gt;Test Kapitel 1&lt;/title&gt;
    &lt;content&gt;Kapitel Inhalt 1&lt;/content&gt;
  &lt;/chapter&gt;
  &lt;chapter&gt;
    &lt;title&gt;Test Kapitel 2&lt;/title&gt;
    &lt;content&gt;Kapitel Inhalt 2&lt;/content&gt;
  &lt;/chapter&gt;
  &lt;chapter&gt;
    &lt;title&gt;Test Kapitel 2&lt;/title&gt;
    &lt;content&gt;Kapitel Inhalt 2&lt;/content&gt;
  &lt;/chapter&gt;
&lt;/test&gt;</pre><p id="cfcdff52-44c0-48d4-aeca-1e8702ba3868d7e28">wird in drei Records aufgesplittet:</p><fig id="964971ac-f826-4b38-b346-3f439fb3de65d7e30"><title id="dcb760a5-00c5-45a1-8d6e-469462e6e5ced7e31">Ergebnis einer MarkLogic Content Pump Sitzung</title><desc id="aa49e39f-e228-4122-a257-4a371e4f4befd7e33">Auf der Konsole kann man sich das Ergebnis der [[code:mlcp]] Sitzung anschauen. Es wurden - wie gew端nscht - drei XML Fragmente separat in die Collection gespeichert.</desc><image id="f4496ab8-a91c-43c3-b156-bf859f59d1f2d7e35" href="mlcp.png"/></fig><p id="5430cd2c-aef3-42fc-8034-46e7fbc44a45d7e37">Es befinden sich in der Collection <undefined id="701847ca-3fc0-4bcb-a65d-8d87cf715c44d7e39" href="undefined">[[code:/chapter]]</undefined> nun drei <undefined id="204e696a-3ac7-4e7f-869c-7be8b3660eb3d7e42" href="undefined">[[code:&lt;chapter&gt;]]</undefined> Fragmente...</p></body></topic>