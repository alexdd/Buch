[{"id":"9b1e7086-25cc-4bdf-ba77-6adfb503603b","type":"para","text":"Erste Schritte mit Xspec","title":" Erste Schritte mit Xspec "},{"id":"eef21ef4-793e-4fef-9f1e-a22ecf24b64c","type":"para","text":"XSpec ist ein Test-Framework für XSLT, XQuery und Schematron. Um beispielsweise komplexe Schematron Regeln zu testen, hinterlegt man in einem Test-Szenario Erwartungswerte für positive und negative Testfälle in Form von XML Schnippseln.","title":" Erste Schritte mit Xspec "},{"id":"c081ed9a-1a4b-4337-b0c9-34b997ffb2f0d7e9","type":"code","text":"<test-szenario> <testfall> <personen> <person> <vorname>Horst<\/vorname> <nachname>Schlämmer<\/nachname> <gewicht>100<\/gewicht> <\/person> <person> <vorname>Gundula<\/vorname> <nachname><\/nachname> <gewicht>60<\/gewicht> <\/person> <\/personen> <\/testfall> <\/test-szenario>","title":" Erste Schritte mit Xspec "},{"id":"a495ec01-4794-4e28-b47f-0313ab934100d6e26","type":"para","text":"in einer XSpec Datei werden Assert- und Not-Assert-Methoden deklariert:","title":" Erste Schritte mit Xspec "},{"id":"5c077bd6-c90b-4894-9279-ddc11407f1c6d7e16","type":"code","text":"<x:description xslt-version=\"2.0\" xmlns:x=\"http:\/\/www.jenitennison.com\/xslt\/xspec\" schematron=\"test.sch\"> <x:scenario label=\"ALL\"> <x:context href=\"test.xml\"\/> <x:expect-not-assert id=\"person-nachname-rule\" location=\"\/\/person[1]\/nachname\"\/> <x:expect-assert id=\"person-nachname-rule\" location=\"\/\/person[2]\/nachname\"\/> <\/x:scenario> <\/x:description>","title":" Erste Schritte mit Xspec "},{"id":"9aac4097-bb50-44d5-8827-bd1775ce18fcd6e39","type":"para","text":"Grds. bdeutet ein Assert, dass das Mapping zwischen tatsächlichem Wert und Erwartungswert des Testfalls positiv erfüllt ist. Beim Not-Assert ist das Gegenteil der Fall. Im obigen Beispiel reichen zwei Regeln, um den Testfall vollständig abzudecken.","title":" Erste Schritte mit Xspec "},{"id":"350b086a-a78e-47cc-9a3e-4f8c596fadf4d6e41","type":"para","text":"Wenn man Schematron Regeln mit Hilfe von XSpec testen will, dann muss man ein bisschen um die Ecke denken. Denn auch diese Regeln werden mittels Assert und Not-Assert modelliert.","title":" Erste Schritte mit Xspec "},{"id":"e06e841f-1310-46c4-9851-ee6d6c8948f2d7e22","type":"code","text":"<sch:schema xmlns:sch=\"http:\/\/purl.oclc.org\/dsdl\/schematron\" xmlns:xsl=\"http:\/\/www.w3.org\/1999\/XSL\/Transform\" queryBinding=\"xslt2\"> <sch:pattern id=\"main\"> <sch:rule context=\"nachname\"> <sch:assert id=\"person-nachname-rule\" role=\"error\" test=\"normalize-space(.)\"> Der Nachname der Person mit ID: <sch:value-of select=\"@id\"\/> fehlt! <\/sch:assert> <\/sch:rule> <\/sch:pattern> <\/sch:schema>","title":" Erste Schritte mit Xspec "},{"id":"5da4afab-3eda-4027-956a-1e72b6dd19b3d6e48","type":"para","text":"In der Schematron-Regel wird zugesichert (Assert), dass jede Person einen Nachnamen hat.","title":" Erste Schritte mit Xspec "},{"id":"6d2dba49-cecd-4315-8956-4beb19e4af08d6e50","type":"para","text":"Hat sie keinen Nachnamen so wird der Bericht zum Fehlerfall in die Schematron Ergebnisdatei geschrieben. Diese Datei wertet nun Xspec aus.","title":" Erste Schritte mit Xspec "},{"id":"611d787d-7b54-46dd-9548-158dd6db0bfcd6e53","type":"para","text":"Erscheint ein Fehler (= das Feld nachname ist leer), so greift bei Xspec die Assert-Regel! Das ist die umgekehrte Logik zu den Schematron Regeln.","title":" Erste Schritte mit Xspec "},{"id":"1ed9b5fd-88c2-4a6b-998b-6eac55854ec7d6e58","type":"para","text":"Als Eselsbrücke kann man ein Assert in der Xspec Datei gleichsetzen mit Appear und ein Not-Assert mit Not-Appear .","title":" Erste Schritte mit Xspec "},{"id":"5f9a44b2-0d88-4bf3-81f2-d93a28301049d6e67","type":"para","text":"Ein Assert sichert also zu, dass sich ein Fehlerbericht in der Schematron Ergebnisdatei zum Testfall befindet. Ein Not-Assert sichert zu, dass sich kein Fehlerbericht befindet.","title":" Erste Schritte mit Xspec "},{"id":"23ee0dc1-c910-43f7-a86b-442562947535d6e69","type":"para","text":"Wie man sich leicht vorstellen kann, sind Assert-Regeln in diesem Fall leicht zu finden, dazu muss man nur die Schematron Testregeln ins Leere zeigen lassen. Alles ist grün und alles ist gut - dem Augenschein nach.","title":" Erste Schritte mit Xspec "}]